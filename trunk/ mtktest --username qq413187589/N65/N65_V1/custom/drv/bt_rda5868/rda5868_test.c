/*************************************************************************
 *
 * MODULE NAME:    rda5868_test.c
 * PROJECT CODE:   rda5868
 * DESCRIPTION:    rda5868 test mode.
 * MAINTAINER:     mql
 * CREATION DATE:  18/12/08
 *
 * SOURCE CONTROL: $Id: rda5868_test.c,v 2.6 2009/8/14 18:08:38 mql Exp $
 *
 * LICENSE:
 *     This source code is copyright (c) 2008-2009 rda.
 *     All rights reserved.
 *
 * NOTES TO USERS:
 *   None.
 *
 *************************************************************************/
#ifdef __BT_RDA5868__
#include "kal_release.h"      	/* Basic data type */
#include "stack_common.h"          /* message and module IDs */
#include "stack_msgs.h"            /* enum for message IDs */
#include "app_ltlcom.h"       	/* Task message communiction */
#include "syscomp_config.h"         /* type of system module components */
#include "task_config.h"      	/* Task creation */
#include "stacklib.h"        	   /* Basic type for dll, evshed, stacktimer */
#include "event_shed.h"       	/* Event scheduler */
#include "stack_timer.h"      	/* Stack timer */
#include "stdio.h"                  /* Basic C I/O functions */
#include "eint.h"                   /* External interrupt */

#include "uart_sw.h"               /* header file for UART */
#include "Bt_hw_define.h"
#include "bluetooth_struct.h"
#include "rda5868.h"


#ifdef __RDA_AUTO_CHIP__
extern unsigned int rda5868_chipid;
extern const unsigned int chipidaddr;
extern unsigned char rdabt_chip_sel;

#endif
#ifdef __RDA5868_USE_IIC__	

static unsigned short rda5400_vco_test[][2] = 
{

{0x3f,0x0000},///page down
{0x1A,0x03D1},//XTAL cap
//{0x1a,0x03d0},
{0x16,0x9d3c},//XTAL cap
{0x02,0xF180},//bbdac_range

};

#endif




kal_uint8 rda5868_vco_test[][14] = 
{
#ifndef __RDA5868_USE_IIC__
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x24,0x40,0x98,0xF3,0x04,0x00},//enable spi2
{0x01,0x02,0xFD,0x0A,0x01,0x01,0xFC,0x02,0x00,0x00,0x00,0x00,0x00,0x00},//page 0
{0x01,0x02,0xFD,0x0A,0x01,0x01,0x68,0x02,0x00,0x00,0xD1,0x03,0x00,0x00},//1a
{0x01,0x02,0xFD,0x0A,0x01,0x01,0x58,0x02,0x00,0x00,0x3c,0x9d,0x00,0x00},//16
{0x01,0x02,0xFD,0x0A,0x01,0x01,0x08,0x02,0x00,0x00,0x80,0xf1,0x00,0x00},//02
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x24,0x40,0x98,0xF2,0x00,0x00},//disable spi2
#endif
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x20,0x40,0xaf,0x1a,0x00,0x38},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x20,0x00,0x20,0x40,0x57,0x01,0x00,0x00}
};



kal_uint8 rda5868_rf_bbtest[] = 
{
#if 0
0x01,0x10,0xFD,0x18,0x00,0x00,0x01,0x04,0x03,
0x00,0x00,0x00,0x33,0x1A,0x3A,0xE2,0x4E,0x7A,
0x2C,0xCE,0xFF,0x01,0x55,0x55,0x00,0x00,0x12,0x00
#else
0x01,0x10,0xFD,0x18,0x00,0x00,0x01,0x04,0x04,
0x00,0x00,0x00,0x33,0x1A,0x3A,0xE2,0x4E,0x7A,
0x2C,0xCE,0xFF,0x01,0x55,0x55,0x00,0x00,0x12,0x00
#endif
};

kal_uint8 rda5868_rf_singlehop[] = 
{
0x01,0x13,0xFc,0x01,0x00

};

kal_uint8 rda5868_rf_inquiry[] = 
{
0x01,0x01,0x04, 0x05,0x33, 0x8B,0x9E, 0x30,0x00
};

kal_uint8 rda5868_enable_dut[] = 
{
0x01,0x03, 0x18, 0x00
};
kal_uint8 rda5868_enable_allscan[] = 
{
0x01, 0x1a, 0x0c, 0x01, 0x03
};
kal_uint8 rda5868_autoaccept_connect[] = 
{
0x01,0x05, 0x0c, 0x03, 0x02, 0x00, 0x02
};

kal_uint8 rda5868_hci_reset[] = 
{
0x01,0x03,0x0c,0x00
};


kal_uint8 rda5868_dut_rf[][14] = 
{
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x24,0x40,0x98,0xF3,0x04,0x00},//enable spi2
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x80,0x00,0x00,0x10,0x05,0x00,0x00,0x00},//PSKEY: Total number
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x84,0x00,0x00,0x10,0x37,0x0d,0x47,0x00},//PSKEY: GFSK ct_u
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x88,0x00,0x00,0x10,0x57,0x2a,0x48,0x00},//PSKEY: DPSK ct_u
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x8c,0x00,0x00,0x10,0x00,0x04,0x52,0x00},//PSKEY: Ref_ready_th
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x90,0x00,0x00,0x10,0x11,0x05,0x53,0x00},//PSKEY: Mix_guard_th
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x94,0x00,0x00,0x10,0x58,0x7f,0x43,0x00},//PSKEY: TX Delay
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x10},//pskey flag
};

kal_uint8 rda5868_dut_cmu200_pskey[][14] = 
{

//{0x01,0x02,0xFD,0x0A,0x00,0x01,0x38,0x00,0x00,0x10,0x00,0x40,0x05,0x0F},//pskey rf delay
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x3C,0x00,0x00,0x10,0x30,0xBF,0xA0,0xA0},//pskey rf timing
//{0x01,0x02,0xFD,0x0A,0x00,0x01,0x30,0x00,0x00,0x10,0x00,0x20,0x00,0x00},//pskey max power enable
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x00,0x10,0x00,0x80,0x00,0x00}//pskey flag
};

kal_uint8 rda5868_dut_tc3000_pskey[][14] = 
{

//{0x01,0x02,0xFD,0x0A,0x00,0x01,0x38,0x00,0x00,0x10,0x00,0x40,0x05,0x0F},//pskey rf delay
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x3C,0x00,0x00,0x10,0x30,0xBF,0xA0,0xA0},//pskey rf timing
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x30,0x00,0x00,0x10,0x00,0x20,0x00,0x00},//pskey max power enable
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x00,0x10,0x00,0x90,0x00,0x00}//pskey flag
};



kal_uint8 rda5868_dut_n4010_pskey[][14] = 
{
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x18,0x40,0x00,0x00,0x00,0x00},//
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x44,0x00,0x18,0x40,0x01,0x00,0x00,0x00},//
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x24,0x40,0x98,0xfb,0x04,0x10},//SCU: SPI2_clk_en pclk_SPI2_en
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x30,0x00,0x00,0x10,0xfd,0x00,0x00,0x00},//Max_output_power (for TC3000B)
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x38,0x00,0x00,0x10,0x00,0x40,0x05,0x0f},//Radio_setup_time
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x3c,0x00,0x00,0x10,0x30,0xbf,0xa0,0xa0},//TxRx_low_setup_time TxRx_setup_time
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x34,0x00,0x00,0x10,0x40,0x50,0x02,0x05},//disable sleep
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x00,0x10,0x00,0xf0,0x00,0x00},//PSKEY: Modify Flag

};


kal_uint8 rda5868_n4010_patch[][14] = 
{
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x04,0x00,0x18,0x40,0xc4,0x46,0x01,0x00},//patch
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x24,0x00,0x18,0x40,0x00,0x18,0x02,0x00},//patch
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x0c,0x00,0x18,0x40,0x84,0x3d,0x01,0x00},//patch
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x2c,0x00,0x18,0x40,0x00,0x18,0x02,0x00},//patch

//DV packet and packet length patch

{0x01,0x02,0xFD,0x0A,0x00,0x01,0xc0,0x00,0x00,0x10,0x8c,0xfc,0x48,0xe2},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xc4,0x00,0x00,0x10,0x08,0x00,0x54,0xe3},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xc8,0x00,0x00,0x10,0x09,0x60,0xa0,0x03},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xcc,0x00,0x00,0x10,0x02,0x60,0xa0,0x11},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xd0,0x00,0x00,0x10,0xbc,0x60,0xc0,0xe1},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xd4,0x00,0x00,0x10,0x70,0x04,0xa0,0xe3},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xd8,0x00,0x00,0x10,0x61,0x0e,0x80,0xe2},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xdc,0x00,0x00,0x10,0x00,0x10,0x90,0xe5},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xe0,0x00,0x00,0x10,0x40,0x0e,0x40,0xe2},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xe4,0x00,0x00,0x10,0x00,0x10,0x80,0xe5},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xe8,0x00,0x00,0x10,0x40,0x0e,0x80,0xe2},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xec,0x00,0x00,0x10,0x04,0x10,0x90,0xe5},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xf0,0x00,0x00,0x10,0x40,0x0e,0x40,0xe2},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xf4,0x00,0x00,0x10,0x04,0x10,0x80,0xe5},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xf8,0x00,0x00,0x10,0xb9,0x1b,0xa0,0xe3},
{0x01,0x02,0xFD,0x0A,0x00,0x01,0xfc,0x00,0x00,0x10,0xc9,0xff,0x81,0xe2},

{0x01,0x02,0xFD,0x0A,0x00,0x01,0x08,0x00,0x18,0x40,0xfc,0xe6,0x02,0x00},//patch
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x28,0x00,0x18,0x40,0xc0,0x00,0x00,0x10},//patch

//patch for power control
//{0x01,0x02,0xFD,0x0A,0x00,0x01,0xb0,0x9d,0x00,0x10,0x07,0x00,0xd2,0xe3},//patch
//{0x01,0x02,0xFD,0x0A,0x00,0x01,0x10,0x00,0x18,0x40,0x78,0x75,0x00,0x00},//patch
//{0x01,0x02,0xFD,0x0A,0x00,0x01,0x30,0x00,0x18,0x40,0xb0,0x9d,0x00,0x10},//patch
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x18,0x40,0x07,0x00,0x00,0x00},//patch
};


kal_uint8 rda5868_n4010_patch_2[][14] = 
{

//patch for power control
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x04,0x00,0x18,0x40,0xb4,0x73,0x00,0x00},//patch
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x24,0x00,0x18,0x40,0xf4,0xee,0x00,0x00},//patch
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x18,0x40,0x01,0x00,0x00,0x00}//patch
#ifdef __RDA_SHARE_CRYSTAL__
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x30,0x00,0x00,0x10,0x0a,0x21,0x00,0x00},//pskey open share crystal
#ifdef __DISABLE_SYNC_WITHGSM__
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x1C,0x00,0x24,0x40,0x55,0x81,0x40,0x00},//clock req
#else
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x1C,0x00,0x24,0x40,0x55,0xe1,0x40,0x00},//clock req
#endif
{0x01,0x02,0xFD,0x0A,0x00,0x01,0x00,0x00,0x00,0x10,0x00,0x10,0x00,0x00},//pskey flag
#endif
};

void rda5868_dut_rf_write(void)
{
   kal_uint8 i;
   kal_uint16 num_send;	
   for(i=0;i<sizeof(rda5868_dut_rf)/sizeof(rda5868_dut_rf[0]);i++)
   {
      rda5868_uart_tx(rda5868_dut_rf[i],sizeof(rda5868_dut_rf[i]),&num_send);
      RDABT_DELAY(5);
   }
}


void Rda5868_dut_cmu200_pskey_write(void)
{
   kal_uint8 i;
   kal_uint16 num_send;	
   for(i=0;i<sizeof(rda5868_dut_cmu200_pskey)/sizeof(rda5868_dut_cmu200_pskey[0]);i++)
   {
      rda5868_uart_tx(rda5868_dut_cmu200_pskey[i],sizeof(rda5868_dut_cmu200_pskey[i]),&num_send);
      RDABT_DELAY(5);
   }
}

void Rda5868_dut_tc3000_pskey_write(void)
{
   kal_uint8 i;
   kal_uint16 num_send;	
   for(i=0;i<sizeof(rda5868_dut_tc3000_pskey)/sizeof(rda5868_dut_tc3000_pskey[0]);i++)
   {
      rda5868_uart_tx(rda5868_dut_tc3000_pskey[i],sizeof(rda5868_dut_tc3000_pskey[i]),&num_send);
      RDABT_DELAY(5);
   }
}


void Rda5868_dut_n4010_pskey_write(void)
{
   kal_uint8 i;
   kal_uint16 num_send;	
   for(i=0;i<sizeof(rda5868_dut_n4010_pskey)/sizeof(rda5868_dut_n4010_pskey[0]);i++)
   {
      rda5868_uart_tx(rda5868_dut_n4010_pskey[i],sizeof(rda5868_dut_n4010_pskey[i]),&num_send);
      RDABT_DELAY(5);


   }
}

void Rda5868_dut_n4010_patch_write(void)
{
   kal_uint8 i;
   kal_uint16 num_send;	
   for(i=0;i<sizeof(rda5868_n4010_patch)/sizeof(rda5868_n4010_patch[0]);i++)
   {
      rda5868_uart_tx(rda5868_n4010_patch[i],sizeof(rda5868_n4010_patch[i]),&num_send);
      RDABT_DELAY(5);
   }
}

void Rda5868_dut_n4010_patch_write_2(void)
{
   kal_uint8 i;
   kal_uint16 num_send;	
   for(i=0;i<sizeof(rda5868_n4010_patch_2)/sizeof(rda5868_n4010_patch_2[0]);i++)
   {
      rda5868_uart_tx(rda5868_n4010_patch_2[i],sizeof(rda5868_n4010_patch_2[i]),&num_send);
      RDABT_DELAY(5);
   }
}

void Rda5868_vco_test_Write()
{
   kal_uint8 i;
   kal_uint16 num_send;	

   for(i=0;i<sizeof(rda5868_vco_test)/sizeof(rda5868_vco_test[0]);i++)
   {
      rda5868_uart_tx(rda5868_vco_test[i],sizeof(rda5868_vco_test[i]),&num_send);
      RDABT_DELAY(1);
   }
}

void Rda5868_rf_bbtest_Write()
{
      kal_uint16 num_send;	
      rda5868_uart_tx(rda5868_rf_bbtest,sizeof(rda5868_rf_bbtest),&num_send);
      RDABT_DELAY(1);
}

void Rda5868_rf_singlehop_Write()
{
      kal_uint16 num_send;	
      rda5868_uart_tx(rda5868_rf_singlehop,sizeof(rda5868_rf_singlehop),&num_send);
      RDABT_DELAY(1);
      rda5868_uart_tx(rda5868_rf_inquiry,sizeof(rda5868_rf_inquiry),&num_send);
      RDABT_DELAY(1);	  
}

void RDA5868_enable_dut_write(void)
{
      kal_uint16 num_send;
      rda5868_uart_tx(rda5868_enable_allscan,sizeof(rda5868_enable_allscan),&num_send);
      RDABT_DELAY(5);
      rda5868_uart_tx(rda5868_autoaccept_connect,sizeof(rda5868_autoaccept_connect),&num_send);
      RDABT_DELAY(5);	  	  
      rda5868_uart_tx(rda5868_enable_dut,sizeof(rda5868_enable_dut),&num_send);
      RDABT_DELAY(5);
}


#ifdef __RDA5868_USE_IIC__	
void  RDA5400_vco_test(void)
{
	unsigned char i=0;
	for(i =0;i<sizeof(rda5400_vco_test)/sizeof(rda5400_vco_test[0]); i++){
		rda5400_write_data(rda5400_vco_test[i][0],&rda5400_vco_test[i][1],1);		
	}	
	RDABT_DELAY(5);  
}
#endif


void rda_bt_uart_init(void)
{
   GPIO_InitIO(1, RDA5868_UART_RXD);					// set direction (output)
   GPIO_ModeSetup( RDA5868_UART_RXD,0);				// set to gpio mode
   GPIO_WriteIO(0, RDA5868_UART_RXD);				// set ouput low

   GPIO_InitIO(1, RDA5868_UART_TXD);					// set direction (output)
   GPIO_ModeSetup(RDA5868_UART_TXD,0);				// set to gpio mode
   GPIO_WriteIO(0, RDA5868_UART_TXD);				// set ouput low
   RDABT_DELAY(1);  
   GPIO_ModeSetup(RDA5868_UART_RXD,1);				// set ouput low
   GPIO_ModeSetup( RDA5868_UART_TXD,1);				// set ouput low
   rda5868_uart_start();
   rda5868_uart_configure(115200);
}


void rdabt_test_rf_init(void)
{

#ifdef __RDA_AUTO_CHIP__
    rda5868_dut_rf_write();  
#else

#ifdef __RDA_CHIP_R5__

#ifndef __RDA5868_USE_IIC__
    Rda5868_rf_Write();
#endif
    RDABT_DELAY(5);  
    rda5868_dut_rf_write();  	
#endif/////__RDA_CHIP_R5__


#ifdef __RDA_CHIP_R7__
#ifndef __RDA5868_USE_IIC__
    Rda5868_rf_Write_2();
#endif
    RDABT_DELAY(5);  
    rda5868_dut_rf_write();  
#endif//////__RDA_CHIP_R7__


#endif	
}

#ifdef __RDA_CHIP_R7__

void rdabt_test_rf_init_2(void)
{
    rda5868_dut_rf_write();  
}

#endif


void rda_bt_poweroff_for_test(void)
{
   GPIO_WriteIO(0,RDA5868_POWER_EN);    
   GPIO_WriteIO(0,RDA5868_RESET);   
   rda5868_uart_stop();

}


kal_uint8 rda_bt_poweron_for_test(void)
{

   GPIO_ModeSetup(RDA5868_POWER_EN,0);
   GPIO_InitIO(1,RDA5868_POWER_EN);
   GPIO_WriteIO(1,RDA5868_POWER_EN);    
   RDABT_DELAY(4);   
   GPIO_ModeSetup(RDA5868_RESET,0);
   GPIO_InitIO(1,RDA5868_RESET);
   GPIO_WriteIO(1,RDA5868_RESET);   
   RDABT_DELAY(20);
   RDA_bt_Power_On_Reset();
   RDABT_DELAY(70);        
   rda_bt_uart_init();
#ifdef __RDA5868_USE_IIC__
	RDA_bt_SerialCommInit(); 

#ifdef __RDA_AUTO_CHIP__
	rdabt_chip_sel = rdabt_get_chipid();
kal_prompt_trace(0,"rdabt_chip_sel =%d",rdabt_chip_sel);
	if(rdabt_chip_sel == RDA_5868_R7){
		RDA5400_Intialization_2();
              rdabt_test_rf_init_2();
	}
	else if(rdabt_chip_sel == RDA_5868_R5){
		RDA5400_Intialization(); 		
 		rdabt_test_rf_init();		
	}
	else
		ASSERT(0);	
#else///__RDA_AUTO_CHIP__

#ifdef __RDA_CHIP_R7__
	RDA5400_Intialization_2();
       rdabt_test_rf_init_2();
#endif///__RDA_CHIP_R7__

#ifdef __RDA_CHIP_R5__
	RDA5400_Intialization();		
       rdabt_test_rf_init();

#endif///__RDA_CHIP_R5__

#endif///__RDA_AUTO_CHIP__

#else///__RDA5868_USE_IIC__

#ifdef __RDA_CHIP_R7__
	Rda5868_rf_Write_2();	
       rdabt_test_rf_init_2();
#endif///__RDA_CHIP_R7__

#ifdef __RDA_CHIP_R5__
	Rda5868_rf_Write();
       rdabt_test_rf_init();
#endif///__RDA_CHIP_R5__

#endif////__RDA5868_USE_IIC__
   

   RDA_bt_Power_On_Reset();
   RDABT_DELAY(70);     
	return 1;

}




void RDA5868_send_bbtest(bt_engineer_mode_txrx_test_req_struct *bb_para)
{
#if 0
    rda5868_rf_bbtest[4] = bb_para->channel_hopping;
    rda5868_rf_bbtest[8] = bb_para->packet_type;
    rda5868_rf_bbtest[26] = (unsigned char)(bb_para->packet_length& 0xFF);
    rda5868_rf_bbtest[27] = (unsigned char)((bb_para->packet_length & 0xFF00) >> 8);
#endif
    Rda5868_rf_bbtest_Write();    
}



void RDA5868_send_bbtest_singlehop_inquiry(void)
{
   Rda5868_rf_singlehop_Write();
}


void RDA5868_send_vco_test(void)
{
#ifdef __RDA5868_USE_IIC__	
   RDA_bt_SerialCommInit();	
   RDABT_DELAY(1);  
   RDA5400_vco_test(); 
#endif    
   RDABT_DELAY(1);  
   Rda5868_vco_test_Write();
}



void RDA_bt_send_cmu200_enable_dut(void)
{
    RDA5868_enable_dut_write();
    Rda5868_dut_cmu200_pskey_write();
}


void RDA_bt_send_tc3000_enable_dut(void)
{
    RDA5868_enable_dut_write();
    Rda5868_dut_tc3000_pskey_write();
}


void RDA_bt_send_n4010_enable_dut(void)
{

    RDA5868_enable_dut_write();
    Rda5868_dut_n4010_pskey_write();
#ifdef __RDA_AUTO_CHIP__
	if(rdabt_chip_sel == RDA_5868_R5)
		Rda5868_dut_n4010_patch_write();
	else if(rdabt_chip_sel == RDA_5868_R7)
              Rda5868_dut_n4010_patch_write_2();	
#else

#ifdef __RDA_CHIP_R7__
	Rda5868_dut_n4010_patch_write_2();
#endif

#ifdef __RDA_CHIP_R5__
    Rda5868_dut_n4010_patch_write();
#endif
#endif
	
}




#endif
