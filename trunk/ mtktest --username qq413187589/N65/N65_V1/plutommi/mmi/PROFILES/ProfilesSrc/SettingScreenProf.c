/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE.
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/

/*****************************************************************************
 *
 * Filename:
 * ---------
 * SettingScreenProf.c
 *
 * Project:
 * --------
 *   MAUI
 *
 * Description:
 * ------------
 *   This file is intends for Screens for Profiles application
 *
 * Author:
 * -------
 * -------
 *
 *============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 *
 * removed!
 * removed!
 *
 *
 * removed!
 * removed!
 *
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *============================================================================
 ****************************************************************************/

/**
 * Copyright Notice
 * ?2002 - 2003, Pixtel Communications, Inc., 1489 43rd Ave. W.,
 * Vancouver, B.C. V6M 4K8 Canada. All Rights Reserved.
 *  (It is illegal to remove this copyright notice from this software or any
 *  portion of it)
 */
/***************** Settings Application implementation *********************/

/**************************************************************

   FILENAME : SettingScreenProf.c

   PURPOSE     : Screens for Profiles application

   REMARKS     : nil

   AUTHOR      : Ashima Bajaj,Deepali Gupta

   DATE     : 5/5/2003

**************************************************************/
#include "MMI_include.h"

#include "MainMenuDef.h"
#include "settingdefs.h"
#include "settingprot.h"
#include "Profiles_prot.h"
#include "HardwareEvents.h"
#include "Thrdosinterface.h"
#include "OSThreadInterfaceGprot.h"
#include "settinggprots.h"
#include "ProtocolEvents.h"
#include "SettingProfile.h"
#include "UserProfilesResDef.h"
#include "ProfilesGdcl.h"
#include "ProfileGprots.h"
#include "GpioInc.h"
#include "VolumeHandler.h"
#include "wgui_status_icons.h"
#include "DownloadProtos.h"
#include "CommonScreens.h"
#include "IdleAppProt.h"
#include "IdleAppDef.h"
#include "ATHandlerProt.h"
#include "USBDeviceGprot.h"
#include "ExtDeviceDefs.h"
#include "ProfilesDefs.h"

/* Leo add for DLT */
/* Leo end */

#ifdef __MMI_PROFILE_EXTMELODY_SUPPORT__
#include "FileMgr.h"
#include "FileManagerDef.h"
#include "Conversions.h"
#include "ProfileMgr.h" /* Profile Magager General Include file */
#include "ProfileMgrGProt.h"    /* Profile Magager Extern Include file */
#endif /* __MMI_PROFILE_EXTMELODY_SUPPORT__ */ 
#include "phonebookdef.h"

#include "mdi_datatype.h"
#include "mdi_audio.h"
#include "CallManagementGprot.h"

#ifdef __DRM_SUPPORT__
#include "FileMgr.h"
#include "Drm_gprot.h"
#endif /* __DRM_SUPPORT__ */ 

#include "custom_equipment.h"

#if defined(__EM_MODE__) && defined (__MMI_ENGINEER_MODE__)
#include "EngineerModeDef.h"
#include "EngineerModeTracer.h"
#endif /* defined(__EM_MODE__) && defined (__MMI_ENGINEER_MODE__) */

/* Leo add for DLT */
#include "MMIThemes.h"  /* ritesh */
/* Leo end */
/* PMT SUKRIT START 20051226 */
#ifdef __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__
#include "MessagesExDcl.h"
S32 default_value_ring_volume;
S32 default_value_keypad_volume;
S32 is_level_select_menuitem_displayed_in_volume_screen = 1;
S32 default_value_ring_volume;
S32 default_value_keypad_volume;
S32 ring_volume_index = -1;
S32 keypad_volume_index = -1;
#endif /* __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__ */ 
/* PMT SUKRIT END 20051226 */
void (*gfnprofilelsk) (void);
void (*gfnprofilersk) (void);

extern void EntryScrSetKeyPadVolumeLevel(void);
extern void GetRingToneRange(U8 *startId, U8 *totalId);
extern void GetMidiRange(U8 *startId, U8 *totalId);
extern void GetToneRange(U8 *startId, U8 *totalId);
extern S32 volume_level_UI;

#ifdef __MMI_PROFILE_EXTMELODY_SUPPORT__
static PRFSET_MELODY_CONF_TYPE prfset_conf_type = 0;
static U8 g_ext_melody_idx = 0;
static U8 extMldHlitItem = 0;
#endif /* __MMI_PROFILE_EXTMELODY_SUPPORT__ */ 

#if defined(__MMI_PHB_CALLER_RES_SETTING__)
extern void mmi_phb_caller_ring_forward_to_entry(U16 ringToneId);
#endif 

#ifdef __MMI_BT_PROFILE__
void mmi_profiles_bt_open_stream_callback(U8 profile, mdi_result result);
void mmi_profiles_bt_close_stream_callback(U8 profile, mdi_result result);
#endif /* __MMI_BT_PROFILE__*/

#ifdef __USB_IN_NORMAL_MODE__
extern pBOOL mmi_usb_is_in_mass_storage_mode(void);
extern void mmi_usb_app_unavailable_popup(U16 stringId);
#endif

static BOOL ring_tone_playing = FALSE;
static mmi_frm_kbd_tone_state_enum key_tone_state;

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_ring_tone_playing
 * DESCRIPTION
 *  set ring tone playing flag
 *  
 *  used for AudioPlayToneWithCallBackVolPath
 * PARAMETERS
 *  is_playing      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_ring_tone_playing(BOOL is_playing)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    ring_tone_playing = is_playing;
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_is_ring_tone_playing
 * DESCRIPTION
 *  check does ring tone is playing
 *  
 *  used for AudioPlayToneWithCallBackVolPath
 * PARAMETERS
 *  void
 * RETURNS
 * BOOL
 *****************************************************************************/
BOOL mmi_profiles_is_ring_tone_playing(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return ring_tone_playing;
}

#if defined(__DRM_SUPPORT__)


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_check_DRM_content_forwardable
 * DESCRIPTION
 *  check does the file is DRM prohibted to forward
 * PARAMETERS
 *  filename        [IN]        
 * RETURNS
 * BOOL
 *****************************************************************************/
BOOL mmi_profiles_check_DRM_content_forwardable(UI_string_type filename)
{

    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    FS_HANDLE handle;
    BOOL is_permitted = MMI_FALSE ;
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    handle = DRM_open_file((PU16)filename, FS_READ_ONLY, DRM_PERMISSION_PLAY);

    if (handle >= FS_NO_ERROR)
    {
        is_permitted = DRM_validate_forward_rule(handle, DRM_PERMISSION_PLAY);
        DRM_close_file(handle);
    }

    return is_permitted ;
#if 0
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif     

}
#endif /* defined(__DRM_SUPPORT__) */ 


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_is_device_profile
 * DESCRIPTION
 *  check does the selected or activated profile a device profile which can't be activated manually
 * PARAMETERS
 *  void
 *  BOOL(?)     [OUT]       
 * RETURNS
 *  void
 *****************************************************************************/
BOOL mmi_profiles_is_device_profile(void)
{
#ifdef __MMI_BT_PROFILE__
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if ((gprofileId == MMI_PROFILE_HEADSET) || (gprofileheadset == 1) || (gprofileId == MMI_PROFILE_BT) ||
        (gactivatedprofile == MMI_PROFILE_BT))
    {
        return TRUE;
    }
#else /* __MMI_BT_PROFILE__ */ 
    if ((gprofileId == MMI_PROFILE_HEADSET) || (gprofileheadset == 1))
    {
        return TRUE;
    }
#endif /* __MMI_BT_PROFILE__ */ 
    return FALSE;
}


/*****************************************************************************
 * FUNCTION
 *  InitProfileApp
 * DESCRIPTION
 *  Initialize Profile Application
 * PARAMETERS
 *  void
 *  S16(?)      [OUT]       
 * RETURNS
 *  void
 *****************************************************************************/
S16 InitProfileApp(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (gprofilenvram == 0)
    {
        initializeProfiles();
        ActivatefirstProfile();
    #ifndef USE_NVRAM_FOR_PROFILES
        gprofilenvram = 1 ;
    #endif
    }

    SetHiliteHandler(MAIN_MENU_PROFILES_GENERAL, mmi_profiles_hilite_hdlr_general_mode);
    SetHiliteHandler(MAIN_MENU_PROFILES_MEETING, mmi_profiles_hilite_hdlr_meeting_mode);
    SetHiliteHandler(MAIN_MENU_PROFILES_OUTDOOR, mmi_profiles_hilite_hdlr_outdoor_mode);
    SetHiliteHandler(MAIN_MENU_PROFILES_INDOOR, mmi_profiles_hilite_hdlr_indoor_mode);
    SetHiliteHandler(MAIN_MENU_PROFILES_HEADSET, mmi_profiles_hilite_hdlr_headset_mode);
#ifdef __MMI_BT_PROFILE__
    SetHiliteHandler(MAIN_MENU_PROFILES_BT, mmi_profiles_hilite_hdlr_bt_mode);
#endif 
#ifndef __MMI_PROF_MENU_ACTIVE_SHRINK__
    SetHiliteHandler(MENU_PROFILES_OPTIONS, mmi_profiles_hilite_hdlr_options);
    SetHiliteHandler(MENU_PROFILES_CUSTOMIZE, mmi_profiles_hilite_hdlr_customize);
#endif /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 

    SetHiliteHandler(MENU_PROFILES_ACTIVATE, mmi_profiles_hilite_hdlr_activate);
    SetHiliteHandler(MENU_VOLUME_LEVEL, mmi_profiles_hilite_hdlr_volume);
    SetHiliteHandler(MENU_MT_CALL_ALERT_TYPE, mmi_profiles_hilite_hdlr_alert_type);
    SetHiliteHandler(MENU_RING_TYPE, mmi_profiles_hilite_hdlr_ring_type);
    SetHiliteHandler(MENU_ANSEWRING_MODE, mmi_profiles_hilite_hdlr_answering_mode);
#if !defined(HARDWARE_LED_NOT_SUPPORT)
    SetHiliteHandler(MENU_LIGHT_STATUS, mmi_profiles_hilite_hdlr_status_LED);
#endif 
    SetHiliteHandler(MENU_TONE_SETUP, mmi_profiles_hilite_hdlr_tone_setup);
    SetHiliteHandler(MENU_TONE_SETUP_RING_TONE, mmi_profiles_hilite_hdlr_ring_tone);
#ifdef __MMI_DUAL_PROFILE_SUPPORT__
    SetHiliteHandler(MENU_TONE_SETUP_CARD2_RING_TONE, mmi_profiles_hilite_hdlr_card2_ring_tone);    
#endif    
#ifdef __MMI_VIDEO_TELEPHONY__    
    SetHiliteHandler(MENU_TONE_SETUP_VIDEO_CALL_RING_TONE, mmi_profiles_hilite_hldr_video_call_tone);
#endif
    SetHiliteHandler(MENU_TONE_SETUP_POWERON_TONE, mmi_profiles_hilite_hdlr_power_on_tone);
    SetHiliteHandler(MENU_TONE_SETUP_POWEROFF_TONE, mmi_profiles_hilite_hdlr_power_off_tone);
    /* MTK brian added to wrap cover open/close tone setup, 2003/10/18 */
#ifdef __MMI_CLAMSHELL__
    SetHiliteHandler(MENU_TONE_SETUP_COVEROPEN_TONE, HighlightProfilesCoverOpenToneSetup);
    SetHiliteHandler(MENU_TONE_SETUP_COVERCLOSE_TONE, HighlightProfilesCoverCloseToneSetup);
#endif /* __MMI_CLAMSHELL__ */ 
    /* MTK end */
    SetHiliteHandler(MENU_TONE_SETUP_MESSAGE_TONE, mmi_profiles_hilite_hdlr_message_tone);
#ifdef __MMI_DUAL_PROFILE_SUPPORT__
    SetHiliteHandler(MENU_TONE_SETUP_CARD2_MESSAGE_TONE, mmi_profiles_hilite_hdlr_card2_message_tone);
#endif
    SetHiliteHandler(MENU_TONE_SETUP_KEYPAD_TONE, mmi_profiles_hilite_hdlr_key_pad_tone_setup);
#ifndef __MMI_ALM_CUSTOMIZE_TONE__
    SetHiliteHandler(MENU_TONE_SETUP_ALARM_TONE, mmi_profiles_hilite_hdlr_alarm_tone);
#endif 
    SetHiliteHandler(MENU_EXTRA_TONE, mmi_profiles_hilite_hdlr_extra_tone);

    SetHiliteHandler(MENU_RING_VOLUME_LEVEL, mmi_profiles_hilite_hdlr_ring_tone_volume);
    SetHiliteHandler(MENU_KEYPAD_VOLUME_LEVEL, mmi_profiles_hilite_hdlr_key_tone_volume);

    SetHiliteHandler(MENU_RING, mmi_profiles_hilite_hdlr_alert_type_ring);
    SetHiliteHandler(MENU_VIBRATION_ONLY, mmi_profiles_hilite_hdlr_alert_type_vib_only);
    SetHiliteHandler(MENU_VIBRATION_AND_RING, mmi_profiles_hilite_hdlr_alert_type_vib_and_ring);
    SetHiliteHandler(MENU_VIBRATION_THEN_RING, mmi_profiles_hilite_hdlr_alert_type_vib_then_ring);
    SetHiliteHandler(MENU_SILENT, mmi_profiles_hilite_hdlr_alert_type_light_only);

    SetHiliteHandler(MENU_RING_TYPE_SINGLE, mmi_profiles_hilite_hdlr_ring_type_single);
    SetHiliteHandler(MENU_RING_TYPE_REPEAT, mmi_profiles_hilite_hdlr_ring_type_repeat);
    SetHiliteHandler(MENU_RING_TYPE_ASCENDING, mmi_profiles_hilite_hdlr_ring_type_ascending);

#ifdef __MMI_CONNECT_NOTICE__
    SetHiliteHandler(MENU_CONNECT_NOTICE, mmi_profiles_hilite_hdlr_connect_notice);
    SetHiliteHandler(MENU_NOTICE_NONE, mmi_profiles_hilite_hdlr_connect_notice_none);
    SetHiliteHandler(MENU_NOTICE_TONE_ONLY, mmi_profiles_hilite_hdlr_connect_notice_tone_only);
    SetHiliteHandler(MENU_NOTICE_VIB_ONLY, mmi_profiles_hilite_hdlr_connect_notice_vib_only);
    SetHiliteHandler(MENU_NOTICE_TONE_AND_VIB, mmi_profiles_hilite_hdlr_connect_notice_tone_and_vib);
#endif /* __MMI_CONNECT_NOTICE__ */ 

    SetHiliteHandler(MENU_KEYPAD_TONE_SILENT, mmi_profiles_hilite_hdlr_key_pad_silent);
    SetHiliteHandler(MENU_KEYPAD_TONE_CLICK, mmi_profiles_hilite_hdlr_key_pad_click);
    SetHiliteHandler(MENU_KEYPAD_TONE_TONE, mmi_profiles_hilite_hdlr_key_pad_tone);

#if defined(__MMI_HUMAN_VOICE_KEYPAD_TONE__)
    SetHiliteHandler(MENU_KEYPAD_TONE_HUMAN_VOICE_1, mmi_profiles_hilite_hdlr_key_pad_human1);
    SetHiliteHandler(MENU_KEYPAD_TONE_HUMAN_VOICE_2, mmi_profiles_hilite_hdlr_key_pad_human2);
    SetHiliteHandler(MENU_KEYPAD_TONE_HUMAN_VOICE_3, mmi_profiles_hilite_hdlr_key_pad_human3);
    SetHiliteHandler(MENU_KEYPAD_TONE_HUMAN_VOICE_4, mmi_profiles_hilite_hdlr_key_pad_human4);
    SetHiliteHandler(MENU_KEYPAD_TONE_HUMAN_VOICE_5, mmi_profiles_hilite_hdlr_key_pad_human5);
    SetHiliteHandler(MENU_KEYPAD_TONE_HUMAN_VOICE_6, mmi_profiles_hilite_hdlr_key_pad_human6);
#endif /* defined(__MMI_HUMAN_VOICE_KEYPAD_TONE__) */ 

#if defined(__MMI_CUST_KEYPAD_TONE__)
    SetHiliteHandler(MENU_KEYPAD_TONE_CUST_1, mmi_profiles_hilite_hdlr_key_pad_cust1);
    SetHiliteHandler(MENU_KEYPAD_TONE_CUST_2, mmi_profiles_hilite_hdlr_key_pad_cust2);
    SetHiliteHandler(MENU_KEYPAD_TONE_CUST_3, mmi_profiles_hilite_hdlr_key_pad_cust3);
    SetHiliteHandler(MENU_KEYPAD_TONE_CUST_4, mmi_profiles_hilite_hdlr_key_pad_cust4);
    SetHiliteHandler(MENU_KEYPAD_TONE_CUST_5, mmi_profiles_hilite_hdlr_key_pad_cust5);
    SetHiliteHandler(MENU_KEYPAD_TONE_CUST_6, mmi_profiles_hilite_hdlr_key_pad_cust6);
#endif /* defined(__MMI_CUST_KEYPAD_TONE__) */ 

#if defined(__MMI_INTELLIGENT_CALL_ALERT__)
    SetHiliteHandler(MENU_INTELLIGENT_CALL_ALERT, mmi_profiles_hilite_hdlr_intelligent_call_alert);
    SetHintHandler(MENU_INTELLIGENT_CALL_ALERT, mmi_profiles_hint_hdlr_intelligent_call_alert);
    SetHiliteHandler(MENU_INTELLIGENT_CALL_ALERT_ON, mmi_profiles_hilite_hdlr_intelligent_call_alert_on);
    SetHiliteHandler(MENU_INTELLIGENT_CALL_ALERT_OFF, mmi_profiles_hilite_hdlr_intelligent_call_alert_off);
#endif /* defined(__MMI_INTELLIGENT_CALL_ALERT__) */ 

    SetHintHandler(MENU_TONE_SETUP_RING_TONE, mmi_profiles_hint_hdlr_incoming_call);
#ifdef __MMI_DUAL_PROFILE_SUPPORT__
    SetHintHandler(MENU_TONE_SETUP_CARD2_RING_TONE, mmi_profiles_hint_hdlr_card2_incoming_call);
#endif
#ifdef __MMI_VIDEO_TELEPHONY__   
    SetHintHandler(MENU_TONE_SETUP_VIDEO_CALL_RING_TONE, mmi_profiles_hint_hdlr_video_call);
#endif
#ifndef __MMI_ALM_CUSTOMIZE_TONE__
    SetHintHandler(MENU_TONE_SETUP_ALARM_TONE, mmi_profiles_hint_hdlr_alarm_tone);
#endif 
    SetHintHandler(MENU_TONE_SETUP_POWERON_TONE, mmi_profiles_hint_hdlr_power_on_tone);
    SetHintHandler(MENU_TONE_SETUP_POWEROFF_TONE, mmi_profiles_hint_hdlr_power_off_tone);

    SetHintHandler(MENU_TONE_SETUP_MESSAGE_TONE, mmi_profiles_hint_hdlr_message_tone);
#ifdef __MMI_DUAL_PROFILE_SUPPORT__    
    SetHintHandler(MENU_TONE_SETUP_CARD2_MESSAGE_TONE, mmi_profiles_hint_hdlr_card2_message_tone);
#endif
    SetHintHandler(MENU_TONE_SETUP_KEYPAD_TONE, mmi_profiles_hint_hdlr_key_pad_tone);

    /* MTK brian added to wrap cover open/close tone setup, 2003/10/18 */
#ifdef __MMI_CLAMSHELL__
    SetHintHandler(MENU_TONE_SETUP_COVEROPEN_TONE, mmi_profiles_hint_hdlr_cover_open_tone);
    SetHintHandler(MENU_TONE_SETUP_COVERCLOSE_TONE, mmi_profiles_hint_hdlr_cover_close_tone);
#endif /* __MMI_CLAMSHELL__ */ 
    /* MTK end */
    SetHintHandler(MENU_MT_CALL_ALERT_TYPE, mmi_profiles_hint_hdlr_alert_type);
    SetHintHandler(MENU_RING_TYPE, mmi_profiles_hint_hdlr_ring_type);
#ifdef __MMI_CONNECT_NOTICE__
    SetHintHandler(MENU_CONNECT_NOTICE, mmi_profiles_hint_hdlr_connect_notice);
#endif 
    SetHintHandler(MENU_RING_VOLUME_LEVEL, mmi_profiles_hint_hdlr_ring_tone_volume);
    SetHintHandler(MENU_KEYPAD_VOLUME_LEVEL, mmi_profiles_hint_hdlr_key_tone_volume);
#if !defined(HARDWARE_LED_NOT_SUPPORT)
    SetHintHandler(MENU_LIGHT_STATUS, mmi_profiles_hint_hdlr_status_LED);
#endif 

#ifdef __MMI_BT_PROFILE__
#ifdef __MMI_HFP_SUPPORT__
        mdi_audio_bt_init(BT_HFP, mmi_profiles_bt_open_stream_callback, mmi_profiles_bt_close_stream_callback);
#endif 
#endif /* __MMI_BT_PROFILE__ */ 

    return 0;
}


/*****************************************************************************
 * FUNCTION
 *  initnvramprofapp
 * DESCRIPTION
 *  Initialize NVRAM for Profile
 * PARAMETERS
 *  void
 *  S16(?)      [OUT]       
 * RETURNS
 *  void
 *****************************************************************************/
void initnvramprofapp(void)
{
#ifdef USE_NVRAM_FOR_PROFILES
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S16 error;
    U16 j;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gprofilenvram = 1;

    j = 1;
    ReadRecord(
        NVRAM_EF_PROFILES_LID,
        j,
        &gprofiles[0],
        MAX_ELEMENTS * sizeof(PROFILE) /* NVRAM_PROFILES_RECORD_SIZE */ ,
        &error);
    ReadValue(NVRAM_PROFILES_ACTIVATED, &gactivatedprofile, DS_BYTE, &error);
    ReadValue(NVRAM_PROFILES_LASTACTIVATED, &glastactivatedprofile, DS_BYTE, &error);
#endif /* USE_NVRAM_FOR_PROFILES */
    if( mmi_gpio_is_earphone_plug_in() )
        mmi_profiles_headset_activate_profile();
    else
    {
        ActivateProfile();
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_main_screen
 * DESCRIPTION
 *  Entry function for main profile screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_main_screen(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[MAX_SUB_MENUS];    /* Stores the strings id of submenus returned */
    U8 *guiBuffer;                      /* Buffer holding history data */
    U16 gimagearray2[MAX_SUB_MENUS];    /* array for profilenames */
    U16 nDispAttribute;                 /* Stores display attribue */
    U8 i = 0, data = 0;
    U16 nNumofItem;                     /* Stores no of children in the submenu */
    U16 ItemIcons[MAX_SUB_MENUS];
    static U8 prev_data = 0;
    U16 menu_id = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    PRINT_INFORMATION("<<------- profile list ------->>");

    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_PROFILES, mmi_profiles_exit_main_screen, mmi_profiles_entry_main_screen, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(MAIN_MENU_PROFILES_MENUID);

    /* 5. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MAIN_MENU_PROFILES_MENUID);

    /* 6. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(MAIN_MENU_PROFILES_MENUID, nStrItemList);

    GetSequenceImageIds(MAIN_MENU_PROFILES_MENUID, ItemIcons);

    SetParentHandler(MAIN_MENU_PROFILES_MENUID);

    for (i = 0; i < nNumofItem; i++)
    {
        gimagearray2[i] = IMG_PROFILES_NO_IMAGE;
    }

    for (i = 0; i < nNumofItem; i++)
    {
        memset((S8*) subMenuDataPtrs[i], 0, MAX_SUB_MENU_SIZE);
        mmi_ucs2ncpy((S8*) subMenuDataPtrs[i], GetString(nStrItemList[i]), MAX_SUBMENU_CHARACTERS);
    }
/****** Get the index of activated profile menu ID*****/
    switch (gactivatedprofile)
    {
        case MMI_PROFILE_GENERAL:
            menu_id = MAIN_MENU_PROFILES_GENERAL;
            break;
        case MMI_PROFILE_MEETING:
            menu_id = MAIN_MENU_PROFILES_MEETING;
            break;
        case MMI_PROFILE_OUTDOOR:
            menu_id = MAIN_MENU_PROFILES_OUTDOOR;
            break;
        case MMI_PROFILE_INDOOR:
            menu_id = MAIN_MENU_PROFILES_INDOOR;
            break;
        case MMI_PROFILE_HEADSET:
            menu_id = MAIN_MENU_PROFILES_HEADSET;
            break;
        case MMI_PROFILE_SILENT:
            data = 0;
            break;
    #ifdef __MMI_BT_PROFILE__
        case MMI_PROFILE_BT:
            menu_id = MAIN_MENU_PROFILES_BT;
            break;
    #endif /* __MMI_BT_PROFILE__ */ 
        default:
            ASSERT(0);
    }

    /* If activated profile is silent then no profile should be seen as activated */
    if (gactivatedprofile != MMI_PROFILE_SILENT)
    {
        data = GetIndexOfStringId(MAIN_MENU_PROFILES_MENUID, menu_id);
        gimagearray2[data] = IMG_PROFILES_ACTIVATED;
    }

    /* ingore guiBuffer when previous activated profile is different thant current profile after back history */
    if (guiBuffer != NULL && prev_data != data)
    {
        guiBuffer = NULL;
    }
    prev_data = data;

    RegisterHighlightHandler(ExecuteCurrHiliteHandler);

    /* MTK Leo add, mini_tab_bar */
#ifdef __MMI_WGUI_MINI_TAB_BAR__
    wgui_enable_mini_tab_bar(MAIN_MENU_PROFILES_MENUID);
#endif 
    /* MTK Leo end */

    ShowCategory73Screen(
        STR_PROFILE_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OPTIONS,
        0,
        STR_GLOBAL_BACK,
        0,
        nNumofItem,
        (U8 **) subMenuDataPtrs,
        (U16*) gimagearray2,
        ItemIcons,
        (U16) data,
        guiBuffer,
        1);

    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_main_screen
 * DESCRIPTION
 *  Exit function for main profile screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_main_screen(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gprofileId = (U8) gcurrHiliteIndexOne;

    /* MTK Leo add, mini_tab_Bar */
#ifdef __MMI_WGUI_MINI_TAB_BAR__
    wgui_disable_mini_tab_bar();
#endif 
    /* MTK Leo end */
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_options
 * DESCRIPTION
 *  Entry function for Profiles Options
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_options(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[MAX_SUB_MENUS];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;                     /* Stores no of children in the submenu */
    U16 nDispAttribute;                 /* Stores display attribue */
    U8 *guiBuffer;                      /* Buffer holding history data */
    U8 *PopUpList[MAX_SUB_MENUS];
    S8 i = 0;
    U16 ParentId;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_PROFILES_OPTIONS, NULL, mmi_profiles_entry_options, NULL);

/****If headset is connected then options menu should show Customize only*******/
    if (mmi_profiles_is_device_profile())
    {
        ParentId = MENU_PROFILES_OPTIONS_CUSTOMIZE;
    }
    else
    {
        ParentId = MENU_PROFILES_OPTIONS;
    }

    /* 1 Set parent handler */
    SetParentHandler(ParentId);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_OPTIONS);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(ParentId);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(ParentId);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(ParentId, nStrItemList);

    for (i = 0; i < nNumofItem; i++)
    {
        PopUpList[i] = NULL;
    }

    RegisterHighlightHandler(ExecuteCurrHiliteHandler);

    /* 8 Display Category Screen */

    ShowCategory52Screen(
        STR_PROFILE_OPTION_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        nStrItemList,
        (PU16) gIndexIconsImageList,
        PopUpList,
        0,
        0,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_activate_profile
 * DESCRIPTION
 *  Activates the Highlighted profile
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_activate_profile(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S16 error = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* SetParentHandler(MENU_PROFILES_ACTIVATE); */

    gactivatedprofile = gprofileId;

    DisplayPopup(
        (PU8) GetString(STR_GENERAL_ACTIVATE_MESSAGE),
        IMG_GLOBAL_ACTIVATED,
        1,
        UI_POPUP_NOTIFYDURATION_TIME,
        SUCCESS_TONE);
    DeleteNHistory(1);

    WriteValue(NVRAM_PROFILES_ACTIVATED, &gactivatedprofile, DS_BYTE, &error);
    ActivateProfile();

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_activate_profile_by_id
 * DESCRIPTION
 *  Activates the profileId
 * PARAMETERS
 *  profileId       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_activate_profile_by_id(U8 profileId)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S8 str_activate[100];
    U16 msg_id = 0;
    S16 error = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    switch (profileId)
    {
        case MMI_PROFILE_GENERAL:
            msg_id = STR_PROFILES_GENERAL;
            break;
        case MMI_PROFILE_MEETING:
            msg_id = STR_PROFILES_MEETING;
            break;
        case MMI_PROFILE_OUTDOOR:
            msg_id = STR_PROFILES_OUTDOOR;
            break;
        case MMI_PROFILE_INDOOR:
            msg_id = STR_PROFILES_INDOOR;
            break;
        case MMI_PROFILE_HEADSET:
            msg_id = STR_PROFILES_HEADSET;
            break;
        case MMI_PROFILE_SILENT:
            msg_id = STR_PROFILES_SILENT;
            break;
    #ifdef __MMI_BT_PROFILE__
        case MMI_PROFILE_BT:
            msg_id = STR_PROFILES_BT;
            break;
    #endif /* __MMI_BT_PROFILE__ */ 
        default:
            MMI_ASSERT(0);
    }

    mmi_ucs2cpy(str_activate, GetString(msg_id));
    mmi_ucs2cat(str_activate, (S8*) L" ");
    mmi_ucs2cat(str_activate, GetString(STR_GENERAL_ACTIVATE_MESSAGE));

    gactivatedprofile = gprofileId = profileId;

    DisplayPopup((U8*) str_activate, IMG_GLOBAL_ACTIVATED, TRUE, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);

    WriteValue(NVRAM_PROFILES_ACTIVATED, &gactivatedprofile, DS_BYTE, &error);
    ActivateProfile();
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_customize
 * DESCRIPTION
 *  Entry function for customize screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_customize(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[MAX_SUB_MENUS];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;                     /* Stores no of children in the submenu */
    U16 nDispAttribute;                 /* Stores display attribue */
    U8 *guiBuffer;                      /* Buffer holding history data */
    U8 *PopUpList[MAX_SUB_MENUS];
    U16 Parentid;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    /* Shall leave the exit handler for AT command set vibrator mode */
    EntryNewScreen(SCR_PROFILES_CUSTOMIZE, mmi_profiles_exit_customize, NULL, NULL);

    /* chinese no font size */
    if (IsChineseSet())
    {
    #ifdef __MMI_PROF_MENU_ACTIVE_SHRINK__
        if (mmi_profiles_is_device_profile())
        {
            Parentid = MENU_PROFILES_CUSTOMIZE_CHINESE_DEVICE;
        }
        else
    #endif /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
            Parentid = MENU_PROFILES_CUSTOMIZE_CHINESE;
    }
    else
    {
    #ifdef __MMI_PROF_MENU_ACTIVE_SHRINK__
        if (mmi_profiles_is_device_profile())
        {
            Parentid = MENU_PROFILES_CUSTOMIZE_DEVICE;
        }
        else
    #endif /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
            Parentid = MENU_PROFILES_CUSTOMIZE;
    }

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_CUSTOMIZE);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(Parentid);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(Parentid);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(Parentid, nStrItemList);

    /* 6 Set current parent id */
    SetParentHandler(Parentid);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(ExecuteCurrHiliteHandler);

    ConstructHintsList(Parentid, PopUpList);

    ShowCategory52Screen(
        STR_PROFILE_CUSTOMIZE_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        nStrItemList,
        (PU16) gIndexIconsImageList,
        PopUpList,
        0,
        0,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_customize
 * DESCRIPTION
 *  Exit fucntino for Customize screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
/* Shall leave the exit handler for AT command set vibrator mode */
void mmi_profiles_exit_customize(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    history Scr;    /* Variable to hold the history data */
    S16 nHistory = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    Scr.scrnID = SCR_PROFILES_CUSTOMIZE;
    Scr.entryFuncPtr = mmi_profiles_entry_customize;
    mmi_ucs2cpy((S8*) Scr.inputBuffer, (S8*) & nHistory);
    GetCategoryHistory(Scr.guiBuffer);
    AddHistory(Scr);
}

//PMT NEERAJ START 20050825
//PMT SUKRIT START 20051226
#ifdef __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__
/* PMT SUKRIT END 20051226 */


/*****************************************************************************
 * FUNCTION
 *  ring_volume_set_default_value
 * DESCRIPTION
 *  This function returns the default value for ring volume
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void ring_volume_set_default_value(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (gprofiles[gprofileId].ringVolumeLevel > LEVEL7)
    {
        gprofiles[gprofileId].ringVolumeLevel = LEVEL7;
    }
    default_value_ring_volume = gprofiles[gprofileId].ringVolumeLevel;
}


/*****************************************************************************
 * FUNCTION
 *  ring_volume_two_line_menuitem_get_data_callback
 * DESCRIPTION
 *  This function is called when ring volume inline menuitem is displayed
 * PARAMETERS
 *  item_index      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
pBOOL ring_volume_two_line_menuitem_get_data_callback(S32 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (item_index > 6)
    {
        return 0;
    }
    default_value_ring_volume = item_index;
    SetRingVolumeLevel((MMI_VOLUME_LEVEL_ENUM) item_index);
    return 1;
}


/*****************************************************************************
 * FUNCTION
 *  ring_volume_two_line_menuitem_get_default_value_callback
 * DESCRIPTION
 *  This callback is called to get the default value for ring volume
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
S32 ring_volume_two_line_menuitem_get_default_value_callback(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return default_value_ring_volume;
}


/*****************************************************************************
 * FUNCTION
 *  ring_volume_line_menuitem_display_complete_callback
 * DESCRIPTION
 *  This callback is called to when the ring volume menuitem is unhighlighted
 * PARAMETERS
 *  item_index      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void ring_volume_line_menuitem_display_complete_callback(S32 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mdi_audio_stop_all();   /* use stop all because it might be play file or play id */
    gprofiles[gprofileId].ringVolumeLevel = (U8) item_index;
    SetRingVolumeLevel((MMI_VOLUME_LEVEL_ENUM) item_index);
}


/*****************************************************************************
 * FUNCTION
 *  keypad_volume_set_default_value
 * DESCRIPTION
 *  This function returns the drfault value for key volume
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void keypad_volume_set_default_value(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (gprofiles[gprofileId].keypadVolumeLevel > LEVEL7)
    {
        gprofiles[gprofileId].keypadVolumeLevel = LEVEL7;
    }
    default_value_keypad_volume = gprofiles[gprofileId].keypadVolumeLevel;
}


/*****************************************************************************
 * FUNCTION
 *  keypad_volume_two_line_menuitem_get_data_callback
 * DESCRIPTION
 *  This function is called when keypad volume inline menuitem is displayed
 * PARAMETERS
 *  item_index      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
pBOOL keypad_volume_two_line_menuitem_get_data_callback(S32 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (item_index > 6)
    {
        return 0;
    }
    default_value_keypad_volume = item_index;
    SetKeypadVolumeLevel((MMI_VOLUME_LEVEL_ENUM) item_index);
    if (!IsSilentModeActivated())
#ifdef __MMI_SILENT_MEETING_PROFILE__
        if (!IsMeetingModeActivated())
#endif 
        {
            if (gprofiles[gprofileId].toneSetup.keypadTone == KEYPAD_CLICK)
            {
                AudioPlayReq(TONE_KEY_CLICK, DEVICE_AUDIO_PLAY_ONCE);
            }
            else if (gprofiles[gprofileId].toneSetup.keypadTone != KEYPAD_SILENT)
            {
                AudioPlayReq(TONE_KEY_NORMAL, DEVICE_AUDIO_PLAY_ONCE);
            }
        }
    return 1;
}


/*****************************************************************************
 * FUNCTION
 *  keypad_volume_two_line_menuitem_get_default_value_callback
 * DESCRIPTION
 *  This callback is called to get the default keypad volume
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
S32 keypad_volume_two_line_menuitem_get_default_value_callback(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return default_value_keypad_volume;
}


/*****************************************************************************
 * FUNCTION
 *  keypad_volume_line_menuitem_display_complete_callback
 * DESCRIPTION
 *  This callback is called when keypad volume menuitem is unhighlighted
 * PARAMETERS
 *  item_index      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void keypad_volume_line_menuitem_display_complete_callback(S32 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gprofiles[gprofileId].keypadVolumeLevel = (U8) item_index;
    AudioStopReq(gprofiles[gprofileId].toneSetup.keypadTone);
    SetKeypadVolumeLevel((MMI_VOLUME_LEVEL_ENUM) item_index);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_volume_type
 * DESCRIPTION
 *  Exit fucntion for Volume Type 
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_volume_type(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    is_level_select_menuitem_displayed_in_volume_screen = 0;
    if (mmi_profiles_is_ring_tone_playing())
    {
        mdi_audio_stop_all();   /* use stop all because it might be play file or play id */
    }
}


/*****************************************************************************
 * FUNCTION
 *  ContinueRingTone_TwoLine
 * DESCRIPTION
 *  Continue Ring tone after message received on ring tone volume two line screen.
 * PARAMETERS
 *  info        [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void ContinueRingTone_TwoLine(void *info)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetRingerVolume(default_value_ring_volume);
    if (!IsSilentModeActivated())
#ifdef __MMI_SILENT_MEETING_PROFILE__
        if (!IsMeetingModeActivated())
#endif 
        {
            AudioPlayToneWithCallBackVolPath(
                gstartMidiId,
                REPEAT,
                INCOMING_CALL_TONE,
                (U8) default_value_ring_volume,
                MDI_DEVICE_SPEAKER2);
            mmi_profiles_set_ring_tone_playing(TRUE);
        }
}


/*****************************************************************************
 * FUNCTION
 *  set_current_volume_level
 * DESCRIPTION
 *  This function is to set the current volume level.
 * PARAMETERS
 *  void
 *  Input: None(?)
 * RETURNS
 *  void
 *****************************************************************************/
void set_current_volume_level()
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    default_value_ring_volume = gprofiles[gprofileId].ringVolumeLevel;
    default_value_keypad_volume = gprofiles[gprofileId].keypadVolumeLevel;
}


/*****************************************************************************
 * FUNCTION
 *  ring_volume_two_line_menuitem_complete_callback
 * DESCRIPTION
 *  This function is called when ring volume menuitem is unhighlighted
 * PARAMETERS
 *  menuitem_index      [IN]        Menuitem index
 *  selected_index      [IN]        Inline item index
 * RETURNS
 *  void
 *****************************************************************************/
void ring_volume_two_line_menuitem_complete_callback(S32 menuitem_index, S32 selected_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mdi_audio_stop_all();
}


/*****************************************************************************
 * FUNCTION
 *  ring_volume_two_line_menuitem_set_data
 * DESCRIPTION
 *  This function is used to set the ring volume
 * PARAMETERS
 *  item_index      [IN]        Inline item index
 * RETURNS
 *  pBOOL
 *****************************************************************************/
pBOOL ring_volume_two_line_menuitem_set_data(S32 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (item_index > LEVEL7)
    {
        return 0;
    }
    SetRingVolumeLevel((MMI_VOLUME_LEVEL_ENUM) item_index);
    default_value_ring_volume = item_index;
    return 1;
}


/*****************************************************************************
 * FUNCTION
 *  keypad_volume_two_line_menuitem_set_data
 * DESCRIPTION
 *  This function is used to set the keypad ring volume
 * PARAMETERS
 *  item_index      [IN]        Inline item index
 * RETURNS
 *  pBOOL
 *****************************************************************************/
pBOOL keypad_volume_two_line_menuitem_set_data(S32 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (item_index > LEVEL7)
    {
        return 0;
    }
    default_value_keypad_volume = item_index;
    SetKeypadVolumeLevel((MMI_VOLUME_LEVEL_ENUM) item_index);
    if (gcurrentprofile.toneSetup.keypadTone == KEYPAD_SILENT)
    {
        if (gprofiles[gprofileId].toneSetup.keypadTone == KEYPAD_CLICK)
        {
            AudioPlayReq(TONE_KEY_CLICK, DEVICE_AUDIO_PLAY_ONCE);
        }
        else
        {
            AudioPlayReq(TONE_KEY_NORMAL, DEVICE_AUDIO_PLAY_ONCE);
        }
    }
    return 1;
}


/*****************************************************************************
 * FUNCTION
 *  mmi_get_volume_display_style
 * DESCRIPTION
 *  This function returns the display style of the volume
 * PARAMETERS
 *  index       [IN]        Menu item index
 * RETURNS
 *  U8
 *****************************************************************************/
U8 mmi_get_volume_display_style(S32 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    ring_volume_index = GetChildMenuIDIndexByParentMenuID(MENU_VOLUME_LEVEL, MENU_RING_VOLUME_LEVEL);
    keypad_volume_index = GetChildMenuIDIndexByParentMenuID(MENU_VOLUME_LEVEL, MENU_KEYPAD_VOLUME_LEVEL);

    if (index == ring_volume_index || index == keypad_volume_index)
    {
        return TWO_LINE_MENUITEM_STYLE_DISPLAY_LEVEL_SELECT;
    }
    else
    {
        return 0;
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_volume_get_default_value
 * DESCRIPTION
 *  This function returns the default volume level
 * PARAMETERS
 *  menuitem_index      [IN]        Menu item index
 * RETURNS
 *  S32
 *****************************************************************************/
S32 mmi_volume_get_default_value(S32 menuitem_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (menuitem_index == ring_volume_index)
    {
        return default_value_ring_volume;
    }
    else if (menuitem_index == keypad_volume_index)
    {
        return default_value_keypad_volume;
    }
    else
    {
        return NULL;
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_volume_get_and_set_level_select_data
 * DESCRIPTION
 *  This function sets the volume data for the menu item
 * PARAMETERS
 *  menuitem_index      [IN]        Menu item index
 *  item_index          [IN]        Inline item index
 * RETURNS
 *  pBOOL
 *****************************************************************************/
pBOOL mmi_volume_get_and_set_level_select_data(S32 menuitem_index, S32 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (menuitem_index == ring_volume_index)
    {
        if (ring_volume_two_line_menuitem_set_data(item_index))
        {
            return 1;
        }
        else
        {
            return 0;
        }
    }
    else if (menuitem_index == keypad_volume_index)
    {
        if (keypad_volume_two_line_menuitem_set_data(item_index))
        {
            return 1;
        }
        else
        {
            return 0;
        }
    }
    else
    {
        return 0;
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_volume_get_menuitem_properties
 * DESCRIPTION
 *  This function sets the properties of volume menuitems
 * PARAMETERS
 *  index                           [IN]        Menuitem index
 *  current_menuitem_properties     [?]         
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_volume_get_menuitem_properties(int index, wgui_two_line_menuitem_struct *current_menuitem_properties)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (index == ring_volume_index)
    {
        current_menuitem_properties->num_of_items = 7;
        current_menuitem_properties->image_flags = UI_TWO_LINE_MENUITEM_NO_THUMBNAIL;
        current_menuitem_properties->defualt_value_callback = mmi_volume_get_default_value;
        current_menuitem_properties->complete_callback = ring_volume_two_line_menuitem_complete_callback;
        current_menuitem_properties->two_line_data_callback.get_data_for_level_select =
            mmi_volume_get_and_set_level_select_data;
    }
    else if (index == keypad_volume_index)
    {
        current_menuitem_properties->num_of_items = 7;
        current_menuitem_properties->image_flags = UI_TWO_LINE_MENUITEM_NO_THUMBNAIL;
        current_menuitem_properties->defualt_value_callback = mmi_volume_get_default_value;
        current_menuitem_properties->complete_callback = NULL;
        current_menuitem_properties->two_line_data_callback.get_data_for_level_select =
            mmi_volume_get_and_set_level_select_data;
    }
}
#endif /* __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__ */ 
/* PMT SUKRIT END 20051226 */


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_volume_type
 * DESCRIPTION
 *  Entry function for Volume type
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_volume_type(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[MAX_SUB_MENUS];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;                     /* Stores no of children in the submenu */
    U16 nDispAttribute;                 /* Stores display attribue */
    U8 *guiBuffer;                      /* Buffer holding history data */
    U8 *PopUpList[MAX_SUB_MENUS];

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    if( gprofileId == MMI_PROFILE_SILENT )
    {
        DisplayPopup((U8*) GetString(STR_SILENT_ACTIVATE_MESSAGE), IMG_GLOBAL_ERROR, 0, 1000, (U8) ERROR_TONE);
        return;
    }

    /* PMT SUKRIT START 20051226 */
#ifdef __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__
    /* PMT SUKRIT END 20051226 */
    is_level_select_menuitem_displayed_in_volume_screen = 1;
    EntryNewScreen(SCR_PROFILES_VOLUME_LEVEL, mmi_profiles_exit_volume_type, mmi_profiles_entry_volume_type, NULL);
#else /* __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__ */ 
    /* PMT NEERAJ END 20050825 */
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_PROFILES_VOLUME_LEVEL, NULL, mmi_profiles_entry_volume_type, NULL);
    /* PMT NEERAJ START 20050825 */
#endif /* __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__ */ 

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_VOLUME_LEVEL);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(MENU_VOLUME_LEVEL);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_VOLUME_LEVEL);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(MENU_VOLUME_LEVEL, nStrItemList);

    /* 6 Set current parent id */
    SetParentHandler(MENU_VOLUME_LEVEL);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(ExecuteCurrHiliteHandler);

    ConstructHintsList(MENU_VOLUME_LEVEL, PopUpList);

    /* PMT SUKRIT START 20051226 */
#ifdef __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__
    wgui_set_pfn_to_get_display_style(mmi_get_volume_display_style);
    wgui_set_pfn_to_get_current_menu_item_properties(mmi_volume_get_menuitem_properties);
    if (!guiBuffer)
    {
        set_current_volume_level();
    }
#endif /* __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__ */ 
    /* PMT SUKRIT END 20051226 */
    ShowCategory52Screen(
        STR_VOLUME_LEVEL_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        nStrItemList,
        (PU16) gIndexIconsImageList,
        PopUpList,
        0,
        0,
        guiBuffer);

}


/*****************************************************************************
 * FUNCTION
 *  EntryScrProfilesCommonVolumeLevel1
 * DESCRIPTION
 *  Does all settings before entering into the entry fn of volume screen.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void EntryScrProfilesCommonVolumeLevel1(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    switch (gcommonvolumehandler)
    {
        case 0:
            gcommonvolumelevel = gprofiles[gprofileId].ringVolumeLevel;

            break;
        case 1:
            gcommonvolumelevel = gprofiles[gprofileId].keypadVolumeLevel;
            break;
    }
    EntryScrProfilesCommonVolumeLevel();
}

/* MTK Brian added for play ring tone after MT message, 2003/11/10 */


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_continue_volume_ring_tone
 * DESCRIPTION
 *  Continue Ring tone after finish ind received on ring tone volume screen.
 * PARAMETERS
 *  info        [IN]     
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_continue_volume_ring_tone(void *info)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetRingerVolume(gcommonvolumelevel);
    if (!IsSilentModeActivated())
#ifdef __MMI_SILENT_MEETING_PROFILE__
        if (!IsMeetingModeActivated())
#endif 
        {
            AudioPlayToneWithCallBackVolPath(
                gstartMidiId,
                REPEAT,
                INCOMING_CALL_TONE,
                (U8) gcommonvolumelevel,
                MDI_DEVICE_SPEAKER2);
            mmi_profiles_set_ring_tone_playing(TRUE);
        }
}


/*****************************************************************************
 * FUNCTION
 *  EntryScrProfilesCommonVolumeLevel
 * DESCRIPTION
 *  Set all Voulem screen handler functions and call the general entry screen of volume level.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void EntryScrProfilesCommonVolumeLevel(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    VOLUMEHANDLER_TYPE type;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* ExecuteCurrExitHandler(); */
    EntryNewScreen(SCR_PROFILES_COMMON_VOLUME_LEVEL, NULL, NULL, NULL);

    switch (gcommonvolumehandler)
    {
        case 0:
            mdi_audio_suspend_background_play();    /* stop all because it might be play file or play id */
            SetRingerVolume(gcommonvolumelevel);
            type = VOLUMEHANDLER_RING_TONE;
/*** Set all function handlers volume level screen *****/
            SetVolumeKeyHandlerFunctions(
                mmi_profiles_vol_inc_dec_play_keypad_tone,
                mmi_profiles_vol_inc_dec_play_keypad_tone,
                NULL,
                NULL,
                STR_COMMON_VOLUME_LEVEL_RING_CAPTION,
                &gcommonvolumelevel,
                STR_GLOBAL_OK,
                STR_GLOBAL_BACK,
                mmi_profiles_entry_volume_level_hdlr,
                GoBackHistory,//GoBackCommonVolume,
                0,
                ExitScrProfilesCommonVolumeLevel,
                1,
                type);
            EntryScrSetKeyPadVolumeLevel();
            if (!IsSilentModeActivated())
    #ifdef __MMI_SILENT_MEETING_PROFILE__
                if (!IsMeetingModeActivated())
    #endif 
                {
                    AudioPlayToneWithCallBackVolPath(
                        gstartMidiId,
                        REPEAT,
                        INCOMING_CALL_TONE,
                        (U8) gcommonvolumelevel,
                        MDI_DEVICE_SPEAKER2);
                    mmi_profiles_set_ring_tone_playing(TRUE);
                }
            /* MTK Brian added for play ring tone after MT message, 2003/11/10 */
            SetProtocolEventHandler(mmi_profiles_continue_volume_ring_tone, PRT_EQ_PLAY_AUDIO_FINISH_IND);

            break;
        case 1:
            mdi_audio_suspend_background_play();
            /* disable UP DOWN key tone */
            key_tone_state = mmi_frm_kbd_get_key_tone_state();
            mmi_frm_kbd_set_tone_state(MMI_KEY_VOL_UP_DOWN_TONE_DISABLED);
            SetKeyPadVolume(gcommonvolumelevel);
            type = VOLUMEHANDLER_KEY_TONE;
/*** Set all function handlers volume level screen *****/
            SetVolumeKeyHandlerFunctions(
                mmi_profiles_vol_inc_dec_play_keypad_tone,
                mmi_profiles_vol_inc_dec_play_keypad_tone,
                NULL,
                NULL,
                STR_COMMON_VOLUME_LEVEL_KEY_CAPTION,
                &gcommonvolumelevel,
                STR_GLOBAL_OK,
                STR_GLOBAL_BACK,
                mmi_profiles_entry_volume_level_hdlr,
                GoBackHistory,//GoBackCommonVolume,
                0,
                ExitScrProfilesCommonVolumeLevel,
                1,
                type);
            EntryScrSetKeyPadVolumeLevel();
            AudioStopReq((U16) gprofiles[gprofileId].toneSetup.keypadTone);
            break;
    }

//    SetKeyHandler(GoIdleScreenCommonVolume, KEY_END, KEY_EVENT_DOWN);
    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_vol_inc_dec_play_keypad_tone
 * DESCRIPTION
 *  when change keypad tone volume, need to play key pad tone again after
 *  set new volume because it is not ring tone and it will only play once.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_vol_inc_dec_play_keypad_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (gcommonvolumehandler && !IsSilentModeActivated())
#ifdef __MMI_SILENT_MEETING_PROFILE__
        if (!IsMeetingModeActivated())
#endif 
        {
            if (gprofiles[gprofileId].toneSetup.keypadTone == KEYPAD_CLICK)
            {
                AudioPlayReq(TONE_KEY_CLICK, DEVICE_AUDIO_PLAY_ONCE);
            }
            else if (gprofiles[gprofileId].toneSetup.keypadTone != KEYPAD_SILENT)
            {
                AudioPlayReq(TONE_KEY_NORMAL, DEVICE_AUDIO_PLAY_ONCE);
            }
        }

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_volume_level_hdlr
 * DESCRIPTION
 *  Set keypad volume level for press of OK on volume level screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_volume_level_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 *guiBuffer;  /* Buffer holding history data */
    MMI_VOLUME_LEVEL_ENUM ringvolume;
    MMI_VOLUME_LEVEL_ENUM keypadvolume;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_STATUS);

    switch (gcommonvolumehandler)
    {
        case 0:
        {
            gprofiles[gprofileId].ringVolumeLevel = (U8) gcommonvolumelevel;

            /*stop ring tone to prevent from ring tone volume change to active profile volume*/
            if (mmi_profiles_is_ring_tone_playing())
            {
                mdi_audio_stop_all();
            }            
            switch (volume_level_UI)
            {
                case 0:
                    ringvolume = LEVEL1;
                    SetRingVolumeLevel(ringvolume);
                    break;
                case 1:
                    ringvolume = LEVEL2;
                    SetRingVolumeLevel(ringvolume);
                    break;
                case 2:
                    ringvolume = LEVEL3;
                    SetRingVolumeLevel(ringvolume);
                    break;
                case 3:
                    ringvolume = LEVEL4;
                    SetRingVolumeLevel(ringvolume);
                    break;
                case 4:
                    ringvolume = LEVEL5;
                    SetRingVolumeLevel(ringvolume);
                    break;
                case 5:
                    ringvolume = LEVEL6;
                    SetRingVolumeLevel(ringvolume);
                    break;
                case 6:
                    ringvolume = LEVEL7;
                    SetRingVolumeLevel(ringvolume);
                    break;
            }
        }
            break;
        case 1:
        {
            gprofiles[gprofileId].keypadVolumeLevel = (U8) gcommonvolumelevel;
            switch (volume_level_UI)
            {
                case 0:
                    keypadvolume = LEVEL1;
                    SetKeypadVolumeLevel(keypadvolume);
                    break;
                case 1:
                    keypadvolume = LEVEL2;
                    SetKeypadVolumeLevel(keypadvolume);
                    break;
                case 2:
                    keypadvolume = LEVEL3;
                    SetKeypadVolumeLevel(keypadvolume);
                    break;
                case 3:
                    keypadvolume = LEVEL4;
                    SetKeypadVolumeLevel(keypadvolume);
                    break;
                case 4:
                    keypadvolume = LEVEL5;
                    SetKeypadVolumeLevel(keypadvolume);
                    break;
                case 5:
                    keypadvolume = LEVEL6;
                    SetKeypadVolumeLevel(keypadvolume);
                    break;
                case 6:
                    keypadvolume = LEVEL7;
                    SetKeypadVolumeLevel(keypadvolume);
                    break;
            }
        }
            break;
    }
    GoBackHistory();
}

/*****************************************************************************
 * FUNCTION
 *  GoIdleScreenCommonVolume
 * DESCRIPTION
 *  Go back from Volume screen through End Key
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void GoIdleScreenCommonVolume(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    MMI_VOLUME_LEVEL_ENUM ringVolumeLevel, keypadVolumelevel;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
/**** Restore Volume levels on press of END key on volume level screen*****/
    switch (gcommonvolumehandler)
    {
        case 0:
            ringVolumeLevel = gprofiles[gactivatedprofile].ringVolumeLevel;
            SetRingerVolume(ringVolumeLevel);
            break;
        case 1:
            keypadVolumelevel = gprofiles[gactivatedprofile].keypadVolumeLevel;
            SetKeyPadVolume(keypadVolumelevel);
            break;
    }

    DisplayIdleScreen();
}


/*****************************************************************************
 * FUNCTION
 *  ExitScrProfilesCommonVolumeLevel
 * DESCRIPTION
 *  Exit profile Volume Level screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void ExitScrProfilesCommonVolumeLevel(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    MMI_VOLUME_LEVEL_ENUM ringVolumeLevel, keypadVolumelevel;

    history Scr;    /* Variable to hold the history data */
    S16 nHistory = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    Scr.scrnID = SCR_PROFILES_COMMON_VOLUME_LEVEL;
    Scr.entryFuncPtr = EntryScrProfilesCommonVolumeLevel;
    mmi_ucs2cpy((S8*) Scr.inputBuffer, (S8*) & nHistory);
    GetCategoryHistory(Scr.guiBuffer);
    AddHistory(Scr);

    switch (gcommonvolumehandler)
    {
        case 0:
            if (mmi_profiles_is_ring_tone_playing())
            {
                mdi_audio_stop_all();   /* use stop all because it might be play file or play id */
            }
            ringVolumeLevel = gprofiles[gactivatedprofile].ringVolumeLevel;
            SetRingerVolume(ringVolumeLevel);
            mdi_audio_resume_background_play();
            /* MTK Brian added for play ring tone after MT message, 2003/11/10 */
            SetProtocolEventHandler(NULL, PRT_EQ_PLAY_AUDIO_FINISH_IND);
            break;
        case 1:
            AudioStopReq((U16) gprofiles[gprofileId].toneSetup.keypadTone);
            keypadVolumelevel = gprofiles[gactivatedprofile].keypadVolumeLevel;
            SetKeyPadVolume(keypadVolumelevel);
            /* restore key tone state */
            mmi_frm_kbd_set_tone_state(key_tone_state);
            mdi_audio_resume_background_play();
            break;
    }

}
#if defined  __VIBRATOR_TONE_SUPPORT__  //su-2008/12/04
extern U8 gactivatedprofile;
#endif
/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_alert_type
 * DESCRIPTION
 *  Entry fucntion for Call Alert
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_alert_type(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[MAX_SUB_MENUS];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;                     /* Stores no of children in the submenu */
    U16 nDispAttribute;                 /* Stores display attribue */
    U8 *guiBuffer;                      /* Buffer holding history data */
    S8 i = 0;

    /* U8* PopUpList[MAX_SUB_MENUS]; */
    MMI_ALERT_TYPE data = 0;
    U16 ProfileMenuID[] = 
    {
        MENU_RING,
        MENU_VIBRATION_ONLY,
        #ifndef  __VIBRATOR_TONE_SUPPORT__  //su-2008/12/04
        MENU_VIBRATION_AND_RING,
        #endif
        MENU_VIBRATION_THEN_RING,
        MENU_SILENT
    };

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    if( gprofileId == MMI_PROFILE_SILENT )
    {
        DisplayPopup((U8*) GetString(STR_SILENT_ACTIVATE_MESSAGE), IMG_GLOBAL_ERROR, 0, 1000, (U8) ERROR_TONE);
        return;
    }
     
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_PROFILES_CALL_ALERT, NULL, mmi_profiles_entry_alert_type, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_CALL_ALERT);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(MENU_MT_CALL_ALERT_TYPE);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_MT_CALL_ALERT_TYPE);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(MENU_MT_CALL_ALERT_TYPE, nStrItemList);

    /* 6 Set current parent id */
    SetParentHandler(MENU_MT_CALL_ALERT_TYPE);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(ExecuteCurrHiliteHandler);

    /* MTK Brian modified for showing radio button, 2003/11/15 */

/****** Get the index of activated alert type menu ID*****/
    i = gprofiles[gprofileId].mtCallAlertTypeEnum;
    #if defined __VIBRATOR_TONE_SUPPORT__    //su-2008/12/04
if(i == 4)
	i  = 3;
#endif
    data = GetIndexOfStringId(MENU_MT_CALL_ALERT_TYPE, ProfileMenuID[i - 1]);

    /* 8 Display Category Screen */
    ShowCategory11Screen(
        STR_CALL_ALERT_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        nStrItemList,
        (U16) data,
        guiBuffer);
    /* MTK end */
    
}

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_alert_type_ring_hdlr
 * DESCRIPTION
 *  Set alert type as ring
 *  Profile.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_alert_type_ring_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetMtCallAlertTypeEnum(MMI_RING);
    //MTK Brian modified to skip writing nvram if no change, 2003/11/26
    //SendSetVibrationMode(0);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_CALL_ALERT);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_alert_type_vib_only_hdlr
 * DESCRIPTION
 *  set alert type as vibration only
 *  Profile.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_alert_type_vib_only_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetMtCallAlertTypeEnum(MMI_VIBRATION_ONLY);
    //MTK Brian modified to skip writing nvram if no change, 2003/11/26
    //SendSetVibrationMode(1);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_CALL_ALERT);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_alert_type_vib_and_ring_hdlr
 * DESCRIPTION
 *  Set alert type as vibration and ring
 *  Profile.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_alert_type_vib_and_ring_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    SetMtCallAlertTypeEnum(MMI_VIBRATION_AND_RING);
    //MTK Brian modified to skip writing nvram if no change, 2003/11/26
    //SendSetVibrationMode(1);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_CALL_ALERT);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_alert_type_vib_then_ring_hdlr
 * DESCRIPTION
 *  set alert type as vibration then ring
 *  Profile.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_alert_type_vib_then_ring_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    SetMtCallAlertTypeEnum(MMI_VIBRATION_THEN_RING);
    //MTK Brian modified to skip writing nvram if no change, 2003/11/26
    //SendSetVibrationMode(1);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_CALL_ALERT);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_alert_type_light_only_hdlr
 * DESCRIPTION
 *  set alert type as light only
 *  Profile.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_alert_type_light_only_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    SetMtCallAlertTypeEnum(MMI_SILENT);
    //MTK Brian modified to skip writing nvram if no change, 2003/11/26
    //SendSetVibrationMode(0);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_CALL_ALERT);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_ring_type
 * DESCRIPTION
 *  Entry function for Ring Type
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_ring_type(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[15];   /* Stores the strings id of submenus returned */
    U16 nNumofItem;         /* Stores no of children in the submenu */
    U16 nDispAttribute;     /* Stores display attribue */
    U8 *guiBuffer;          /* Buffer holding history data */
    U8 i;
    MMI_RING_TYPE_ENUM data = 0;
    U16 ProfileMenuID[] = 
    {
        MENU_RING_TYPE_SINGLE,
        MENU_RING_TYPE_REPEAT,
        MENU_RING_TYPE_ASCENDING
    };

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_PROFILES_RING_TYPE, NULL, mmi_profiles_entry_ring_type, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_RING_TYPE);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(MENU_RING_TYPE);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_RING_TYPE);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(MENU_RING_TYPE, nStrItemList);

    /* 6 Set current parent id */
    SetParentHandler(MENU_RING_TYPE);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(ExecuteCurrHiliteHandler);

/****** Get the index of activated ring type menu ID*****/
    i = gprofiles[gprofileId].ringTypeEnum;
    data = GetIndexOfStringId(MENU_RING_TYPE, ProfileMenuID[i]);

    /* 8 Display Category Screen */
    ShowCategory11Screen(
        STR_RING_TYPE_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        0,
        STR_GLOBAL_BACK,
        0,
        nNumofItem,
        nStrItemList,
        (U16) data,
        guiBuffer);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_ring_type_ascending_hdlr
 * DESCRIPTION
 *  set ring type as Ascending
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_ring_type_ascending_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetRingTypeEnum(ASCENDING);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_RING_TYPE);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_ring_type_single_hdlr
 * DESCRIPTION
 *  set ring type as Single
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_ring_type_single_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetRingTypeEnum(SINGLE);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_RING_TYPE);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_ring_type_repeat_hdlr
 * DESCRIPTION
 *  set ring type as Repeat
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_ring_type_repeat_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetRingTypeEnum(REPEAT);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_RING_TYPE);
}

#ifdef __MMI_CONNECT_NOTICE__


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_connect_notice
 * DESCRIPTION
 *  Showing profile Call Alert screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_connect_notice(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[MAX_SUB_MENUS];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;                     /* Stores no of children in the submenu */
    U16 nDispAttribute;                 /* Stores display attribue */
    U8 *guiBuffer;                      /* Buffer holding history data */
    S8 i = 0;
    MMI_CONNECT_NOTICE_TYPE data = 0;
    U16 ProfileMenuID[] = 
    {
        MENU_NOTICE_NONE,
        MENU_NOTICE_TONE_ONLY,
        MENU_NOTICE_VIB_ONLY,
        MENU_NOTICE_TONE_AND_VIB
    };

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_PROFILES_CONNECT_NOTICE, NULL, mmi_profiles_entry_connect_notice, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_CONNECT_NOTICE);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(MENU_CONNECT_NOTICE);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_CONNECT_NOTICE);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(MENU_CONNECT_NOTICE, nStrItemList);

    /* 6 Set current parent id */
    SetParentHandler(MENU_CONNECT_NOTICE);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(ExecuteCurrHiliteHandler);

    /* MTK Brian modified for showing radio button, 2003/11/15 */

/****** Get the index of activated alert type menu ID*****/
    i = gprofiles[gprofileId].extraTone.connectTone;
    data = GetIndexOfStringId(MENU_CONNECT_NOTICE, ProfileMenuID[i]);

    /* 8 Display Category Screen */
    ShowCategory11Screen(
        STR_CONNECT_NOTICE,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        nStrItemList,
        (U16) data,
        guiBuffer);
    /* MTK end */

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_connect_notice_none_hdlr
 * DESCRIPTION
 *  set connect notice type as none
 *  Profile.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_connect_notice_none_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetConnectNotice(MMI_NOTICE_NONE);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_CONNECT_NOTICE);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_connect_notice_tone_only_hdlr
 * DESCRIPTION
 *  set connect notice type as tone only
 *  Profile.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_connect_notice_tone_only_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetConnectNotice(MMI_NOTICE_TONE_ONLY);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_CONNECT_NOTICE);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_connect_notice_vib_only_hdlr
 * DESCRIPTION
 *  set connect notice type as vib only
 *  Profile.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_connect_notice_vib_only_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetConnectNotice(MMI_NOTICE_VIB_ONLY);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_CONNECT_NOTICE);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_connect_notice_tone_and_vib_hdlr
 * DESCRIPTION
 *  set connect notice type as tone and vib
 *  Profile.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_connect_notice_tone_and_vib_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetConnectNotice(MMI_NOTICE_TONE_AND_VIB);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_CONNECT_NOTICE);
}
#endif /* __MMI_CONNECT_NOTICE__ */ 


/*****************************************************************************
 * FUNCTION
 *  ProfileGoBack2History
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void ProfileGoBack2History(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    GoBacknHistory(1);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_answering_mode
 * DESCRIPTION
 *  Entry function for Answering Mode
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_answering_mode(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[15];   /* Stores the strings id of submenus returned */
    U16 nNumofItem;         /* Stores no of children in the submenu */
    U16 nDispAttribute;     /* Stores display attribue */
    U8 *guiBuffer;          /* Buffer holding history data */
    U16 i;
    U16 ParentId;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_PROFILES_ANSWERING_MODE, NULL, mmi_profiles_entry_answering_mode, NULL);

/***** If earphone is connected then also show auto mode in answering mode list */
    if (gprofileId != MMI_PROFILE_HEADSET)
    {
        ParentId = MENU_ANSEWRING_MODE;
    }
    else
    {
        ParentId = MENU_ANSEWRING_MODE_HEADSET;
    }

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_ANSWERING_MODE);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(ParentId);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(ParentId);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(ParentId, nStrItemList);

    for (i = 0; i < nNumofItem; i++)
    {
        memset((S8*) subMenuDataPtrs[i], 0, MAX_SUB_MENU_SIZE);
        mmi_ucs2ncpy((S8*) subMenuDataPtrs[i], GetString(nStrItemList[i]), MAX_SUBMENU_CHARACTERS);
    }

    /* 6 Set current parent id */
    SetParentHandler(ParentId);

    /* MTK Brian added for SUBLCD freature, 2003/10/18 */
#ifdef __MMI_CLAMSHELL__
    fieldStates[0] = (U8) gprofiles[gprofileId].answeringMode.coverAnswer;
    fieldStates[1] = (U8) gprofiles[gprofileId].answeringMode.anyKey;
    fieldStates[2] = (U8) gprofiles[gprofileId].answeringMode.automatic;
#else /* __MMI_CLAMSHELL__ */ 
    fieldStates[0] = (U8) gprofiles[gprofileId].answeringMode.anyKey;
    fieldStates[1] = (U8) gprofiles[gprofileId].answeringMode.automatic;
#endif /* __MMI_CLAMSHELL__ */ 

    SetCheckboxToggleRightSoftkeyFunctions(mmi_profiles_set_answering_mode_query_popup, GoBackHistory);

    /* 8 Display Category Screen */

    ShowCategory140Screen(
        STR_ANSEWRING_MODE_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        nNumofItem,
        (U8 **) subMenuDataPtrs,
        fieldStates,
        0,
        guiBuffer);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_answering_mode_hdlr
 * DESCRIPTION
 *  set answering mode hdlr
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_answering_mode_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    MMI_ANSWERING_MODE answeringmode;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* MTK Brian added for SUBLCD freature, 2003/10/18 */
#ifdef __MMI_CLAMSHELL__
    answeringmode.coverAnswer = gprofiles[gprofileId].answeringMode.coverAnswer = fieldStates[0];
    answeringmode.anyKey = gprofiles[gprofileId].answeringMode.anyKey = fieldStates[1];
    answeringmode.automatic = gprofiles[gprofileId].answeringMode.automatic = fieldStates[2];
#else /* __MMI_CLAMSHELL__ */ 
    answeringmode.anyKey = gprofiles[gprofileId].answeringMode.anyKey = fieldStates[0];
    answeringmode.automatic = gprofiles[gprofileId].answeringMode.automatic = fieldStates[1];
#endif /* __MMI_CLAMSHELL__ */ 

    SetAnsweringMode(answeringmode);
    /* DisplayPopupCheckBox((PU8)GetString(STR_GLOBAL_DONE) ,IMG_GLOBAL_ACTIVATED, 1,UI_POPUP_NOTIFYDURATION_TIME,SUCCESS_TONE); */
    DisplayPopup((PU8) GetString(STR_GLOBAL_SAVED), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    
    DeleteScreenIfPresent(SCR_PROFILES_ANSWERING_MODE);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_answering_mode_query_popup
 * DESCRIPTION
 *  set call back functions for Answering mode query popup.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_answering_mode_query_popup(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_set_query_popup(mmi_profiles_entry_answering_mode_hdlr, ProfileGoBack2History);
}

#if !defined(HARDWARE_LED_NOT_SUPPORT)


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_status_LED
 * DESCRIPTION
 *  Entry function for Status LED
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_status_LED(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[15];   /* Stores the strings id of submenus returned */
    U16 nNumofItem;         /* Stores no of children in the submenu */
    U16 nDispAttribute;     /* Stores display attribue */
    U8 *guiBuffer;          /* Buffer holding history data */
    MMI_LEDLIGHT_STATUS_ENUM data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_PROFILES_STATUS, mmi_profiles_exit_status_LED, mmi_profiles_entry_status_LED, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_STATUS);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(MENU_LIGHT_STATUS);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_LIGHT_STATUS);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(MENU_LIGHT_STATUS, nStrItemList);

    /* 6 Set current parent id */
    SetParentHandler(MENU_LIGHT_STATUS);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(GetCurrScreenHandlerfour);

    data = gprofiles[gprofileId].light.status;

    /* 8 Display Category Screen */
    ShowCategory11Screen(
        STR_LIGHT_STATUS_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        0,
        STR_GLOBAL_BACK,
        0,
        nNumofItem,
        nStrItemList,
        (U16) data,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_entry_status_LED_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_status_LED
 * DESCRIPTION
 *  Exit function for Status LED
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_status_LED(void)
{
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_preview_stop_color_id();
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_status_LED_hdlr
 * DESCRIPTION
 *  Set Light color
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_status_LED_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    MMI_LEDLIGHT_STATUS_ENUM lightstaus;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    switch (gcurrHiliteIndexOne)
    {
        case 0:
            lightstaus = NO_COLOR;
            SetLightStatus(lightstaus);
            break;
        case 1:
            lightstaus = COLOR_PATTERN1;
            SetLightStatus(lightstaus);
            break;
        case 2:
            lightstaus = COLOR_PATTERN2;
            SetLightStatus(lightstaus);
            break;
        case 3:
            lightstaus = COLOR_PATTERN3;
            SetLightStatus(lightstaus);
            break;
        case 4:
            lightstaus = COLOR_PATTERN4;
            SetLightStatus(lightstaus);
            break;
        case 5:
            lightstaus = COLOR_PATTERN5;
            SetLightStatus(lightstaus);
            break;
        case 6:
            lightstaus = COLOR_PATTERN6;
            SetLightStatus(lightstaus);
            break;
    }

    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_STATUS);
}

#endif /* HARDWARE_LED_NOT_SUPPORT */ 


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_tone_setup
 * DESCRIPTION
 *  Entry function for Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_tone_setup(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[MAX_SUB_MENUS];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;                     /* Stores no of children in the submenu */
    U16 nDispAttribute;                 /* Stores display attribue */
    U8 *guiBuffer;                      /* Buffer holding history data */
    U8 *PopUpList[MAX_SUB_MENUS];

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    if( gprofileId == MMI_PROFILE_SILENT )
    {
        DisplayPopup((U8*) GetString(STR_SILENT_ACTIVATE_MESSAGE), IMG_GLOBAL_ERROR, 0, 1000, (U8) ERROR_TONE);
        return;
    }

#ifdef __USB_IN_NORMAL_MODE__
    /* check is in mass storage mode */
    if (mmi_usb_is_in_mass_storage_mode())
    {
        /* phone drive is exported, cant use this app */
        mmi_usb_app_unavailable_popup(0);   /* pass 0 will show default string */
        return;
    }
#endif /* __USB_IN_NORMAL_MODE__ */ 

#ifdef __MMI_BT_PROFILE__
    if( gprofileId == MMI_PROFILE_BT )
    {
        mmi_frm_hide_menu_item(MENU_TONE_SETUP_POWERON_TONE);
    }
    else
#endif
        mmi_frm_unhide_menu_item(MENU_TONE_SETUP_POWERON_TONE);

    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_PROFILES_TONE_SETUP, NULL, mmi_profiles_entry_tone_setup, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_TONE_SETUP);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild_Ext(MENU_TONE_SETUP);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds_Ext(MENU_TONE_SETUP, nStrItemList);

    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(ExecuteCurrHiliteHandler);

    /* 8 Display Category Screen */
    ConstructHintsList(MENU_TONE_SETUP, PopUpList);
    ShowCategory52Screen(
        STR_PROFILES_TONE_SETUP_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        nStrItemList,
        (PU16) gIndexIconsImageList,
        PopUpList,
        0,
        0,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

}

#if defined(__MMI_DOWNLOADABLE_THEMES_SUPPORT__)


/*****************************************************************************
 * FUNCTION
 *  AudioFileDeletedFromFmgr
 * DESCRIPTION
 *  IF audio folder get deleted or fomatted
 *  from File manager activate default audio as incoming tone
 * PARAMETERS
 *  tone_id         [IN]        
 *  Audio(?)        [IN]        ID
 * RETURNS
 * BOOL
 *  
 *****************************************************************************/
pBOOL AudioFileDeletedFromFmgr(U16 tone_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S8 buf[(FMGR_MAX_PATH_LEN + 1) * ENCODING_LENGTH];
    FS_HANDLE file;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    GetAudioNameWithPathInFileSystem(tone_id, (PS8) buf);
    file = FS_Open((const WCHAR*)buf, FS_READ_ONLY);
    if (file < 0)
    {
        FS_Close(file);
        return TRUE;
    }
    else
    {
        FS_Close(file);
        return FALSE;
    }
}
#endif /* defined(__MMI_DOWNLOADABLE_THEMES_SUPPORT__) */ 


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_get_melody_list
 * DESCRIPTION
 *  Build melody list
 * PARAMETERS
 *  CurMelodyID         [IN]        
 *  selecteditem        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
U8 mmi_profiles_get_melody_list(U16 CurMelodyID, U16 *selecteditem)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
#ifdef __MMI_PROFILE_EXTMELODY_SUPPORT__
    DYNEXTMELODYINFO *ExtMelodyInfo;
#endif 
#ifdef __MMI_DOWNLOADABLE_THEMES_SUPPORT__
    DYNAUDIOINFO *DownloadThemeTones;
#endif 
    int index, data;
    U16 nNumofItem = gtotalRingId + gtotalMidiId;
    S32 result = 0 ;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* init hint data */
    memset(hintData, 0, sizeof(hintData));
    for (data = 0; data < MAX_SUB_MENUS; data++)
    {
        hintDataPtrs[data] = hintData[data];
    }

    /* copy the names of fixed list (IMY) */
    for (index = 0; index < gtotalRingId; index++)
    {
        mmi_ucs2cpy((PS8) subMenuDataPtrs[index], GetString((U16) (STR_PROFILES_RING_1 + index)));
    }

    /* copy the names of fixed list (MIDI) */
    for (index = 0; index < gtotalMidiId; index++)
    {
        mmi_ucs2cpy((PS8) subMenuDataPtrs[index + gtotalRingId], GetString((U16) (STR_PROFILES_MIDI_1 + index)));
    }

    /* make a listing of ext melodies. */
#ifdef __MMI_PROFILE_EXTMELODY_SUPPORT__
    PmgGetExtMelodyInfo(&ExtMelodyInfo);
    for (index = nNumofItem, data = 0; data < MAXIMUM_EXT_MELODY_NUM; index++, data++)
    {
        if (PmgIsEmptySlot((U8) data) == MMI_FALSE)
        {
        #ifdef __USB_IN_NORMAL_MODE__
            if(mmi_usb_is_in_mass_storage_mode())
            {
                mmi_ucs2cpy((S8*) hintData[index], (S8*) GetString(FMGR_FS_DEVICE_EXPORTED_ERROR_TEXT));
            }
            else
        #endif            
            if (PmgQueryFileExistBySlot((U8) data) == MMI_FALSE)
            {
                mmi_ucs2cpy((S8*) hintData[index], (S8*) GetString(STR_TONE_FILE_NOT_EXIST));
            }
        #if defined(__DRM_SUPPORT__)
            else if(  (result = PmgQueryFileDRMForwardableBySlot((U8)data)) < 1)
            {
                if(result == 0)
                {
                    mmi_ucs2cpy((S8*) hintData[index], (S8*) GetString(STR_GLOBAL_DRM_PROHIBITED));
                }
                else
                {
                    mmi_ucs2cpy((S8*) hintData[index], (S8*) GetString(GetFileSystemErrorString(result)));
                }
            }
        #endif /*__DRM_SUPPORT__*/
        
            if (IS_EXTMELODY_SHORTNAME(ExtMelodyInfo->info[data].filepath))
            {
                mmi_chset_mixed_text_to_ucs2_str(
                    subMenuDataPtrs[index],
                    (FMGR_MAX_FILE_LEN + 1) * ENCODING_LENGTH,
                    (U8*) ExtMelodyInfo->info[data].filename,
                    g_chset_text_encoding);
            }
            else
            {
                mmi_ucs2cpy((S8*) subMenuDataPtrs[index], (S8*) ((ExtMelodyInfo->info[data]).filename));
            }
        #if (!defined(__MMI_SHOW_FILE_EXT__))
            PmgRemoveFileExt((S8*) subMenuDataPtrs[index]);
        #elif (!defined(__MMI_SHOW_DAF_FILE_EXT__))
            PmgRemoveFileDAFExt((S8*) subMenuDataPtrs[index]);
        #endif 
        }
        else
        {
            mmi_ucs2cpy((S8*) subMenuDataPtrs[index], (S8*) GetString(STR_GLOBAL_EMPTY_LIST));
        }
    }
#endif /* __MMI_PROFILE_EXTMELODY_SUPPORT__ */ 

#ifdef __MMI_DOWNLOADABLE_THEMES_SUPPORT__
    if (GetThemeV2TonesInfo(&DownloadThemeTones) != 0 && mmi_tm_get_current_theme_ringtone())
    {
        mmi_ucs2cpy((S8*) subMenuDataPtrs[index++], (S8*) GetString(STR_PROFILES_CURR_THEME));
    }
#endif /* __MMI_DOWNLOADABLE_THEMES_SUPPORT__ */ 

    /* find highlight selection */
    if (CurMelodyID >= gstartRingId && CurMelodyID < gstartRingId + gtotalRingId)
    {
        *selecteditem = CurMelodyID - gstartRingId;
    }
    else if (CurMelodyID >= gstartMidiId && CurMelodyID < gstartMidiId + gtotalMidiId)
    {
        *selecteditem = CurMelodyID - gstartMidiId + gtotalRingId;
    }
    else
    {
        BOOL selected = FALSE;

    #ifdef __MMI_PROFILE_EXTMELODY_SUPPORT__
        for (data = 0; data < MAXIMUM_EXT_MELODY_NUM; data++)
        {
            if (PmgIsEmptySlot((U8) data) == MMI_FALSE && CurMelodyID == (ExtMelodyInfo->info[data]).id)
            {
                *selecteditem = nNumofItem + data;
                selected = TRUE;
                break;
            }
        }
        nNumofItem += MAXIMUM_EXT_MELODY_NUM;
    #endif /* __MMI_PROFILE_EXTMELODY_SUPPORT__ */ 
    #if defined(__MMI_DOWNLOADABLE_THEMES_SUPPORT__)
        if (!selected)
        {
            if (GetThemeV2TonesInfo(&DownloadThemeTones) != 0 && mmi_tm_get_current_theme_ringtone())
            {
                if ((U16)DownloadThemeTones[0].AudioId == CurMelodyID)
                {
                    selected = TRUE;
                    *selecteditem = nNumofItem;
                    if (AudioFileDeletedFromFmgr(CurMelodyID))
                    {
                        mmi_ucs2cpy((S8*) hintData[nNumofItem], GetString(STR_TONE_FILE_NOT_EXIST));
                    }
                }
            }
        }
    #endif /* defined(__MMI_DOWNLOADABLE_THEMES_SUPPORT__) */ 
        if(!selected)
        {
            /*when there is no mapping selected item, assgin midi1 to both ring tone and alarm tone*/
            gprofiles[gprofileId].toneSetup.ringTone = gstartMidiId ;
            gprofiles[gprofileId].toneSetup.alarmTone = gstartMidiId ;
            *selecteditem = gtotalRingId;
        }
    }

    return (U8) index;
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_ring_tone_list
 * DESCRIPTION
 *  Showing profile Ring Tone Setup Screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_ring_tone_list(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 *guiBuffer;      /* Buffer holding history data */
    U16 nDispAttribute; /* Stores display attribue */
    U16 selecteditem = 0;
    U8 totalItems = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(
        SCR_PROFILES_RING_TONE_SETUP,
        mmi_profiles_exit_ring_tone_list,
        mmi_profiles_entry_ring_tone_list,
        NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_RING_TONE_SETUP);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP_RING_TONE);

    /* 3. Retrieve no of child of menu item to be displayed */
    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    totalItems = mmi_profiles_get_melody_list(gprofiles[gprofileId].toneSetup.ringTone, &selecteditem);

    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP_RING_TONE);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(mmi_profiles_melody_list_highlight_hdlr);

    /* 8 Display Category Screen */
    ShowCategory89Screen(
        STR_PROFILES_RING_TONE_SETUP_CAPTION_DEF,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        totalItems,
        subMenuDataPtrs,
        hintDataPtrs,
        0,
        selecteditem,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(mmi_profiles_stop_tone_and_go_back, KEY_EVENT_UP);
    SetLeftSoftkeyFunction(mmi_profiles_entry_ring_tone_list_hdlr, KEY_EVENT_UP);
    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_ring_tone_list
 * DESCRIPTION
 *  Exit profile Ring ToneSetup Screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_ring_tone_list(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_preview_stop_tone();
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_stop_tone_and_go_back
 * DESCRIPTION
 *  stop tone and go back
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_stop_tone_and_go_back(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_preview_stop_tone();
    GoBackHistory();
}

#ifdef __MMI_PROFILE_EXTMELODY_SUPPORT__


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_Ext_melody_replace_callback
 * DESCRIPTION
 *  
 * PARAMETERS
 *  path            [IN] path string ptr from filemgr
 *  is_short        [IN] flag to identify if it is short char
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_Ext_melody_replace_callback(void *path, int is_short)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S8 *filepath = (S8*) path;
    PMG_ADDFILE_ERRNO err = PMG_ADDFILE_ERR_UNKNOWN;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (filepath)
    {
    #if defined(__DRM_SUPPORT__)
        if (!mmi_profiles_check_DRM_content_forwardable((UI_string_type) filepath))
        {
            err = PMG_ADDFILE_ERR_DRM_PROHIBTED;
        }
        else
    #endif /* defined(__DRM_SUPPORT__)*/ 
        if (PmgCheckImyMidFileSize(filepath) == PMG_ADDFILE_ERR_FILE_TOO_LARGE)
        {
            err = PMG_ADDFILE_ERR_FILE_TOO_LARGE;
        }
        else
        {
            PmgSetShortFileName((BOOL) is_short);
            if (PmgIsEmptySlot(g_ext_melody_idx) == MMI_FALSE)
            {
                err = PmgReplaceExtMelodyBySlotPathFileName(filepath, g_ext_melody_idx);
            }
            else
            {
                err = PmgAddExtMelodyBySlotPathFileName(filepath, g_ext_melody_idx);
            }
        }

        switch (err)
        {
            case PMG_ADDFILE_ERR_SUCCESS:
                DisplayPopup(
                    (PU8) GetString(STR_GLOBAL_DONE),
                    IMG_GLOBAL_ACTIVATED,
                    1,
                    UI_POPUP_NOTIFYDURATION_TIME,
                    SUCCESS_TONE);
                break;

            case PMG_ADDFILE_ERR_STR_TOO_LONG:
            case PMG_ADDFILE_ERR_STRFILE_TOO_LONG:
            case PMG_ADDFILE_ERR_STRPATH_TOO_LONG:
                DisplayPopup(
                    (PU8) GetString(STR_PROFILES_RING_TONE_SETUP_NAMETOOLONG),
                    IMG_GLOBAL_UNFINISHED,
                    1,
                    UI_POPUP_NOTIFYDURATION_TIME,
                    WARNING_TONE);
                break;

            case PMG_ADDFILE_ERR_SLOT_FULL:
                DisplayPopup(
                    (PU8) GetString(STR_PROFILES_RING_TONE_SETUP_LISTFULL),
                    IMG_GLOBAL_UNFINISHED,
                    1,
                    UI_POPUP_NOTIFYDURATION_TIME,
                    WARNING_TONE);
                break;

            case PMG_ADDFILE_ERR_FILE_TOO_LARGE:
                DisplayPopup(
                    (PU8) GetString(STR_PROFILES_RING_TONE_SETUP_FILETOOLARGE),
                    IMG_GLOBAL_UNFINISHED,
                    1,
                    UI_POPUP_NOTIFYDURATION_TIME,
                    WARNING_TONE);
                break;

            case PMG_ADDFILE_ERR_DUPLICATED:
                DisplayPopup(
                    (PU8) GetString(STR_PROFILES_RING_TONE_SETUP_DUPLICATED),
                    IMG_GLOBAL_UNFINISHED,
                    1,
                    UI_POPUP_NOTIFYDURATION_TIME,
                    WARNING_TONE);
                break;
        #if defined(__DRM_SUPPORT__)
            case PMG_ADDFILE_ERR_DRM_PROHIBTED:
                DisplayPopup(
                    (PU8) GetString(STR_GLOBAL_DRM_PROHIBITED),
                    IMG_GLOBAL_WARNING,
                    1,
                    UI_POPUP_NOTIFYDURATION_TIME,
                    WARNING_TONE);
                break;
        #endif /* defined(__DRM_SUPPORT__)*/ 
            default:
                DisplayPopup(
                    (PU8) GetString(STR_GLOBAL_UNFINISHED),
                    IMG_GLOBAL_UNFINISHED,
                    1,
                    UI_POPUP_NOTIFYDURATION_TIME,
                    WARNING_TONE);
                break;
        }

        DeleteUptoScrID(MENU_TONE_SETUP_RING_TONE_EXT_MELODY);
        DeleteScreenIfPresent(MENU_TONE_SETUP_RING_TONE_EXT_MELODY);

    }
    else
    {
        GoBackToHistory(MENU_TONE_SETUP_RING_TONE_EXT_MELODY);
    }

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_Ext_melody_convert_empty_slot_menu_list
 * DESCRIPTION
 *  empty slot only has add option
 * PARAMETERS
 *  idx     [IN]        
 * RETURNS
 *  
 *****************************************************************************/
static U8 mmi_profiles_Ext_melody_convert_empty_slot_menu_list(U8 idx)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (PmgIsEmptySlot(g_ext_melody_idx) == MMI_FALSE)
    {   /* Not Empty slot */
        return idx;
    }
    else
    {
        if (idx == 0)
        {
            return PRF_MENU_EXTMLD_ADD; /* PRF_MENU_EXTMLD_DONE */
        }
        else
        {
            MMI_ASSERT(MMI_FALSE);
        }
    }

    return PRF_MENU_EXTMLD_MAX;
}

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_Ext_melody_replace_action
 * DESCRIPTION
 *  external melody replace action
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_Ext_melody_replace_action(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    FMGR_FILTER filter;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    FMGR_FILTER_INIT(&filter);
    FMGR_FILTER_SET_AUDIO(&filter);
    FMGR_FILTER_SET(&filter, FMGR_TYPE_FOLDER);
    FMGR_FILTER_SET(&filter, FMGR_TYPE_FOLDER_DOT);
    FMGR_FILTER_SET(&filter, FMGR_TYPE_ODF); 

#if defined(__MMI_PHB_CALLER_RES_SETTING__)     /* Forward res to phonebook */
    if (prfset_conf_type == PRFSET_MELODY_TYPE_PHB_RING)
    {
        mmi_fmgr_select_path_and_enter(
            APP_PHONEBOOK,
            FMGR_SELECT_FILE,
            filter,
            (S8*) L"root",
            mmi_profiles_Ext_melody_replace_callback);
    }
    else
#endif /* defined(__MMI_PHB_CALLER_RES_SETTING__) */ 
        mmi_fmgr_select_path_and_enter(
            APP_PROFILES,
            FMGR_SELECT_FILE,
            filter,
            (S8*) L"root",
            mmi_profiles_Ext_melody_replace_callback);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_Ext_melody_action_hdlr
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_Ext_melody_action_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 idx = mmi_profiles_Ext_melody_convert_empty_slot_menu_list(extMldHlitItem);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (idx == PRF_MENU_EXTMLD_DONE)
    {
        if (PmgIsEmptySlot(g_ext_melody_idx) == MMI_FALSE)
        {
            if (prfset_conf_type == PRFSET_MELODY_TYPE_RING)
            {
                SetRingToneID((U16) (PMG_EXT_MELODY_BEGIN + g_ext_melody_idx));
            }
        #ifdef __MMI_DUAL_PROFILE_SUPPORT__
            else if(prfset_conf_type == PRFSET_MELODY_TYPE_CARD2_RING)
            {
                SetCard2RingToneID((U16)(PMG_EXT_MELODY_BEGIN + g_ext_melody_idx));
            }
         #endif	/* __MMI_DUAL_PROFILE_SUPPORT__ */
        #ifndef __MMI_ALM_CUSTOMIZE_TONE__
            else if (prfset_conf_type == PRFSET_MELODY_TYPE_ALARM)
            {
                SetAlarmToneID((U16) (PMG_EXT_MELODY_BEGIN + g_ext_melody_idx));
            }
        #endif /* __MMI_ALM_CUSTOMIZE_TONE__ */ 
        #if defined(__MMI_PHB_CALLER_RES_SETTING__)     /* Forward res to phonebook */
            else if (prfset_conf_type == PRFSET_MELODY_TYPE_PHB_RING)
            {
                mmi_phb_caller_ring_forward_to_entry((U16) (PMG_EXT_MELODY_BEGIN + g_ext_melody_idx));
            }
        #endif /* defined(__MMI_PHB_CALLER_RES_SETTING__) */ 
        #if defined(__EM_MODE__) && defined (__MMI_ENGINEER_MODE__)
            else if (prfset_conf_type == PRFSET_MELODY_TYPE_ENGINEERMODE)
            {
                em_nw_event_select_ring_done((U16) (PMG_EXT_MELODY_BEGIN + g_ext_melody_idx));
            }
        #endif /* defined(__EM_MODE__) && defined (__MMI_ENGINEER_MODE__)*/
        #ifdef __MMI_VIDEO_TELEPHONY__
            else if(prfset_conf_type == PRFSET_MELODY_TYPE_VIDEO_CALL)
            {
                SetVideoCallToneID((U16) (PMG_EXT_MELODY_BEGIN + g_ext_melody_idx));
            }
        #endif
            else
            {
                MMI_ASSERT(0);
            }

            if (prfset_conf_type != PRFSET_MELODY_TYPE_PHB_RING)
            {
                DisplayPopup(
                    (PU8) GetString(STR_GLOBAL_DONE),
                    IMG_GLOBAL_ACTIVATED,
                    1,
                    UI_POPUP_NOTIFYDURATION_TIME,
                    SUCCESS_TONE);
            }
        }
        else
        {
            DisplayPopup(
                (PU8) GetString(STR_GLOBAL_UNFINISHED),
                IMG_GLOBAL_UNFINISHED,
                1,
                UI_POPUP_NOTIFYDURATION_TIME,
                WARNING_TONE);
        }

    }
    else if (idx == PRF_MENU_EXTMLD_DEL)
    {
        if (PmgDelExtMelodyById((U16) (PMG_EXT_MELODY_BEGIN + g_ext_melody_idx)) == MMI_TRUE)
        {
            DisplayPopup(
                (PU8) GetString(STR_GLOBAL_DONE),
                IMG_GLOBAL_ACTIVATED,
                1,
                UI_POPUP_NOTIFYDURATION_TIME,
                SUCCESS_TONE);
        }
        else
        {
            DisplayPopup(
                (PU8) GetString(STR_GLOBAL_UNFINISHED),
                IMG_GLOBAL_UNFINISHED,
                1,
                UI_POPUP_NOTIFYDURATION_TIME,
                WARNING_TONE);
        }
    }
    else if (idx == PRF_MENU_EXTMLD_ADD)
    {
        mmi_profiles_Ext_melody_replace_action();
    }
    else
    {
        DisplayPopup(
            (PU8) GetString(STR_GLOBAL_UNFINISHED),
            IMG_GLOBAL_UNFINISHED,
            1,
            UI_POPUP_NOTIFYDURATION_TIME,
            WARNING_TONE);
    }

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_Ext_melody_hilite_hdlr
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_Ext_melody_hilite_hdlr(S32 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    extMldHlitItem = (U8) index;
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_Ext_melody_entry_menu
 * DESCRIPTION
 *  entry function of external melody menu main screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_Ext_melody_entry_menu(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 *nStrItemList[PRF_MENU_EXTMLD_MAX];
    U8 nNumofItem = 0;
    U8 *guiBuffer;
    U16 StrIDToneSet = 0, StrIDToneDel = 0, StrIDToneAdd = 0, StrIDTitle = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (prfset_conf_type == PRFSET_MELODY_TYPE_RING || prfset_conf_type == PRFSET_MELODY_TYPE_PHB_RING 
        || prfset_conf_type == PRFSET_MELODY_TYPE_ENGINEERMODE || prfset_conf_type == PRFSET_MELODY_TYPE_VIDEO_CALL
        || prfset_conf_type == PRFSET_MELODY_TYPE_CARD2_RING)
    {
        if (prfset_conf_type == PRFSET_MELODY_TYPE_PHB_RING)
        {
            StrIDToneSet = STR_TONE_SETUP_RING_TONE_PHB_EXT_SET;
            StrIDTitle = STR_ID_PHB_CALLER_RING;
        }
        else if(prfset_conf_type == PRFSET_MELODY_TYPE_VIDEO_CALL)
        {
            StrIDToneSet = STR_TONE_SETUP_VDIEO_RING_TONE_EXT_SET;
            StrIDTitle = STR_PROFILES_VIDEO_RING_TONE_SETUP_CAPTION;            
        }
        else
        {
            StrIDToneSet = STR_TONE_SETUP_RING_TONE_EXT_SET;
        #ifdef __MMI_DUAL_PROFILE_SUPPORT__
            if(prfset_conf_type == PRFSET_MELODY_TYPE_CARD2_RING)
            {
                StrIDTitle = STR_PROFILES_SIM2_RING_TONE_SETUP_CAPTION_DEF;    
            }
            else
        #endif
            StrIDTitle = STR_PROFILES_RING_TONE_SETUP_CAPTION_DEF;
        }
        StrIDToneDel = STR_TONE_SETUP_RING_TONE_EXT_DEL;
        StrIDToneAdd = STR_TONE_SETUP_RING_TONE_EXT_ADD;
    }
#ifndef __MMI_ALM_CUSTOMIZE_TONE__
    else
    {
        StrIDToneSet = STR_TONE_SETUP_ALARM_TONE_EXT_SET;
        StrIDToneDel = STR_TONE_SETUP_ALARM_TONE_EXT_DEL;
        StrIDToneAdd = STR_TONE_SETUP_ALARM_TONE_EXT_ADD;
        StrIDTitle = STR_ALARM_TONE_CAPTION;
    }
#endif /* __MMI_ALM_CUSTOMIZE_TONE__ */ 

    if (PmgIsEmptySlot(g_ext_melody_idx) == MMI_FALSE)
    {
        /* Not Empty Slot */
        nStrItemList[PRF_MENU_EXTMLD_DONE] = (U8*) GetString(StrIDToneSet);
        nStrItemList[PRF_MENU_EXTMLD_DEL] = (U8*) GetString(StrIDToneDel);
        nStrItemList[PRF_MENU_EXTMLD_ADD] = (U8*) GetString(StrIDToneAdd);
        nNumofItem = (U8) PRF_MENU_EXTMLD_MAX;
    }
    else    /* Empty slot, show replace only */
    {
        nStrItemList[0] = (U8*) GetString(StrIDToneAdd);
        nNumofItem = 1;
    }

    EntryNewScreen(MENU_TONE_SETUP_RING_TONE_EXT_MELODY, NULL, mmi_profiles_Ext_melody_entry_menu, NULL);

    guiBuffer = GetCurrGuiBuffer(MENU_TONE_SETUP_RING_TONE_EXT_MELODY);

    RegisterHighlightHandler(mmi_profiles_Ext_melody_hilite_hdlr);

    ShowCategory56Screen(
        StrIDTitle,
        (U16) (prfset_conf_type == PRFSET_MELODY_TYPE_PHB_RING ? IMG_SCR_PBOOK_CAPTION : GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID)),//IMG_PROFILES_TITLEE),
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        (S32) nNumofItem,
        nStrItemList,
        NULL,
        0,
        guiBuffer);

    SetLeftSoftkeyFunction(mmi_profiles_Ext_melody_action_hdlr, KEY_EVENT_UP);
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_UP);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_Ext_melody_set_tone_type
 * DESCRIPTION
 *  for modlues who uese the related apis to set the tone type.
 * PARAMETERS
 *  type        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_Ext_melody_set_tone_type(PRFSET_MELODY_CONF_TYPE type)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    prfset_conf_type = type;
}

#endif /* __MMI_PROFILE_EXTMELODY_SUPPORT__ */ 


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_ring_tone_list_hdlr
 * DESCRIPTION
 *  ring tone list lsk hdlr
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_ring_tone_list_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_set_ring_tone_id_count_id(mmi_profiles_set_ring_tone_id_callback);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_ring_tone_id_count_id
 * DESCRIPTION
 *  Count ring tone id to check which type of incoming call tone it belongs to 
 * PARAMETERS
 *  Func_Callback       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_ring_tone_id_count_id(void (*Func_Callback) (U8, U16))
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 is_ext_melody = MMI_FALSE;
    U16 numOfItem = gtotalRingId + gtotalMidiId;
    U16 ring_id = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (g_profiles_melody_list_index < gtotalRingId)
    {
        ring_id = g_profiles_melody_list_index + gstartRingId;
    }
    else if (g_profiles_melody_list_index < numOfItem)
    {
        ring_id = g_profiles_melody_list_index + gstartMidiId - gtotalRingId;
    }
#if defined(__MMI_PROFILE_EXTMELODY_SUPPORT__)
    else if (g_profiles_melody_list_index < numOfItem + MAXIMUM_EXT_MELODY_NUM)
    {
        g_ext_melody_idx = (U8) (g_profiles_melody_list_index - numOfItem);
        ring_id = (U16) g_ext_melody_idx + PMG_EXT_MELODY_BEGIN;
        is_ext_melody = MMI_TRUE;
    }
#endif /* defined(__MMI_PROFILE_EXTMELODY_SUPPORT__) */ 
    else
    {
    #if defined(__MMI_PROFILE_EXTMELODY_SUPPORT__)
        numOfItem += MAXIMUM_EXT_MELODY_NUM;
    #endif 
    #if defined(__MMI_DOWNLOADABLE_THEMES_SUPPORT__)
        if (g_profiles_melody_list_index == numOfItem)
        {
            DYNAUDIOINFO *download_theme_tones;

            if (GetThemeV2TonesInfo(&download_theme_tones) != 0 && mmi_tm_get_current_theme_ringtone())
            {
                ring_id = (U16) download_theme_tones[0].AudioId;
            }
            else
            {
                ASSERT(0);
            }
        }
    #endif /* defined(__MMI_DOWNLOADABLE_THEMES_SUPPORT__) */ 
    }
    Func_Callback(is_ext_melody, ring_id);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_ring_tone_id_callback
 * DESCRIPTION
 *  set incoming call tone id callback.
 * PARAMETERS
 *  ExtMelodyFlag       [IN]        
 *  ringTone            [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_ring_tone_id_callback(U8 ExtMelodyFlag, U16 ringTone)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#ifdef __MMI_PROFILE_EXTMELODY_SUPPORT__
    if (ExtMelodyFlag == MMI_TRUE)
    {
        prfset_conf_type = PRFSET_MELODY_TYPE_RING;
        mmi_profiles_Ext_melody_entry_menu();
    }
    else
#endif /* __MMI_PROFILE_EXTMELODY_SUPPORT__ */ 
    {
        DisplayPopup(
            (PU8) GetString(STR_GLOBAL_DONE),
            IMG_GLOBAL_ACTIVATED,
            1,
            UI_POPUP_NOTIFYDURATION_TIME,
            SUCCESS_TONE);

        SetRingToneID(ringTone);
        DeleteScreenIfPresent(SCR_PROFILES_RING_TONE_SETUP);
     }
}

#ifdef __MMI_DUAL_PROFILE_SUPPORT__
/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_card2_ring_tone_list
 * DESCRIPTION
 *  Showing profile Card2 Ring Tone Setup Screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_card2_ring_tone_list(void)
{

    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    U8 *guiBuffer;      /* Buffer holding history data */
    U16 nDispAttribute; /* Stores display attribue */
    U16 selecteditem = 0;
    U8 totalItems = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_PROFILES_CARD2_RING_TONE_SETUP,
                   mmi_profiles_exit_card2_ring_tone_list, 
                   mmi_profiles_entry_card2_ring_tone_list, 
                   NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_CARD2_RING_TONE_SETUP);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP_CARD2_RING_TONE);

    /* 3. Retrieve no of child of menu item to be displayed */
    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    totalItems = mmi_profiles_get_melody_list(gprofiles[gprofileId].toneSetup.card2_ringTone, &selecteditem);

    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP_CARD2_RING_TONE);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(mmi_profiles_melody_list_highlight_hdlr);

    /* 8 Display Category Screen */
    ShowCategory89Screen(
        STR_PROFILES_SIM2_RING_TONE_SETUP_CAPTION_DEF,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),
        STR_GLOBAL_OK, 
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK, 
        IMG_GLOBAL_BACK,
        totalItems, 
        subMenuDataPtrs, 
        hintDataPtrs, 
        0, 
        selecteditem, 
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    SetLeftSoftkeyFunction(mmi_profiles_entry_card2_ring_tone_list_hdlr, KEY_EVENT_UP);
    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_card2_ring_tone_list
 * DESCRIPTION
 *  Exit profile Card2 Ring ToneSetup Screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_card2_ring_tone_list(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_preview_stop_tone();
}

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_card2_ring_tone_id_callback
 * DESCRIPTION
 *  set card2 incoming call tone id callback.
 * PARAMETERS
 *  ExtMelodyFlag       [IN]        
 *  ringTone            [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_card2_ring_tone_id_callback(U8 ExtMelodyFlag, U16 ringTone)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#ifdef __MMI_PROFILE_EXTMELODY_SUPPORT__
    if (ExtMelodyFlag == MMI_TRUE)
    {
        prfset_conf_type = PRFSET_MELODY_TYPE_CARD2_RING;
        mmi_profiles_Ext_melody_entry_menu();
    }
    else
#endif /* __MMI_PROFILE_EXTMELODY_SUPPORT__ */ 
    {
        DisplayPopup(
            (PU8) GetString(STR_GLOBAL_DONE),
            IMG_GLOBAL_ACTIVATED,
            1,
            UI_POPUP_NOTIFYDURATION_TIME,
            SUCCESS_TONE);
        
        SetCard2RingToneID(ringTone);
        DeleteScreenIfPresent(SCR_PROFILES_CARD2_RING_TONE_SETUP);
     }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_card2_ring_tone_list_hdlr
 * DESCRIPTION
 *  card2 ring tone list hdlr
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_card2_ring_tone_list_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_set_ring_tone_id_count_id(mmi_profiles_set_card2_ring_tone_id_callback);
}

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_card2_message_tone
 * DESCRIPTION
 *  Entry function for Card2 Message Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_card2_message_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    U8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;             /* Stores no of children in the submenu */
    U16 nDispAttribute;         /* Stores display attribue */
    U8 *guiBuffer;              /* Buffer holding history data */
    U8 i = 0;
    MESSAGE_TONE_ENUM data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_CARD2_MESSAGE_TONE_SETUP, 
                            mmi_profiles_exit_card2_message_tone, 
                            mmi_profiles_entry_card2_message_tone,
                            NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_CARD2_MESSAGE_TONE_SETUP);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = gtotalMiscToneId + 1;

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP_CARD2_MESSAGE_TONE);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    memset((S8*) subMenuDataPtrs[0], 0, MAX_SUB_MENU_SIZE);
    mmi_ucs2ncpy((S8*) subMenuDataPtrs[0], (S8*) GetString(STR_PROFILES_SILENT), MAX_SUBMENU_CHARACTERS);

    for (i = 1; i <= gtotalMiscToneId; i++)
    {
        S32 len = 0;

        memset((S8*) subMenuDataPtrs[i], 0, MAX_SUB_MENU_SIZE);
        sprintf((PS8) AsciinStrItemList, " %d", i);
        mmi_asc_to_ucs2((PS8) UnicodenStrItemList, (PS8) AsciinStrItemList);
        len = mmi_ucs2strlen((PS8) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((S8*) subMenuDataPtrs[i], (S8*) GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((PS8) subMenuDataPtrs[i], (PS8) UnicodenStrItemList);

    }

    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP_CARD2_MESSAGE_TONE);

    /* 7 Register highlight handler to be called in menu screen */

    /* MTK Brian modified for playing message tone, 2003/11/7 */
    RegisterHighlightHandler(GetCurrScreenHandlersix);

    /* 8 Display Category Screen */
    if (gprofiles[gprofileId].toneSetup.card2_messageTone != MESSAGE_SILENT)
    {
        data = (gprofiles[gprofileId].toneSetup.card2_messageTone - gstartMiscToneId) + 1;
    }
    else
    {
        data = 0;
    }

    ShowCategory89Screen(
        STR_SIM2_MESSAGE_TONE_CAPTION_DEF,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        subMenuDataPtrs,
        NULL,
        0,
        (U16) data,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_entry_card2_message_tone_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_card2_message_tone
 * DESCRIPTION
 *  Exit profile Card2 Ring ToneSetup Screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_card2_message_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_preview_stop_tone();
}

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_card2_message_tone_hdlr
 * DESCRIPTION
 *  card2 message tone hdlr
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_card2_message_tone_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    TONE_SETUP tonesetup;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (gcurrHiliteIndexOne == 0)
    {
        tonesetup.card2_messageTone = MESSAGE_SILENT;
    }
    else
    {
        tonesetup.card2_messageTone = (gcurrHiliteIndexOne + gstartMiscToneId) - 1;
    }

    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    SetCard2MessageToneType(tonesetup);
    DeleteScreenIfPresent(SCR_CARD2_MESSAGE_TONE_SETUP);
}
#endif /* __MMI_DUAL_PROFILE_SUPPORT__*/


#ifdef __MMI_VIDEO_TELEPHONY__
/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_video_call_ring_tone_list
 * DESCRIPTION
 *  Showing profile Video Call Ring Tone Setup Screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_video_call_ring_tone_list(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 *guiBuffer;      /* Buffer holding history data */
    U16 nDispAttribute; /* Stores display attribue */
    U16 selecteditem = 0;
    U8 totalItems = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(
        SCR_PROFILES_VIDEO_CALL_RING_TONE_SETUP,
        mmi_profiles_exit_video_call_ring_tone_list,
        mmi_profiles_entry_video_call_ring_tone_list,
        NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_VIDEO_CALL_RING_TONE_SETUP);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP_VIDEO_CALL_RING_TONE);

    /* 3. Retrieve no of child of menu item to be displayed */
    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    totalItems = mmi_profiles_get_melody_list(gprofiles[gprofileId].toneSetup.videoCallTone, &selecteditem);

    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP_VIDEO_CALL_RING_TONE);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(mmi_profiles_melody_list_highlight_hdlr);

    /* 8 Display Category Screen */
    ShowCategory89Screen(
        STR_PROFILES_VIDEO_RING_TONE_SETUP_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        totalItems,
        subMenuDataPtrs,
        hintDataPtrs,
        0,
        selecteditem,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    SetLeftSoftkeyFunction(mmi_profiles_entry_video_call_tone_list_hdlr, KEY_EVENT_UP);
    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_video_call_ring_tone_list
 * DESCRIPTION
 *  Exit profile Video Call Ring ToneSetup Screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_video_call_ring_tone_list(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_preview_stop_tone();
}

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_video_call_tone_list_hdlr
 * DESCRIPTION
 *  Setting video call tone ID.
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_video_call_tone_list_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_set_ring_tone_id_count_id(mmi_profiles_set_video_call_tone_id_callback);
}

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_video_call_tone_id_callback
 * DESCRIPTION
 *  video call tone setup callback after user select a ring tone from list
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_video_call_tone_id_callback(U8 ExtMelodyFlag, U16 videoCallTone)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#ifdef __MMI_PROFILE_EXTMELODY_SUPPORT__
    if (ExtMelodyFlag == MMI_TRUE)
    {
        prfset_conf_type = PRFSET_MELODY_TYPE_VIDEO_CALL;
        mmi_profiles_Ext_melody_entry_menu();
    }
    else
#endif /* __MMI_PROFILE_EXTMELODY_SUPPORT__ */ 
    {
        DisplayPopup(
            (PU8) GetString(STR_GLOBAL_DONE),
            IMG_GLOBAL_ACTIVATED,
            1,
            UI_POPUP_NOTIFYDURATION_TIME,
            SUCCESS_TONE);
        SetVideoCallToneID(videoCallTone);
        DeleteScreenIfPresent(SCR_PROFILES_VIDEO_CALL_RING_TONE_SETUP);                    
    }

}
#endif /*__MMI_VIDEO_TELEPHONY__*/

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_power_on_tone
 * DESCRIPTION
 *  Entry function for Poweron Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_power_on_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    U8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */

    U16 nNumofItem;     /* Stores no of children in the submenu */
    U16 nDispAttribute; /* Stores display attribue */
    U8 *guiBuffer;      /* Buffer holding history data */
    U8 i = 0;
    POWERON_TONE_ENUM data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_POWERON_TONE_SETUP, mmi_profiles_exit_power_on_tone, mmi_profiles_entry_power_on_tone, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_POWERON_TONE_SETUP);

    /* 3. Retrieve no of child of menu item to be displayed */
    /* nNumofItem = GetNumOfChild(MENU_TONE_SETUP_POWERON_TONE); */
    nNumofItem = gtotalGeneralToneId + 1;

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP_POWERON_TONE);

    memset((S8*) subMenuDataPtrs[0], 0, MAX_SUB_MENU_SIZE);
    mmi_ucs2ncpy((S8*) subMenuDataPtrs[0], (S8*) GetString(STR_PROFILES_SILENT), MAX_SUBMENU_CHARACTERS);

    for (i = 1; i <= gtotalGeneralToneId; i++)
    {
        S32 len = 0;

        memset((S8*) subMenuDataPtrs[i], 0, MAX_SUB_MENU_SIZE);
        sprintf((PS8) AsciinStrItemList, " %d", i);
        mmi_asc_to_ucs2((PS8) UnicodenStrItemList, (PS8) AsciinStrItemList);
        len = mmi_ucs2strlen((PS8) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((S8*) subMenuDataPtrs[i], (S8*) GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((PS8) subMenuDataPtrs[i], (PS8) UnicodenStrItemList);

    }
    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP_POWERON_TONE);

    /* 7 Register highlight handler to be called in menu screen */

    RegisterHighlightHandler(GetCurrScreenHandlerfive);

    if (gprofiles[gprofileId].toneSetup.powerOnTone != POWERON_SILENT)
    {
        data = (gprofiles[gprofileId].toneSetup.powerOnTone - gstartGeneralToneId) + 1;
    }
    else
    {
        data = 0;
    }

    /* 8 Display Category Screen */
    ShowCategory89Screen(
        STR_POWERON_TONE_SETUP_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        subMenuDataPtrs,
        NULL,
        0,
        (U16) data,
        guiBuffer);
    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_entry_power_on_tone_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_power_on_tone_hdlr
 * DESCRIPTION
 *  entry power on tone hdlr
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_power_on_tone_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    TONE_SETUP tonesetup;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (gcurrHiliteIndexOne == 0)
    {
        tonesetup.powerOnTone = POWERON_SILENT;
    }
    else
    {
        tonesetup.powerOnTone = (gcurrHiliteIndexOne + gstartGeneralToneId) - 1;
    }

    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    SetPowerOnToneType(tonesetup);
    DeleteScreenIfPresent(SCR_POWERON_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_power_on_tone
 * DESCRIPTION
 *  Exit fucntion for Poweron Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_power_on_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (glastaudioId != POWERON_SILENT);
    mmi_profiles_preview_stop_tone();
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_power_off_tone
 * DESCRIPTION
 *  Entry function for Poweroff Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_power_off_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    U8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;             /* Stores no of children in the submenu */
    U16 nDispAttribute;         /* Stores display attribue */
    U8 *guiBuffer;              /* Buffer holding history data */
    U8 i = 0;
    POWEROFF_TONE_ENUM data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_POWEROFF_TONE_SETUP, mmi_profiles_exit_power_off_tone, mmi_profiles_entry_power_off_tone, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_POWEROFF_TONE_SETUP);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = gtotalGeneralToneId + 1;

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP_POWEROFF_TONE);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    memset((S8*) subMenuDataPtrs[0], 0, MAX_SUB_MENU_SIZE);
    mmi_ucs2ncpy((S8*) subMenuDataPtrs[0], (S8*) GetString(STR_PROFILES_SILENT), MAX_SUBMENU_CHARACTERS);

    for (i = 1; i <= gtotalGeneralToneId; i++)
    {
        S32 len = 0;

        memset((S8*) subMenuDataPtrs[i], 0, MAX_SUB_MENU_SIZE);
        sprintf((PS8) AsciinStrItemList, " %d", i);
        mmi_asc_to_ucs2((PS8) UnicodenStrItemList, (PS8) AsciinStrItemList);
        len = mmi_ucs2strlen((PS8) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((S8*) subMenuDataPtrs[i], (S8*) GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((PS8) subMenuDataPtrs[i], (PS8) UnicodenStrItemList);
    }

    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP_POWEROFF_TONE);

    /* 7 Register highlight handler to be called in menu screen */

    RegisterHighlightHandler(GetCurrScreenHandlerfive);

    /* 8 Display Category Screen */

    if (gprofiles[gprofileId].toneSetup.powerOffTone != POWEROFF_SILENT)
    {
        data = (gprofiles[gprofileId].toneSetup.powerOffTone - gstartGeneralToneId) + 1;
    }
    else
    {
        data = 0;
    }

    ShowCategory89Screen(
        STR_POWEROFF_TONE_SETUP_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        subMenuDataPtrs,
        NULL,
        0,
        (U16) data,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_entry_power_off_tone_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_power_off_tone_hdlr
 * DESCRIPTION
 *  Set PowerOff Tone
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_power_off_tone_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    TONE_SETUP tonesetup;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (gcurrHiliteIndexOne == 0)
    {
        tonesetup.powerOffTone = POWEROFF_SILENT;
    }
    else
    {
        tonesetup.powerOffTone = (gcurrHiliteIndexOne + gstartGeneralToneId) - 1;
    }

    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    SetPowerOffToneType(tonesetup);
    DeleteScreenIfPresent(SCR_POWEROFF_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_power_off_tone
 * DESCRIPTION
 *  Exit functino for Poweron Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_power_off_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (glastaudioId != POWERON_SILENT);
    mmi_profiles_preview_stop_tone();
}

/* MTK brian added to wrap cover open/close tone setup, 2003/10/18 */
#ifdef __MMI_CLAMSHELL__


/*****************************************************************************
 * FUNCTION
 *  HighlightProfilesCoverOpenToneSetup
 * DESCRIPTION
 *  Highlight profile Cover Open Setup menu item
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void HighlightProfilesCoverOpenToneSetup(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_cover_open_tone, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_cover_open_tone, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_cover_open_tone
 * DESCRIPTION
 *  Entry function forCover Open Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_cover_open_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    U8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;             /* Stores no of children in the submenu */
    U16 nDispAttribute;         /* Stores display attribue */
    U8 *guiBuffer;              /* Buffer holding history data */
    U8 i = 0;
    COVER_OPEN_TONE_ENUM data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(
        SCR_COVEROPEN_TONE_SETUP,
        mmi_profiles_exit_cover_open_tone,
        mmi_profiles_entry_cover_open_tone,
        NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_COVEROPEN_TONE_SETUP);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = gtotalGeneralToneId + 1;

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP_COVEROPEN_TONE);

    memset((S8*) subMenuDataPtrs[0], 0, MAX_SUB_MENU_SIZE);
    mmi_ucs2ncpy((S8*) subMenuDataPtrs[0], (S8*) GetString(STR_PROFILES_SILENT), MAX_SUBMENU_CHARACTERS);

    for (i = 1; i <= gtotalGeneralToneId; i++)
    {
        S32 len = 0;

        memset((S8*) subMenuDataPtrs[i], 0, MAX_SUB_MENU_SIZE);
        sprintf((PS8) AsciinStrItemList, " %d", i);
        mmi_asc_to_ucs2((PS8) UnicodenStrItemList, (PS8) AsciinStrItemList);
        len = mmi_ucs2strlen((PS8) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((S8*) subMenuDataPtrs[i], (S8*) GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((PS8) subMenuDataPtrs[i], (PS8) UnicodenStrItemList);
    }

    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP_COVEROPEN_TONE);

    /* 7 Register highlight handler to be called in menu screen */

    RegisterHighlightHandler(GetCurrScreenHandlerfive);

    /* 8 Display Category Screen */
    if (gprofiles[gprofileId].toneSetup.coverOpenTone != COVER_OPEN_SILENT)
    {
        data = (gprofiles[gprofileId].toneSetup.coverOpenTone - gstartGeneralToneId) + 1;
    }
    else
    {
        data = 0;
    }

    ShowCategory89Screen(
        STR_COVEROPEN_TONE_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        subMenuDataPtrs,
        NULL,
        0,
        (U16) data,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_entry_cover_open_tone_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_cover_open_tone_hdlr
 * DESCRIPTION
 *  set cover open tone hdlr
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_cover_open_tone_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    TONE_SETUP tonesetup;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (gcurrHiliteIndexOne == 0)
    {
        tonesetup.coverOpenTone = COVER_OPEN_SILENT;
    }
    else
    {
        tonesetup.coverOpenTone = (gcurrHiliteIndexOne + gstartGeneralToneId) - 1;
    }

    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    SetCoverOpenToneType(tonesetup);
    DeleteScreenIfPresent(SCR_COVEROPEN_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_cover_open_tone
 * DESCRIPTION
 *  Exit function for Cover Open Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_cover_open_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (glastaudioId != POWERON_SILENT);
    mmi_profiles_preview_stop_tone();
}


/*****************************************************************************
 * FUNCTION
 *  HighlightProfilesCoverCloseToneSetup
 * DESCRIPTION
 *  Highlight profile Cover Close Setup menu item
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void HighlightProfilesCoverCloseToneSetup(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_cover_close_tone, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_cover_close_tone, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_cover_close_tone
 * DESCRIPTION
 *  Entry function for Cover Close Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_cover_close_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    U8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;             /* Stores no of children in the submenu */
    U16 nDispAttribute;         /* Stores display attribue */
    U8 *guiBuffer;              /* Buffer holding history data */
    U8 i = 0;
    COVER_CLOSE_TONE_ENUM data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(
        SCR_COVERCLOSE_TONE_SETUP,
        mmi_profiles_exit_cover_close_tone,
        mmi_profiles_entry_cover_close_tone,
        NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_COVERCLOSE_TONE_SETUP);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = gtotalGeneralToneId + 1;

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP_COVERCLOSE_TONE);

    memset((S8*) subMenuDataPtrs[0], 0, MAX_SUB_MENU_SIZE);
    mmi_ucs2ncpy((S8*) subMenuDataPtrs[0], (S8*) GetString(STR_PROFILES_SILENT), MAX_SUBMENU_CHARACTERS);

    for (i = 1; i <= gtotalGeneralToneId; i++)
    {
        S32 len = 0;

        memset((S8*) subMenuDataPtrs[i], 0, MAX_SUB_MENU_SIZE);
        sprintf((PS8) AsciinStrItemList, " %d", i);
        mmi_asc_to_ucs2((PS8) UnicodenStrItemList, (PS8) AsciinStrItemList);
        len = mmi_ucs2strlen((PS8) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((S8*) subMenuDataPtrs[i], (S8*) GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((PS8) subMenuDataPtrs[i], (PS8) UnicodenStrItemList);
    }

    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP_COVERCLOSE_TONE);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(GetCurrScreenHandlerfive);

    /* 8 Display Category Screen */
    if (gprofiles[gprofileId].toneSetup.coverCloseTone != COVER_CLOSE_SILENT)
    {
        data = (gprofiles[gprofileId].toneSetup.coverCloseTone - gstartGeneralToneId) + 1;
    }
    else
    {
        data = 0;
    }

    ShowCategory89Screen(
        STR_COVERCLOSE_TONE_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        subMenuDataPtrs,
        NULL,
        0,
        (U16) data,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_entry_cover_close_tone_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_cover_close_tone_hdlr
 * DESCRIPTION
 *  set cover close tone hdlr
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_cover_close_tone_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    TONE_SETUP tonesetup;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (gcurrHiliteIndexOne == 0)
    {
        tonesetup.coverCloseTone = COVER_CLOSE_SILENT;
    }
    else
    {
        tonesetup.coverCloseTone = (gcurrHiliteIndexOne + gstartGeneralToneId) - 1;
    }

    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    SetCoverCloseToneType(tonesetup);
    DeleteScreenIfPresent(SCR_COVERCLOSE_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_cover_close_tone
 * DESCRIPTION
 *  Exit function for Cover Close Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_cover_close_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (glastaudioId != POWERON_SILENT);
    mmi_profiles_preview_stop_tone();
}
#endif /* __MMI_CLAMSHELL__ */ 


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_message_tone
 * DESCRIPTION
 *  Entry function for Message Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_message_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    U8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;             /* Stores no of children in the submenu */
    U16 nDispAttribute;         /* Stores display attribue */
    U8 *guiBuffer;              /* Buffer holding history data */
    U8 i = 0;
    MESSAGE_TONE_ENUM data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_MESSAGE_TONE_SETUP, mmi_profiles_exit_message_tone, mmi_profiles_entry_message_tone, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_MESSAGE_TONE_SETUP);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = gtotalMiscToneId + 1;

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP_MESSAGE_TONE);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    memset((S8*) subMenuDataPtrs[0], 0, MAX_SUB_MENU_SIZE);
    mmi_ucs2ncpy((S8*) subMenuDataPtrs[0], (S8*) GetString(STR_PROFILES_SILENT), MAX_SUBMENU_CHARACTERS);

    for (i = 1; i <= gtotalMiscToneId; i++)
    {
        S32 len = 0;

        memset((S8*) subMenuDataPtrs[i], 0, MAX_SUB_MENU_SIZE);
        sprintf((PS8) AsciinStrItemList, " %d", i);
        mmi_asc_to_ucs2((PS8) UnicodenStrItemList, (PS8) AsciinStrItemList);
        len = mmi_ucs2strlen((PS8) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((S8*) subMenuDataPtrs[i], (S8*) GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((PS8) subMenuDataPtrs[i], (PS8) UnicodenStrItemList);

    }

    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP_MESSAGE_TONE);

    /* 7 Register highlight handler to be called in menu screen */

    /* MTK Brian modified for playing message tone, 2003/11/7 */
    RegisterHighlightHandler(GetCurrScreenHandlersix);

    /* 8 Display Category Screen */
    if (gprofiles[gprofileId].toneSetup.messageTone != MESSAGE_SILENT)
    {
        data = (gprofiles[gprofileId].toneSetup.messageTone - gstartMiscToneId) + 1;
    }
    else
    {
        data = 0;
    }

    ShowCategory89Screen(
        STR_MESSAGE_TONE_CAPTION_DEF,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        subMenuDataPtrs,
        NULL,
        0,
        (U16) data,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_entry_message_tone_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_message_tone_hdlr
 * DESCRIPTION
 *  set message tone hdlr
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_message_tone_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    TONE_SETUP tonesetup;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (gcurrHiliteIndexOne == 0)
    {
        tonesetup.messageTone = MESSAGE_SILENT;
    }
    else
    {
        tonesetup.messageTone = (gcurrHiliteIndexOne + gstartMiscToneId) - 1;
    }

    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    SetMessageToneType(tonesetup);
    DeleteScreenIfPresent(SCR_MESSAGE_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_message_tone
 * DESCRIPTION
 *  Exit function for Message Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_message_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (glastaudioId != POWERON_SILENT);
    mmi_profiles_preview_stop_tone();
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_keypad_tone
 * DESCRIPTION
 *  Entry function for Keypad Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_keypad_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[15];   /* Stores the strings id of submenus returned */
    U16 nNumofItem;         /* Stores no of children in the submenu */
    U16 nDispAttribute;     /* Stores display attribue */
    U8 *guiBuffer;          /* Buffer holding history data */
    KEYPAD_TONE_ENUM data = 0;
    U8 i = 0;
    U16 ProfileMenuID;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_KEYPAD_TONE_SETUP, NULL, mmi_profiles_entry_keypad_tone, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_KEYPAD_TONE_SETUP);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(MENU_TONE_SETUP_KEYPAD_TONE);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP_KEYPAD_TONE);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(MENU_TONE_SETUP_KEYPAD_TONE, nStrItemList);

    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP_KEYPAD_TONE);

    /* 7 Register highlight handler to be called in menu screen */

    /* 8 Display Category Screen */
    i = gprofiles[gprofileId].toneSetup.keypadTone;
    switch (i)
    {
        case KEYPAD_SILENT:
            ProfileMenuID = MENU_KEYPAD_TONE_SILENT;
            break;
        case KEYPAD_CLICK:
            ProfileMenuID = MENU_KEYPAD_TONE_CLICK;
            break;
        case KEYPAD_TONE:
            ProfileMenuID = MENU_KEYPAD_TONE_TONE;
            break;
    #if defined(__MMI_HUMAN_VOICE_KEYPAD_TONE__)
        case KEYPAD_TONE_HUMAN_VOICE_1:
            ProfileMenuID = MENU_KEYPAD_TONE_HUMAN_VOICE_1;
            break;
        case KEYPAD_TONE_HUMAN_VOICE_2:
            ProfileMenuID = MENU_KEYPAD_TONE_HUMAN_VOICE_2;
            break;
        case KEYPAD_TONE_HUMAN_VOICE_3:
            ProfileMenuID = MENU_KEYPAD_TONE_HUMAN_VOICE_3;
            break;
        case KEYPAD_TONE_HUMAN_VOICE_4:
            ProfileMenuID = MENU_KEYPAD_TONE_HUMAN_VOICE_4;
            break;
        case KEYPAD_TONE_HUMAN_VOICE_5:
            ProfileMenuID = MENU_KEYPAD_TONE_HUMAN_VOICE_5;
            break;
        case KEYPAD_TONE_HUMAN_VOICE_6:
            ProfileMenuID = MENU_KEYPAD_TONE_HUMAN_VOICE_6;
            break;
    #endif /* defined(__MMI_HUMAN_VOICE_KEYPAD_TONE__) */ 
    #if defined(__MMI_CUST_KEYPAD_TONE__)
        case KEYPAD_TONE_CUST_1:
            ProfileMenuID = MENU_KEYPAD_TONE_CUST_1;
            break;
        case KEYPAD_TONE_CUST_2:
            ProfileMenuID = MENU_KEYPAD_TONE_CUST_2;
            break;
        case KEYPAD_TONE_CUST_3:
            ProfileMenuID = MENU_KEYPAD_TONE_CUST_3;
            break;
        case KEYPAD_TONE_CUST_4:
            ProfileMenuID = MENU_KEYPAD_TONE_CUST_4;
            break;
        case KEYPAD_TONE_CUST_5:
            ProfileMenuID = MENU_KEYPAD_TONE_CUST_5;
            break;
        case KEYPAD_TONE_CUST_6:
            ProfileMenuID = MENU_KEYPAD_TONE_CUST_6;
            break;
    #endif /* defined(__MMI_CUST_KEYPAD_TONE__) */ 
        default:
            ProfileMenuID = 0;
            break;
    }
    data = GetIndexOfStringId(MENU_TONE_SETUP_KEYPAD_TONE, ProfileMenuID);

    RegisterHighlightHandler(ExecuteCurrHiliteHandler);

    ShowCategory11Screen(
        STR_KEYPAD_TONE_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        0,
        STR_GLOBAL_BACK,
        0,
        nNumofItem,
        nStrItemList,
        (U16) data,
        guiBuffer);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_silent_hdlr
 * DESCRIPTION
 *  set keypad tone as Silent
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_silent_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_SILENT);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_click_hdlr
 * DESCRIPTION
 *  set keypad tone as Click
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_click_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_CLICK);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_tone_hdlr
 * DESCRIPTION
 *  set keypad tone as Tone
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_tone_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}

#if defined(__MMI_HUMAN_VOICE_KEYPAD_TONE__)


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_human1_hdlr
 * DESCRIPTION
 *  set keypad tone as human voice 1
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_human1_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_HUMAN_VOICE_1);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_human2_hdlr
 * DESCRIPTION
 *  set keypad tone as human voice 2
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_human2_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_HUMAN_VOICE_2);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_human3_hdlr
 * DESCRIPTION
 *  set keypad tone as human voice 3
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_human3_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_HUMAN_VOICE_3);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_human4_hdlr
 * DESCRIPTION
 *  set keypad tone as human voice 4
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_human4_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_HUMAN_VOICE_4);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_human5_hdlr
 * DESCRIPTION
 *  set keypad tone as human voice 5
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_human5_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_HUMAN_VOICE_5);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_human6_hdlr
 * DESCRIPTION
 *  set keypad tone as human voice 6
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_human6_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_HUMAN_VOICE_6);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}
#endif /* defined(__MMI_HUMAN_VOICE_KEYPAD_TONE__) */ 

#if defined(__MMI_CUST_KEYPAD_TONE__)


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_cust1_hdlr
 * DESCRIPTION
 *  set keypad tone as customer keypad tone 1
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_cust1_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_CUST_1);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_cust2_hdlr
 * DESCRIPTION
 *  set keypad tone as customer keypad tone 2
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_cust2_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_CUST_2);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_cust3_hdlr
 * DESCRIPTION
 *  set keypad tone as customer keypad tone 3
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_cust3_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_CUST_3);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_cust4_hdlr
 * DESCRIPTION
 *  set keypad tone as customer keypad tone 4
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_cust4_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_CUST_4);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_cust5_hdlr
 * DESCRIPTION
 *  set keypad tone as customer keypad tone 5
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_cust5_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_CUST_5);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_key_pad_tone_cust6_hdlr
 * DESCRIPTION
 *  set keypad tone as customer keypad tone 6
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_key_pad_tone_cust6_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetKeypadToneType(KEYPAD_TONE_CUST_6);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_KEYPAD_TONE_SETUP);
}
#endif /* defined(__MMI_CUST_KEYPAD_TONE__) */ 

#ifndef __MMI_ALM_CUSTOMIZE_TONE__


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_alarm_tone
 * DESCRIPTION
 *  Entry function for Alarm Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_alarm_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 *guiBuffer;      /* Buffer holding history data */
    U16 nDispAttribute; /* Stores display attribue */
    U16 selecteditem = 0;
    U8 totalItems = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_ALARM_TONE_SETUP, mmi_profiles_exit_alarm_tone, mmi_profiles_entry_alarm_tone, NULL);

    gcurrHiliteIndexOne = 0;

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_ALARM_TONE_SETUP);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_TONE_SETUP_ALARM_TONE);

    /* 3. Retrieve no of child of menu item to be displayed */
    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    totalItems = mmi_profiles_get_melody_list(gprofiles[gprofileId].toneSetup.alarmTone, &selecteditem);

    /* 6 Set current parent id */
    SetParentHandler(MENU_TONE_SETUP_ALARM_TONE);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(mmi_profiles_melody_list_highlight_hdlr);

    /* 8 Display Category Screen */
    ShowCategory89Screen(
        STR_ALARM_TONE_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        totalItems,
        subMenuDataPtrs,
        hintDataPtrs,
        0,
        selecteditem,
        guiBuffer);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_entry_alarm_tone_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_alarm_tone_hdlr
 * DESCRIPTION
 *  Set Alarm Tone
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_alarm_tone_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 is_ext_melody = MMI_FALSE;
    U16 numOfItem = gtotalRingId + gtotalMidiId;
    U16 ring_id = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (g_profiles_melody_list_index < gtotalRingId)
    {
        ring_id = g_profiles_melody_list_index + gstartRingId;
    }
    else if (g_profiles_melody_list_index < numOfItem)
    {
        ring_id = g_profiles_melody_list_index + gstartMidiId - gtotalRingId;
    }
#if defined(__MMI_PROFILE_EXTMELODY_SUPPORT__)
    else if (g_profiles_melody_list_index < numOfItem + MAXIMUM_EXT_MELODY_NUM)
    {
        g_ext_melody_idx = (U8) (g_profiles_melody_list_index - numOfItem);
        ring_id = (U16) g_ext_melody_idx + PMG_EXT_MELODY_BEGIN;
        is_ext_melody = MMI_TRUE;
    }
#endif /* defined(__MMI_PROFILE_EXTMELODY_SUPPORT__) */ 
    else
    {
    #if defined(__MMI_PROFILE_EXTMELODY_SUPPORT__)
        numOfItem += MAXIMUM_EXT_MELODY_NUM;
    #endif 
    #if defined(__MMI_DOWNLOADABLE_THEMES_SUPPORT__)
        if (g_profiles_melody_list_index == numOfItem)
        {
            DYNAUDIOINFO *download_theme_tones;

            if (GetThemeV2TonesInfo(&download_theme_tones) != 0 && mmi_tm_get_current_theme_ringtone())
            {
                ring_id = (U16) download_theme_tones[0].AudioId;
            }
            else
            {
                ASSERT(0);
            }
        }
    #endif /* defined(__MMI_DOWNLOADABLE_THEMES_SUPPORT__) */ 
    }
#if defined(__MMI_PROFILE_EXTMELODY_SUPPORT__)
    if (is_ext_melody == MMI_TRUE)
    {
        prfset_conf_type = PRFSET_MELODY_TYPE_ALARM;
        mmi_profiles_Ext_melody_entry_menu();
    }
    else
#endif /* defined(__MMI_PROFILE_EXTMELODY_SUPPORT__) */ 
    {
        DisplayPopup(
            (PU8) GetString(STR_GLOBAL_DONE),
            IMG_GLOBAL_ACTIVATED,
            1,
            UI_POPUP_NOTIFYDURATION_TIME,
            SUCCESS_TONE);
        SetAlarmToneID(ring_id);
        DeleteScreenIfPresent(SCR_ALARM_TONE_SETUP);
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_exit_alarm_tone
 * DESCRIPTION
 *  Exit function for Alarm Tone Setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_exit_alarm_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_preview_stop_tone();
}
#endif /* __MMI_ALM_CUSTOMIZE_TONE__ */ 


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_extra_tone
 * DESCRIPTION
 *  Showing profile Extra Tone Setup Screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_extra_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[15];   /* Stores the strings id of submenus returned */
    U16 nNumofItem;         /* Stores no of children in the submenu */
    U16 nDispAttribute;     /* Stores display attribue */
    U8 i = 0;
    U8 *guiBuffer;          /* Buffer holding history data */

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_EXTRA_TONE_SETUP, NULL, mmi_profiles_entry_extra_tone, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_EXTRA_TONE_SETUP);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(MENU_EXTRA_TONE);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_EXTRA_TONE);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(MENU_EXTRA_TONE, nStrItemList);

    for (i = 0; i < nNumofItem; i++)
    {
        memset((S8*) subMenuDataPtrs[i], 0, MAX_SUB_MENU_SIZE);
        mmi_ucs2ncpy((S8*) subMenuDataPtrs[i], GetString(nStrItemList[i]), MAX_SUBMENU_CHARACTERS);

    }

    /* 6 Set current parent id */
    SetParentHandler(MENU_EXTRA_TONE);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(ExecuteCurrHiliteHandler);

    fieldStatesExtraTone[0] = (U8) gprofiles[gprofileId].extraTone.warningTone;
    fieldStatesExtraTone[1] = (U8) gprofiles[gprofileId].extraTone.errorTone;
    fieldStatesExtraTone[2] = (U8) gprofiles[gprofileId].extraTone.campOnTone;
    fieldStatesExtraTone[3] = (U8) gprofiles[gprofileId].extraTone.connectTone;

    SetCheckboxToggleRightSoftkeyFunctions(mmi_profiles_set_extra_tone_query_popup, GoBackHistory);

    /* 8 Display Category Screen */
    ShowCategory140Screen(
        STR_EXTRA_TONE_CAPTION,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        nNumofItem,
        (U8 **) subMenuDataPtrs,
        fieldStatesExtraTone,
        0,
        guiBuffer);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_extra_tone_hdlr
 * DESCRIPTION
 *  set extra tone hdlr
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_extra_tone_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    EXTRA_TONE extraTone;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    extraTone.warningTone = gprofiles[gprofileId].extraTone.warningTone = fieldStatesExtraTone[0];
    extraTone.errorTone = gprofiles[gprofileId].extraTone.errorTone = fieldStatesExtraTone[1];
    extraTone.campOnTone = gprofiles[gprofileId].extraTone.campOnTone = fieldStatesExtraTone[2];
    extraTone.connectTone = gprofiles[gprofileId].extraTone.connectTone = fieldStatesExtraTone[3];

    SetExtraTone(extraTone);

    /* DisplayPopupCheckBox((PU8)GetString(STR_GLOBAL_DONE) ,IMG_GLOBAL_ACTIVATED, 1,UI_POPUP_NOTIFYDURATION_TIME,SUCCESS_TONE); */

    DisplayPopup((PU8) GetString(STR_GLOBAL_SAVED), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_EXTRA_TONE_SETUP);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_extra_tone_query_popup
 * DESCRIPTION
 *  set the call back functios for Extra tone query popup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_extra_tone_query_popup(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_profiles_set_query_popup(mmi_profiles_entry_extra_tone_hdlr, ProfileGoBack2History);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_preview_play_tone
 * DESCRIPTION
 *  preview tone
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_preview_play_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    StopTimer(TIMER_PROFILES_TONE_PLAY);
    glastaudioId = gcurrentaudioId;

    if (!IsSilentModeActivated() && !isInCall())    /* need to check if it's in call because phonebook use this function, too */
    {
    #ifdef __MMI_SILENT_MEETING_PROFILE__
        if (!IsMeetingModeActivated())
        {
            AudioPlayReq(gcurrentaudioId, (U8) DEVICE_AUDIO_PLAY_INFINITE);
        }
        else
        {
            glastaudioId = 0 ;
        }
    #else
            AudioPlayReq(gcurrentaudioId, (U8) DEVICE_AUDIO_PLAY_INFINITE);
    #endif 
    }
    else
    {
        /*reset to 0 so that mmi_profiles_preview_stop_tone will not try to stop the un-plyaed tone*/
        glastaudioId = 0 ;
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_preview_stop_tone
 * DESCRIPTION
 *  stop preview tone
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_preview_stop_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    StopTimer(TIMER_PROFILES_TONE_PLAY);
    if (!isInCall()) /* need to check if it's in call because phonebook use this function, too */
    {
        if (glastaudioId != 0)
        {
            AudioStopReq(glastaudioId);
        }
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_show_alert_status_icon
 * DESCRIPTION
 *  show/switch alert status icon
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_show_alert_status_icon(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    static S16 currentStatusIcon;

    /* MTK Brian added for wrap sublcd display, 2003/10/18 */
#ifdef __MMI_SUBLCD__
    static S16 currentStatusSubLcdIcon;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (currentStatusSubLcdIcon != 0)
    {
        HideStatusIcon(currentStatusSubLcdIcon);
    }
#endif /* __MMI_SUBLCD__ */ 

    if (currentStatusIcon != 0)
    {
        HideStatusIcon(currentStatusIcon);
    }

    switch (gcurrentprofile.mtCallAlertTypeEnum)
    {
        case MMI_RING:
            currentStatusIcon = STATUS_ICON_RING;
            ShowStatusIcon(STATUS_ICON_RING);
        #ifdef __MMI_SUBLCD__
            currentStatusSubLcdIcon = STATUS_ICON_SUBLCD_RING;
            ShowStatusIcon(STATUS_ICON_SUBLCD_RING);
        #endif /* __MMI_SUBLCD__ */ 
            break;
        case MMI_VIBRATION_ONLY:
            currentStatusIcon = STATUS_ICON_VIBRATION;
            ShowStatusIcon(STATUS_ICON_VIBRATION);
        #ifdef __MMI_SUBLCD__
            currentStatusSubLcdIcon = STATUS_ICON_SUBLCD_VIBRATE;
            ShowStatusIcon(STATUS_ICON_SUBLCD_VIBRATE);
        #endif /* __MMI_SUBLCD__ */ 
            break;
        case MMI_VIBRATION_AND_RING:
            currentStatusIcon = STATUS_ICON_VIBRATE_AND_RING;
            ShowStatusIcon(STATUS_ICON_VIBRATE_AND_RING);
        #ifdef __MMI_SUBLCD__
            currentStatusSubLcdIcon = STATUS_ICON_SUBLCD_VIBRATE_AND_RING;
            ShowStatusIcon(STATUS_ICON_SUBLCD_VIBRATE_AND_RING);
        #endif /* __MMI_SUBLCD__ */ 
            break;
        case MMI_VIBRATION_THEN_RING:
            currentStatusIcon = STATUS_ICON_VIBRATE_THEN_RING;
            ShowStatusIcon(STATUS_ICON_VIBRATE_THEN_RING);
        #ifdef __MMI_SUBLCD__
            currentStatusSubLcdIcon = STATUS_ICON_SUBLCD_VIBRATE_THEN_RING;
            ShowStatusIcon(STATUS_ICON_SUBLCD_VIBRATE_THEN_RING);
        #endif /* __MMI_SUBLCD__ */ 
            break;
        case MMI_SILENT:
            currentStatusIcon = STATUS_ICON_SILENT;
            ShowStatusIcon(STATUS_ICON_SILENT);
        #ifdef __MMI_SUBLCD__
            currentStatusSubLcdIcon = STATUS_ICON_SUBLCD_SILENT;
            ShowStatusIcon(STATUS_ICON_SUBLCD_SILENT);
        #endif /* __MMI_SUBLCD__ */ 
            break;
        default:
            currentStatusIcon = STATUS_ICON_RING;
            ShowStatusIcon(STATUS_ICON_RING);
        #ifdef __MMI_SUBLCD__
            currentStatusSubLcdIcon = STATUS_ICON_SUBLCD_RING;
            ShowStatusIcon(STATUS_ICON_SUBLCD_RING);
        #endif /* __MMI_SUBLCD__ */ 
            break;
    }
    UpdateStatusIcons();
}


/*****************************************************************************
 * FUNCTION
 *  ReturnRequiredNumberImageId
 * DESCRIPTION
 *  
 * PARAMETERS
 *  imageId     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
U16 ReturnRequiredNumberImageId(U8 imageId)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    PRINT_INFORMATION("\n@@@@@ [.c] ReturnRequiredImageId @@@@@");

    switch (imageId + 1)
    {
        case 1:
            return IMG_GLOBAL_L1;
            break;
        case 2:
            return IMG_GLOBAL_L2;
            break;
        case 3:
            return IMG_GLOBAL_L3;
            break;
        case 4:
            return IMG_GLOBAL_L4;
            break;
        case 5:
            return IMG_GLOBAL_L5;
            break;
        case 6:
            return IMG_GLOBAL_L6;
            break;
        case 7:
            return IMG_GLOBAL_L7;
            break;
        case 8:
            return IMG_GLOBAL_L8;
            break;
        case 9:
            return IMG_GLOBAL_L9;
            break;
        case 10:
            return IMG_GLOBAL_L10;
            break;
        case 11:
            return IMG_GLOBAL_L11;
            break;
        case 12:
            return IMG_GLOBAL_L12;
            break;
        case 13:
            return IMG_GLOBAL_L13;
            break;
        case 14:
            return IMG_GLOBAL_L14;
            break;
        case 15:
            return IMG_GLOBAL_L15;
            break;
        case 16:
            return IMG_GLOBAL_L16;
            break;
        case 17:
            return IMG_GLOBAL_L17;
            break;
        case 18:
            return IMG_GLOBAL_L18;
            break;
        case 19:
            return IMG_GLOBAL_L19;
            break;
        case 20:
            return IMG_GLOBAL_L20;
            break;
        case 21:
            return IMG_GLOBAL_L21;
            break;
        case 22:
            return IMG_GLOBAL_L22;
            break;
        case 23:
            return IMG_GLOBAL_L23;
            break;
        case 24:
            return IMG_GLOBAL_L24;
            break;
        case 25:
            return IMG_GLOBAL_L25;
            break;
        case 26:
            return IMG_GLOBAL_L26;
            break;
        case 27:
            return IMG_GLOBAL_L27;
            break;
        case 28:
            return IMG_GLOBAL_L28;
            break;
        case 29:
            return IMG_GLOBAL_L29;
            break;
        case 30:
            return IMG_GLOBAL_L30;
            break;
        default:
            return IMG_GLOBAL_QUESTION;
            break;
    }
}

/**************************************************/
/*          General Functions                     */
/**************************************************/


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_preview_play_color_id
 * DESCRIPTION
 *  preview color id
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_preview_play_color_id(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    glastColorID = gcurrentColorId;
    PlayPatternCallerGroup(gcurrentColorId);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_preview_stop_color_id
 * DESCRIPTION
 *  stop color id
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_preview_stop_color_id(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    StopTimer(TIMER_PROFILES_TONE_PLAY);
    if (glastColorID)
    {
        StopPatternCallerGroup(glastColorID);
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_get_dynamic_tone_ids
 * DESCRIPTION
 *  get dynamic tone ids
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_get_dynamic_tone_ids(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    GetRingToneRange((PU8) & gstartRingId, (PU8) & gtotalRingId);
    GetMidiRange((PU8) & gstartMidiId, (PU8) & gtotalMidiId);
    GetToneRange((PU8) & gstartGeneralToneId, (PU8) & gtotalGeneralToneId);
    GetMiscToneRange((PU8) & gstartMiscToneId, (PU8) & gtotalMiscToneId);
    
#ifdef __MMI_PROFILE_EXTMELODY_SUPPORT__
    PmgGetExtMelodyRange(&gstartExtMelodyId, &gtotalExtMelodyId);
#endif 

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_query_popup
 * DESCRIPTION
 *  General Pop Up function for Query screens of profiles
 * PARAMETERS
 *  fn_lsk      [IN]        
 *  fn_rsk      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_query_popup(void (*fn_lsk) (void), void (*fn_rsk) (void))
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gfnprofilelsk = fn_lsk;
    gfnprofilersk = fn_rsk;
    mmi_profiles_entry_query_popup();
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_query_popup
 * DESCRIPTION
 *  entry function of query screen
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_query_popup(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    DisplayConfirm(
        STR_GLOBAL_YES,
        IMG_GLOBAL_YES,
        STR_GLOBAL_NO,
        IMG_GLOBAL_NO,
        get_string(STR_PROFILES_SAVE_ASK),
        IMG_GLOBAL_QUESTION,
        WARNING_TONE);

    SetLeftSoftkeyFunction(gfnprofilelsk, KEY_EVENT_UP);
    SetRightSoftkeyFunction(gfnprofilersk, KEY_EVENT_UP);

}

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_melody_list_highlight_hdlr
 * DESCRIPTION
 *  Getting Current Screen Handler
 * PARAMETERS
 *  item_index          [IN]        
 *  index_index(?)      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_melody_list_highlight_hdlr(S32 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    BOOL play_it = TRUE;
    U16 numOfItem = gtotalRingId + gtotalMidiId;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    g_profiles_melody_list_index = (U16) item_index;

    mmi_profiles_preview_stop_tone();

    if (g_profiles_melody_list_index < gtotalRingId)
    {
        gcurrentaudioId = g_profiles_melody_list_index + gstartRingId;
    }
    else if (g_profiles_melody_list_index < numOfItem)
    {
        gcurrentaudioId = g_profiles_melody_list_index + gstartMidiId - gtotalRingId;
    }
#if defined(__MMI_PROFILE_EXTMELODY_SUPPORT__)
    else if (g_profiles_melody_list_index < numOfItem + MAXIMUM_EXT_MELODY_NUM)
    {
        g_ext_melody_idx = (U8) (g_profiles_melody_list_index - numOfItem);
        gcurrentaudioId = (U16) g_ext_melody_idx + PMG_EXT_MELODY_BEGIN;
    }
#endif /* defined(__MMI_PROFILE_EXTMELODY_SUPPORT__) */ 
    else
    {
    #if defined(__MMI_PROFILE_EXTMELODY_SUPPORT__)
        numOfItem += MAXIMUM_EXT_MELODY_NUM;
    #endif 
    #if defined(__MMI_DOWNLOADABLE_THEMES_SUPPORT__)
        if (g_profiles_melody_list_index == numOfItem)
        {
            DYNAUDIOINFO *download_theme_tones;

            if (GetThemeV2TonesInfo(&download_theme_tones) != 0 && mmi_tm_get_current_theme_ringtone())
            {
                gcurrentaudioId = (U16) download_theme_tones[0].AudioId;
                if (AudioFileDeletedFromFmgr(gcurrentaudioId))
                {
                    play_it = FALSE;
                }
            }
            else
            {
                ASSERT(0);
            }
        }
    #endif /* defined(__MMI_DOWNLOADABLE_THEMES_SUPPORT__) */ 
    }
    if (play_it)
    {
        StartTimer(TIMER_PROFILES_TONE_PLAY, 1000, mmi_profiles_preview_play_tone);
    }
}


/*****************************************************************************
 * FUNCTION
 *  GetCurrScreenHandlerfour
 * DESCRIPTION
 *  Getting Current Screen Handler
 * PARAMETERS
 *  item_index      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void GetCurrScreenHandlerfour(S32 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gcurrHiliteIndexOne = item_index;
    mmi_profiles_preview_stop_color_id();
    if (gcurrHiliteIndexOne)
    {
        gcurrentColorId = (MMI_LEDLIGHT_STATUS_ENUM) gcurrHiliteIndexOne;
        StartTimer(TIMER_PROFILES_TONE_PLAY, 1000, mmi_profiles_preview_play_color_id);
    }
}


/*****************************************************************************
 * FUNCTION
 *  GetCurrScreenHandlerfive
 * DESCRIPTION
 *  Getting Current Screen Handler
 * PARAMETERS
 *  item_index      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void GetCurrScreenHandlerfive(S32 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gcurrHiliteIndexOne = item_index;

    if (glastaudioId > 0)
    {
        mmi_profiles_preview_stop_tone();
    }

    if (gcurrHiliteIndexOne == 0)
    {
        gcurrentaudioId = 0;
        glastaudioId = gcurrentaudioId;
        /* MTK Brian added for stop timer in case of 0-->0, 2003/11/18 */
        StopTimer(TIMER_PROFILES_TONE_PLAY);
    }
    else
    {
        gcurrentaudioId = gcurrHiliteIndexOne + gstartGeneralToneId - 1;
        StartTimer(TIMER_PROFILES_TONE_PLAY, 1000, mmi_profiles_preview_play_tone);
    }
}

/* MTK Brian added for playing message tone, 2003/11/7 */


/*****************************************************************************
 * FUNCTION
 *  GetCurrScreenHandlersix
 * DESCRIPTION
 *  Getting Current Screen Handler
 * PARAMETERS
 *  item_index      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void GetCurrScreenHandlersix(S32 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gcurrHiliteIndexOne = item_index;

    if (glastaudioId > 0)
    {
        mmi_profiles_preview_stop_tone();
    }

    if (gcurrHiliteIndexOne == 0)
    {
        gcurrentaudioId = 0;
        glastaudioId = gcurrentaudioId;
        /* MTK Brian added for stop timer in case of 0-->0, 2003/11/18 */
        StopTimer(TIMER_PROFILES_TONE_PLAY);
    }
    else
    {
        gcurrentaudioId = gcurrHiliteIndexOne + gstartMiscToneId - 1;
        StartTimer(TIMER_PROFILES_TONE_PLAY, 1000, mmi_profiles_preview_play_tone);
    }
}

/* MTK end */

#if defined(__MMI_INTELLIGENT_CALL_ALERT__)


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_entry_intelligent_call_alert
 * DESCRIPTION
 *  entry function for intelligent call alert
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_entry_intelligent_call_alert(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 nStrItemList[MAX_SUB_MENUS];    /* Stores the strings id of submenus returned */
    U16 nNumofItem;                     /* Stores no of children in the submenu */
    U16 nDispAttribute;                 /* Stores display attribue */
    U8 *guiBuffer;                      /* Buffer holding history data */
    S8 i = 0;

    /* U8* PopUpList[MAX_SUB_MENUS]; */
    MMI_INTELLIGENT_CALL_ALERT_TYPE data = 0;
    U16 ProfileMenuID[] = {MENU_INTELLIGENT_CALL_ALERT_OFF, MENU_INTELLIGENT_CALL_ALERT_ON};

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Call Exit Handler */
    EntryNewScreen(SCR_PROFILES_INTELLIGENT_CALL_ALERT, NULL, mmi_profiles_entry_intelligent_call_alert, NULL);

    /* 2 Get current screen to gui buffer  for history purposes */
    guiBuffer = GetCurrGuiBuffer(SCR_PROFILES_INTELLIGENT_CALL_ALERT);

    /* 3. Retrieve no of child of menu item to be displayed */
    nNumofItem = GetNumOfChild(MENU_INTELLIGENT_CALL_ALERT);

    /* 4. Get attribute of menu to be displayed */
    nDispAttribute = GetDispAttributeOfItem(MENU_INTELLIGENT_CALL_ALERT);

    /* 5. Retrieve string ids in sequence of given menu item to be displayed */
    GetSequenceStringIds(MENU_INTELLIGENT_CALL_ALERT, nStrItemList);

    /* 6 Set current parent id */
    SetParentHandler(MENU_INTELLIGENT_CALL_ALERT);

    /* 7 Register highlight handler to be called in menu screen */
    RegisterHighlightHandler(ExecuteCurrHiliteHandler);

    i = gprofiles[gprofileId].intelligentCallAlert;
    data = GetIndexOfStringId(MENU_INTELLIGENT_CALL_ALERT, ProfileMenuID[i]);

    /* 8 Display Category Screen */
    ShowCategory11Screen(
        STR_PROFILES_INTELLIGENT_CALL_ALERT,
        GetRootTitleIcon(MAIN_MENU_PROFILES_MENUID),//IMG_PROFILES_TITLEE,
        STR_GLOBAL_OK,
        IMG_GLOBAL_OK,
        STR_GLOBAL_BACK,
        IMG_GLOBAL_BACK,
        nNumofItem,
        nStrItemList,
        (U16) data,
        guiBuffer);
}
#endif /* defined(__MMI_INTELLIGENT_CALL_ALERT__) */ 

/*********************************************************
*
*
*           For Hint Handlers
*
*
**********************************************************/


/*****************************************************************************
 * FUNCTION
 *  HandleMelodyHintFunc
 * DESCRIPTION
 *  Hint handlers for Incoming call / Alarm tone
 * PARAMETERS
 *  ToneID      [IN]        
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void HandleMelodyHintFunc(U16 ToneID, U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 data = 0;

#ifdef __MMI_PROFILE_EXTMELODY_SUPPORT__
    DYNEXTMELODYINFO *ExtMelodyStruct;
#endif 
#ifdef __MMI_DOWNLOADABLE_THEMES_SUPPORT__
    DYNAUDIOINFO *DownloadThemeTones;
#endif 

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (ToneID >= gstartRingId && ToneID < gstartRingId + gtotalRingId)
    {
        mmi_ucs2cpy((S8*) hintData[index], GetString((U16) (STR_PROFILES_RING_1 + ToneID - gstartRingId)));
    }
    else if (ToneID >= gstartMidiId && ToneID < gstartMidiId + gtotalMidiId)
    {
        mmi_ucs2cpy((S8*) hintData[index], GetString((U16) (STR_PROFILES_MIDI_1 + ToneID - gstartMidiId)));
    }
    else
    {
        BOOL selected = FALSE;

    #if defined(__MMI_PROFILE_EXTMELODY_SUPPORT__)
        PmgGetExtMelodyInfo(&ExtMelodyStruct);
        for (data = 0; data < MAXIMUM_EXT_MELODY_NUM; data++)
        {
            if (PmgIsEmptySlot(data) == MMI_FALSE && ToneID == ExtMelodyStruct->info[data].id)
            {
                if (IS_EXTMELODY_SHORTNAME(ExtMelodyStruct->info[data].filepath))
                {
                    mmi_chset_mixed_text_to_ucs2_str(
                        hintData[(index)],
                        (FMGR_MAX_FILE_LEN + 1) * ENCODING_LENGTH,
                        (U8*) ExtMelodyStruct->info[data].filename,
                        g_chset_text_encoding);
                }
                else
                {
                    mmi_ucs2cpy((PS8) hintData[(index)], (PS8) (ExtMelodyStruct->info[data].filename));
                }
            #if (!defined(__MMI_SHOW_FILE_EXT__))
                PmgRemoveFileExt((S8*) hintData[(index)]);
            #elif (!defined(__MMI_SHOW_DAF_FILE_EXT__))
                PmgRemoveFileDAFExt((S8*) hintData[(index)]);
            #endif 
                selected = TRUE;
                break;
            }
        }
    #endif /* defined(__MMI_PROFILE_EXTMELODY_SUPPORT__) */ 
    #ifdef __MMI_DOWNLOADABLE_THEMES_SUPPORT__
        if (!selected)
        {
            DYNAUDIOINFO *download_theme_tones;

            if (GetThemeV2TonesInfo(&download_theme_tones) != 0 && mmi_tm_get_current_theme_ringtone())
            {
                if (ToneID == (U16) download_theme_tones[0].AudioId)
                {
                    mmi_ucs2cpy((PS8) hintData[(index)], GetString((U16) STR_PROFILES_CURR_THEME));
                    selected = TRUE;
                }
            }
        }
    #endif /* __MMI_DOWNLOADABLE_THEMES_SUPPORT__ */ 
    if(!selected)
    {
        /*when there is no mapping selected item, assgin midi1 to both ring tone and alarm tone*/
        gprofiles[gprofileId].toneSetup.ringTone = gstartMidiId ;
        gprofiles[gprofileId].toneSetup.alarmTone = gstartMidiId ;
        mmi_ucs2cpy((S8*) hintData[index], GetString((U16) (STR_PROFILES_MIDI_1)));
    }
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_incoming_call
 * DESCRIPTION
 *  Hint handlers for incoming call tone
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_incoming_call(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    HandleMelodyHintFunc(gprofiles[gprofileId].toneSetup.ringTone, index);
}

#ifdef __MMI_DUAL_PROFILE_SUPPORT__
/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_card2_incoming_call
 * DESCRIPTION
 *  Hint handlers for card2 incoming call tone
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_card2_incoming_call(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    HandleMelodyHintFunc(gprofiles[gprofileId].toneSetup.card2_ringTone, index);
}
#endif

#ifdef __MMI_VIDEO_TELEPHONY__
/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_video_call
 * DESCRIPTION
 *  Hint handlers for video call tone
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_video_call(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    HandleMelodyHintFunc(gprofiles[gprofileId].toneSetup.videoCallTone, index);
}
#endif

#ifndef __MMI_ALM_CUSTOMIZE_TONE__

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_alarm_tone
 * DESCRIPTION
 *  Hint handler for alarm tone
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_alarm_tone(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    HandleMelodyHintFunc(gprofiles[gprofileId].toneSetup.alarmTone, index);
}

#endif /* __MMI_ALM_CUSTOMIZE_TONE__ */ 


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_power_on_tone
 * DESCRIPTION
 *  Hint handler for power on tone
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_power_on_tone(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    U8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */
    U8 data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
    if ((gprofiles[gprofileId].toneSetup.powerOnTone) != POWERON_SILENT)
    {
        S32 len = 0;

        data = ((gprofiles[gprofileId].toneSetup.powerOnTone) - (gstartGeneralToneId));
        memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
        sprintf((PS8) AsciinStrItemList, " %d", data + 1);
        mmi_asc_to_ucs2((PS8) UnicodenStrItemList, (PS8) AsciinStrItemList);
        len = mmi_ucs2strlen((PS8) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((S8*) hintData[(index)], (PS8) UnicodenStrItemList);
    }
    else
    {
        mmi_ucs2ncpy((S8*) hintData[(index)], (S8*) GetString(STR_PROFILES_SILENT), MAX_SUBMENU_CHARACTERS);
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_power_off_tone
 * DESCRIPTION
 *  Hint handler for power off tone
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_power_off_tone(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    U8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */
    U8 data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
    if ((gprofiles[gprofileId].toneSetup.powerOffTone) != POWEROFF_SILENT)
    {
        S32 len = 0;

        data = ((gprofiles[gprofileId].toneSetup.powerOffTone) - (gstartGeneralToneId));
        memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
        sprintf((PS8) AsciinStrItemList, " %d", data + 1);
        mmi_asc_to_ucs2((PS8) UnicodenStrItemList, (PS8) AsciinStrItemList);
        len = mmi_ucs2strlen((PS8) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((S8*) hintData[(index)], (PS8) UnicodenStrItemList);
    }
    else
    {
        mmi_ucs2ncpy((S8*) hintData[(index)], (S8*) GetString(STR_PROFILES_SILENT), MAX_SUBMENU_CHARACTERS);
    }
}

/* MTK brian added to wrap cover open/close tone setup, 2003/10/18 */
#ifdef __MMI_CLAMSHELL__


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_cover_open_tone
 * DESCRIPTION
 *  Hint handler for cover open tone
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_cover_open_tone(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    U8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */
    U8 data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
    if ((gprofiles[gprofileId].toneSetup.coverOpenTone) != COVER_OPEN_SILENT)
    {
        S32 len = 0;

        data = ((gprofiles[gprofileId].toneSetup.coverOpenTone) - (gstartGeneralToneId));
        memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
        sprintf((PS8) AsciinStrItemList, " %d", data + 1);
        mmi_asc_to_ucs2((PS8) UnicodenStrItemList, (PS8) AsciinStrItemList);
        len = mmi_ucs2strlen((PS8) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((S8*) hintData[(index)], (PS8) UnicodenStrItemList);
    }
    else
    {
        mmi_ucs2ncpy((S8*) hintData[(index)], (S8*) GetString(STR_PROFILES_SILENT), MAX_SUBMENU_CHARACTERS);
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_cover_close_tone
 * DESCRIPTION
 *  Hint handler for cover close
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_cover_close_tone(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    U8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */
    U8 data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
    if ((gprofiles[gprofileId].toneSetup.coverCloseTone) != COVER_CLOSE_SILENT)
    {
        S32 len = 0;

        data = ((gprofiles[gprofileId].toneSetup.coverCloseTone) - (gstartGeneralToneId));
        memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
        sprintf((PS8) AsciinStrItemList, " %d", data + 1);
        mmi_asc_to_ucs2((PS8) UnicodenStrItemList, (PS8) AsciinStrItemList);
        len = mmi_ucs2strlen((PS8) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((S8*) hintData[(index)], (PS8) UnicodenStrItemList);
    }
    else
    {
        mmi_ucs2ncpy((S8*) hintData[(index)], (S8*) GetString(STR_PROFILES_SILENT), MAX_SUBMENU_CHARACTERS);
    }
}
#endif /* __MMI_CLAMSHELL__ */ 
/* MTK end */


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_message_tone
 * DESCRIPTION
 *  Hint handler for message tone
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_message_tone(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    U8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */
    U8 data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
    if ((gprofiles[gprofileId].toneSetup.messageTone) != MESSAGE_SILENT)
    {
        S32 len = 0;

        data = ((gprofiles[gprofileId].toneSetup.messageTone) - (gstartMiscToneId));
        memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
        sprintf((PS8) AsciinStrItemList, " %d", data + 1);
        mmi_asc_to_ucs2((PS8) UnicodenStrItemList, (PS8) AsciinStrItemList);
        len = mmi_ucs2strlen((PS8) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((S8*) hintData[(index)], (PS8) UnicodenStrItemList);
    }
    else
    {
        mmi_ucs2ncpy((S8*) hintData[(index)], (S8*) GetString(STR_PROFILES_SILENT), MAX_SUBMENU_CHARACTERS);
    }
}

#ifdef __MMI_DUAL_PROFILE_SUPPORT__
/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_card2_message_tone
 * DESCRIPTION
 *  Hint handler for card2 message tone
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_card2_message_tone(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    MTPNP_UINT8 UnicodenStrItemList[10]; /* Stores the strings id of submenus returned */
    MTPNP_UINT8 AsciinStrItemList[4];    /* Stores the strings id of submenus returned */
    MTPNP_UINT8 data = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MTPNP_OSAL_memset((MTPNP_CHAR *) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
    
    if ((gprofiles[gprofileId].toneSetup.card2_messageTone) != MESSAGE_SILENT)
    {
        MTPNP_INT32 len = 0;
        data = ((gprofiles[gprofileId].toneSetup.card2_messageTone) - (gstartMiscToneId));
        MTPNP_OSAL_memset((S8 *) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
        sprintf((MTPNP_CHAR *) AsciinStrItemList, " %d", data + 1);
        mmi_asc_to_ucs2((MTPNP_CHAR *) UnicodenStrItemList, (MTPNP_CHAR *) AsciinStrItemList);
        len = mmi_ucs2strlen((MTPNP_CHAR *) UnicodenStrItemList);
        len = MAX_SUBMENU_CHARACTERS - len;
        mmi_ucs2ncpy((MTPNP_CHAR *) hintData[(index)], GetString(STR_PROFILES_TONE), MAX_SUBMENU_CHARACTERS);
        mmi_ucs2cat((MTPNP_CHAR *) hintData[(index)], (MTPNP_CHAR *) UnicodenStrItemList);
    }
    else
    {
        mmi_ucs2ncpy((MTPNP_CHAR *) hintData[(index)], (MTPNP_CHAR *) GetString(STR_PROFILES_SILENT),
                    MAX_SUBMENU_CHARACTERS);
    }
}
#endif

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_key_pad_tone
 * DESCRIPTION
 *  Hint handler for keypad tone
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_key_pad_tone(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
    switch (gprofiles[gprofileId].toneSetup.keypadTone)
    {
        case KEYPAD_SILENT:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_KEYPAD_TONE_SILENT), MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_CLICK:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_KEYPAD_TONE_CLICK), MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_TONE:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_KEYPAD_TONE_TONE), MAX_SUBMENU_CHARACTERS);
            break;
    #if defined(__MMI_HUMAN_VOICE_KEYPAD_TONE__)
        case KEYPAD_TONE_HUMAN_VOICE_1:
            mmi_ucs2ncpy(
                (PS8) hintData[(index)],
                GetString(STR_KEYPAD_TONE_HUMAN_VOICE_1),
                MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_TONE_HUMAN_VOICE_2:
            mmi_ucs2ncpy(
                (PS8) hintData[(index)],
                GetString(STR_KEYPAD_TONE_HUMAN_VOICE_2),
                MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_TONE_HUMAN_VOICE_3:
            mmi_ucs2ncpy(
                (PS8) hintData[(index)],
                GetString(STR_KEYPAD_TONE_HUMAN_VOICE_3),
                MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_TONE_HUMAN_VOICE_4:
            mmi_ucs2ncpy(
                (PS8) hintData[(index)],
                GetString(STR_KEYPAD_TONE_HUMAN_VOICE_4),
                MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_TONE_HUMAN_VOICE_5:
            mmi_ucs2ncpy(
                (PS8) hintData[(index)],
                GetString(STR_KEYPAD_TONE_HUMAN_VOICE_5),
                MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_TONE_HUMAN_VOICE_6:
            mmi_ucs2ncpy(
                (PS8) hintData[(index)],
                GetString(STR_KEYPAD_TONE_HUMAN_VOICE_6),
                MAX_SUBMENU_CHARACTERS);
            break;
    #endif /* defined(__MMI_HUMAN_VOICE_KEYPAD_TONE__) */ 
    #if defined(__MMI_CUST_KEYPAD_TONE__)
        case KEYPAD_TONE_CUST_1:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_KEYPAD_TONE_CUST_1), MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_TONE_CUST_2:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_KEYPAD_TONE_CUST_2), MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_TONE_CUST_3:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_KEYPAD_TONE_CUST_3), MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_TONE_CUST_4:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_KEYPAD_TONE_CUST_4), MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_TONE_CUST_5:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_KEYPAD_TONE_CUST_5), MAX_SUBMENU_CHARACTERS);
            break;
        case KEYPAD_TONE_CUST_6:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_KEYPAD_TONE_CUST_6), MAX_SUBMENU_CHARACTERS);
            break;
    #endif /* defined(__MMI_CUST_KEYPAD_TONE__) */ 
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_alert_type
 * DESCRIPTION
 *  Hint handler for alert type
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_alert_type(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
    if (gprofiles[gprofileId].mtCallAlertTypeEnum == MMI_RING)
    {
        mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_RING), MAX_SUBMENU_CHARACTERS);
    }
    else if (gprofiles[gprofileId].mtCallAlertTypeEnum == MMI_VIBRATION_ONLY)
    {
        mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_VIBRATION_ONLY), MAX_SUBMENU_CHARACTERS);
    }
    else if (gprofiles[gprofileId].mtCallAlertTypeEnum == MMI_VIBRATION_AND_RING)
    {
        mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_VIBRATION_AND_RING), MAX_SUBMENU_CHARACTERS);
    }
    else if (gprofiles[gprofileId].mtCallAlertTypeEnum == MMI_VIBRATION_THEN_RING)
    {
        mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_VIBRATION_THEN_RING), MAX_SUBMENU_CHARACTERS);
    }
    else
    {
        mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_SILENT), MAX_SUBMENU_CHARACTERS);
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_ring_type
 * DESCRIPTION
 *  Hint handler for ring type
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_ring_type(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
    switch (gprofiles[gprofileId].ringTypeEnum)
    {
        case SINGLE:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_RING_TYPE_SINGLE), MAX_SUBMENU_CHARACTERS);
            break;
        case REPEAT:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_RING_TYPE_REPEAT), MAX_SUBMENU_CHARACTERS);
            break;
        case ASCENDING:
            mmi_ucs2ncpy((PS8) hintData[(index)], GetString(STR_RING_TYPE_ASCENDNG), MAX_SUBMENU_CHARACTERS);
            break;
    }
}

#ifdef __MMI_CONNECT_NOTICE__


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_connect_notice
 * DESCRIPTION
 *  Hint handler for connect notice
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_connect_notice(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
    mmi_ucs2ncpy(
        (PS8) hintData[(index)],
        GetString(STR_NOTICE_NONE + gprofiles[gprofileId].extraTone.connectTone),
        MAX_SUBMENU_CHARACTERS);
}
#endif /* __MMI_CONNECT_NOTICE__ */ 


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_ring_tone_volume
 * DESCRIPTION
 *  Hint handler for ring volume
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_ring_tone_volume(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 value[MAX_SUB_MENU_HINT_SIZE];

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    sprintf((S8*) value, "%d", (gprofiles[gprofileId].ringVolumeLevel + 1));
#ifdef __UCS2_ENCODING
    mmi_asc_to_ucs2((PS8) hintData[(index)], (PS8) value);
#else 
    mmi_ucs2cpy((S8*) hintData[index], (S8*) value);
#endif 
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_key_tone_volume
 * DESCRIPTION
 *  Hint handler for key tone volume
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_key_tone_volume(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 value[MAX_SUB_MENU_HINT_SIZE];

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    sprintf((S8*) value, "%d", (gprofiles[gprofileId].keypadVolumeLevel + 1));
#ifdef __UCS2_ENCODING
    mmi_asc_to_ucs2((PS8) hintData[(index)], (PS8) value);
#else 
    mmi_ucs2cpy((S8*) hintData[index], (S8*) value);
#endif 
}


/*****************************************************************************
 * FUNCTION
 *  HintHandlerLCDBacklight
 * DESCRIPTION
 *  Hint handlers for LCD BackLight
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void HintHandlerLCDBacklight(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 value[MAX_SUB_MENU_HINT_SIZE];

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    sprintf((S8*) value, "%d", gprofiles[gprofileId].light.timer.setsec);
#ifdef __UCS2_ENCODING
    mmi_asc_to_ucs2((PS8) hintData[(index)], (PS8) value);
#else 
    mmi_ucs2cpy((S8*) hintData[index], (S8*) value);
#endif 
}

#if !defined(HARDWARE_LED_NOT_SUPPORT)


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_status_LED
 * DESCRIPTION
 *  Hint handler for status LED
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_status_LED(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);

    switch (gprofiles[gprofileId].light.status)
    {

        case NO_COLOR:
            mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_LIGHT_STATUS_NONE), MAX_SUBMENU_CHARACTERS);
            break;
        case COLOR_PATTERN1:
            mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_LIGHT_STATUS_COLOR1), MAX_SUBMENU_CHARACTERS);
            break;
        case COLOR_PATTERN2:
            mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_LIGHT_STATUS_COLOR2), MAX_SUBMENU_CHARACTERS);
            break;
        case COLOR_PATTERN3:
            mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_LIGHT_STATUS_COLOR3), MAX_SUBMENU_CHARACTERS);
            break;
        case COLOR_PATTERN4:
            mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_LIGHT_STATUS_COLOR4), MAX_SUBMENU_CHARACTERS);
            break;
        case COLOR_PATTERN5:
            mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_LIGHT_STATUS_COLOR5), MAX_SUBMENU_CHARACTERS);
            break;
        case COLOR_PATTERN6:
            mmi_ucs2ncpy((S8*) hintData[(index)], GetString(STR_LIGHT_STATUS_COLOR6), MAX_SUBMENU_CHARACTERS);
            break;
    }
}
#endif /* HARDWARE_LED_NOT_SUPPORT */ 

/************************************HighLight Handlers***************************/


/*****************************************************************************
 * FUNCTION
 *  HighlightProfiles
 * DESCRIPTION
 *  Highlight profile menu item
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void HighlightProfiles(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OPTIONS, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_main_screen, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_main_screen, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_general_mode
 * DESCRIPTION
 *  Highlight handler for general mode
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_general_mode(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gcurrHiliteIndexOne = MMI_PROFILE_GENERAL;

    /* Register function for left soft key */
#ifdef __MMI_PROF_MENU_ACTIVE_SHRINK__
    SetLeftSoftkeyFunction(mmi_profiles_entry_customize, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_customize, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#else /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
    SetLeftSoftkeyFunction(mmi_profiles_entry_options, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_options, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#endif /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_meeting_mode
 * DESCRIPTION
 *  Highlight handler for meeting mode
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_meeting_mode(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gcurrHiliteIndexOne = MMI_PROFILE_MEETING;

    /* Register function for left soft key */
#ifdef __MMI_PROF_MENU_ACTIVE_SHRINK__
    SetLeftSoftkeyFunction(mmi_profiles_entry_customize, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_customize, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#else /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
    SetLeftSoftkeyFunction(mmi_profiles_entry_options, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_options, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#endif /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_outdoor_mode
 * DESCRIPTION
 *  Highlight handler for outdoor mode
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_outdoor_mode(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gcurrHiliteIndexOne = MMI_PROFILE_OUTDOOR;

    /* Register function for left soft key */
#ifdef __MMI_PROF_MENU_ACTIVE_SHRINK__
    SetLeftSoftkeyFunction(mmi_profiles_entry_customize, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_customize, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#else /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
    SetLeftSoftkeyFunction(mmi_profiles_entry_options, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_options, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#endif /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_indoor_mode
 * DESCRIPTION
 *  Highlight handler for indoor mode
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_indoor_mode(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gcurrHiliteIndexOne = MMI_PROFILE_INDOOR;

    /* Register function for left soft key */
#ifdef __MMI_PROF_MENU_ACTIVE_SHRINK__
    SetLeftSoftkeyFunction(mmi_profiles_entry_customize, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_customize, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#else /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
    SetLeftSoftkeyFunction(mmi_profiles_entry_options, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_options, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#endif /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_headset_mode
 * DESCRIPTION
 *  Highlight handler for headset mode
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_headset_mode(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gcurrHiliteIndexOne = MMI_PROFILE_HEADSET;

    /* Register function for left soft key */
#ifdef __MMI_PROF_MENU_ACTIVE_SHRINK__
    SetLeftSoftkeyFunction(mmi_profiles_entry_customize, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_customize, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#else /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
    SetLeftSoftkeyFunction(mmi_profiles_entry_options, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_options, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#endif /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
}

#ifdef __MMI_BT_PROFILE__


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_bt_mode
 * DESCRIPTION
 *  Highlight handler for bt mode
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_bt_mode(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    gcurrHiliteIndexOne = MMI_PROFILE_BT;

    /* Register function for left soft key */
#ifdef __MMI_PROF_MENU_ACTIVE_SHRINK__
    SetLeftSoftkeyFunction(mmi_profiles_entry_customize, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_customize, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#else /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
    SetLeftSoftkeyFunction(mmi_profiles_entry_options, KEY_EVENT_UP);
    SetKeyHandler(mmi_profiles_entry_options, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
#endif /* __MMI_PROF_MENU_ACTIVE_SHRINK__ */ 
}
#endif /* __MMI_BT_PROFILE__ */ /* MMI_BT_PROFILE__ */


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_options
 * DESCRIPTION
 *  Highlight handler for options
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_options(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_activate
 * DESCRIPTION
 *  Highlight handler for activate
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_activate(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_activate_profile, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    /* MTK added, Max: to clear key handler 1221 */
    ClearKeyHandler(KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
    /* MTK end */

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_customize
 * DESCRIPTION
 *  Highlight handler for customize
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_customize(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_customize, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_customize, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_volume
 * DESCRIPTION
 *  Highlight handler for volume
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_volume(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_volume_type, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_volume_type, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_alert_type
 * DESCRIPTION
 *  Highlight handler for alert type
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_alert_type(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_alert_type, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_alert_type, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_ring_type
 * DESCRIPTION
 *  Highlight handler for ring type
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_ring_type(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_ring_type, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_ring_type, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_answering_mode
 * DESCRIPTION
 *  Highlight handler for answering mode
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_answering_mode(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_answering_mode, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_answering_mode, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}


#if !defined(HARDWARE_LED_NOT_SUPPORT)

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_status_LED
 * DESCRIPTION
 *  Highlight handler for status LED
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_status_LED(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_status_LED, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_status_LED, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}
#endif /* HARDWARE_LED_NOT_SUPPORT */ 


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_tone_setup
 * DESCRIPTION
 *  Highlight handler for tone setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_tone_setup(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_tone_setup, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_tone_setup, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_ring_tone
 * DESCRIPTION
 *  Highlight handler for ring tone setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_ring_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_ring_tone_list, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_ring_tone_list, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}

#ifdef __MMI_DUAL_PROFILE_SUPPORT__
/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_card2_ring_tone
 * DESCRIPTION
 *  Highlight handler for card2 ring tone setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_card2_ring_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    /*1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /*2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /*3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_card2_ring_tone_list, KEY_EVENT_UP);

    /*4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_card2_ring_tone_list, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}
#endif

#ifdef __MMI_VIDEO_TELEPHONY__
/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hldr_video_call_tone
 * DESCRIPTION
 *   Highlight handler for video call ring tone setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hldr_video_call_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_video_call_ring_tone_list, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_video_call_ring_tone_list, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}
#endif

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_power_on_tone
 * DESCRIPTION
 *  Highlight handler for power on tone setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_power_on_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_power_on_tone, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_power_on_tone, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_power_off_tone
 * DESCRIPTION
 *  Highlight handler for power off tone setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_power_off_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_power_off_tone, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_power_off_tone, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_message_tone
 * DESCRIPTION
 *  Highlight handler for message tone setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_message_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_message_tone, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_message_tone, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}


#ifdef __MMI_DUAL_PROFILE_SUPPORT__
/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_card2_message_tone
 * DESCRIPTION
 *  Highlight handler for card2 message tone setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_card2_message_tone(void)
{
    /*1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /*2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /*3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_card2_message_tone, KEY_EVENT_UP);

    /*4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_card2_message_tone, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}
#endif

/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_tone_setup
 * DESCRIPTION
 *  Highlight handler for keypad tone setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_tone_setup(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_keypad_tone, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_keypad_tone, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}

#ifndef __MMI_ALM_CUSTOMIZE_TONE__


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_alarm_tone
 * DESCRIPTION
 *  Highlight handler for alarm tone setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_alarm_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_alarm_tone, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_alarm_tone, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}
#endif /* __MMI_ALM_CUSTOMIZE_TONE__ */ 


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_extra_tone
 * DESCRIPTION
 *  Highlight handler for extra tone setup
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_extra_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_extra_tone, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_extra_tone, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_ring_tone_volume
 * DESCRIPTION
 *  Highlight handler ring tone volume
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_ring_tone_volume(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* PMT SUKRIT START 20051226 */
#ifdef __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__
    if (!is_level_select_menuitem_displayed_in_volume_screen)
    {
#endif /* __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__ */ 
        /* 1 Change left soft key icon and label */
        ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

        /* 2 Change right soft key icon and label */
        ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

        /* 3 Register function for left soft key */
        SetLeftSoftkeyFunction(EntryScrProfilesCommonVolumeLevel1, KEY_EVENT_UP);

        /* 4 Register function for right soft key */
        SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

        SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

        SetKeyHandler(EntryScrProfilesCommonVolumeLevel1, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
        gcommonvolumehandler = 0;
    #ifdef __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__
    }
    else
    {
        ChangeLeftSoftkey(0, 0);
        SetRingerVolume(default_value_ring_volume);
        mdi_audio_stop_all();   /* use stop all because it might be play file or play id */
        AudioPlayToneWithCallBackVolPath(
            gstartMidiId,
            REPEAT,
            INCOMING_CALL_TONE,
            (U8) default_value_ring_volume,
            MDI_DEVICE_SPEAKER2);
        mmi_profiles_set_ring_tone_playing(TRUE);
        /* MTK Brian added for play ring tone after MT message, 2003/11/10 */
        SetProtocolEventHandler(ContinueRingTone_TwoLine, PRT_EQ_PLAY_AUDIO_FINISH_IND);
        SetLeftSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
        SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    }
    #endif /* __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__ */ 
    /* PMT SUKRIT START 20051226 */
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_tone_volume
 * DESCRIPTION
 *  Highlight handler ring tone volume
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_tone_volume(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* PMT SUKRIT START 20051226 */
#ifdef __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__
    if (!is_level_select_menuitem_displayed_in_volume_screen)
    {
#endif /* __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__ */ 
        /* 1 Change left soft key icon and label */
        ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

        /* 2 Change right soft key icon and label */
        ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

        /* 3 Register function for left soft key */
        SetLeftSoftkeyFunction(EntryScrProfilesCommonVolumeLevel1, KEY_EVENT_UP);

        /* 4 Register function for right soft key */
        SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

        SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

        SetKeyHandler(EntryScrProfilesCommonVolumeLevel1, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
        gcommonvolumehandler = 1;
    #ifdef __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__
    }
    else
    {
        ChangeLeftSoftkey(0, 0);
        SetKeyPadVolume(default_value_keypad_volume);
        AudioStopReq((U16) gprofiles[gprofileId].toneSetup.keypadTone);
        SetLeftSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
        SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    }
    #endif /* __MMI_PROFILES_TWO_LINE_MENUITEM_DISPLAY__ */ 
    /* PMT SUKRIT END 20051226 */
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_alert_type_ring
 * DESCRIPTION
 *  Hightlight handler for alert type ring
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_alert_type_ring(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_set_alert_type_ring_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_alert_type_vib_only
 * DESCRIPTION
 *  Hightlight handler for alert type vibration only
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_alert_type_vib_only(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_set_alert_type_vib_only_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_alert_type_vib_and_ring
 * DESCRIPTION
 *  Hightlight handler for alert type vibration and ring
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_alert_type_vib_and_ring(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_set_alert_type_vib_and_ring_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_alert_type_vib_then_ring
 * DESCRIPTION
 *  Hightlight handler for alert type vibration then ring
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_alert_type_vib_then_ring(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_set_alert_type_vib_then_ring_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_alert_type_light_only
 * DESCRIPTION
 *  Hightlight handler for alert type light only
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_alert_type_light_only(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_set_alert_type_light_only_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_ring_type_single
 * DESCRIPTION
 *  Highlight handler for ring type single
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_ring_type_single(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_set_ring_type_single_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_ring_type_repeat
 * DESCRIPTION
 *  Highlight handler for ring type repeat
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_ring_type_repeat(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_set_ring_type_repeat_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_ring_type_ascending
 * DESCRIPTION
 *  Highlight handler for ring type ascending
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_ring_type_ascending(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetLeftSoftkeyFunction(mmi_profiles_set_ring_type_ascending_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_silent
 * DESCRIPTION
 *  Highlight handler for keypad tone silent
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_silent(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_silent_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_click
 * DESCRIPTION
 *  Highlight handler keypad tone click
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_click(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_click_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_tone
 * DESCRIPTION
 *  Highlight handler keypad tone tone
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_tone(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_tone_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}

#if defined(__MMI_HUMAN_VOICE_KEYPAD_TONE__)


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_human1
 * DESCRIPTION
 *  Highlight handler keypad tone human voice 1
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_human1(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_human1_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_human2
 * DESCRIPTION
 *  Highlight handler keypad tone human voice 2
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_human2(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_human2_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_human3
 * DESCRIPTION
 *  Highlight handler keypad tone human voice 3
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_human3(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_human3_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_human4
 * DESCRIPTION
 *  Highlight handler keypad tone human voice 4
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_human4(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_human4_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_human5
 * DESCRIPTION
 *  Highlight handler keypad tone human voice 5
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_human5(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_human5_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_human6
 * DESCRIPTION
 *  Highlight handler keypad tone human voice 6
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_human6(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_human6_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}
#endif /* defined(__MMI_HUMAN_VOICE_KEYPAD_TONE__) */ 

#if defined(__MMI_CUST_KEYPAD_TONE__)


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_cust1
 * DESCRIPTION
 *  Highlight handler keypad tone cust 1
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_cust1(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_cust1_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_cust2
 * DESCRIPTION
 *  Highlight handler keypad tone cust 2
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_cust2(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_cust2_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_cust3
 * DESCRIPTION
 *  Highlight handler keypad tone cust 3
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_cust3(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_cust3_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_cust4
 * DESCRIPTION
 *  Highlight handler keypad tone cust 4
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_cust4(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_cust4_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_cust5
 * DESCRIPTION
 *  Highlight handler keypad tone cust 5
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_cust5(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_cust5_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_key_pad_cust6
 * DESCRIPTION
 *  Highlight handler keypad tone cust 6
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_key_pad_cust6(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_key_pad_tone_cust6_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}
#endif /* defined(__MMI_CUST_KEYPAD_TONE__) */ 

#ifdef __MMI_CONNECT_NOTICE__


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_connect_notice
 * DESCRIPTION
 *  Highlight handler for connect notice
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_connect_notice(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 3 Register function for left soft key */
    SetLeftSoftkeyFunction(mmi_profiles_entry_connect_notice, KEY_EVENT_UP);

    /* 4 Register function for right soft key */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

    SetKeyHandler(mmi_profiles_entry_connect_notice, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_connect_notice_none
 * DESCRIPTION
 *  Highlight handler for connect notice none
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_connect_notice_none(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_connect_notice_none_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_connect_notice_tone_only
 * DESCRIPTION
 *  Highlight handler for connect notice tone only
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_connect_notice_tone_only(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_connect_notice_tone_only_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_connect_notice_vib_only
 * DESCRIPTION
 *  Highlight handler for connect notice vibration only
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_connect_notice_vib_only(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_connect_notice_vib_only_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_connect_notice_tone_and_vib
 * DESCRIPTION
 *  Highlight handler for connect notice tone and vibration
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_connect_notice_tone_and_vib(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* 1 Change left soft key icon and label */
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);

    /* 2 Change right soft key icon and label */
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);

    /* 9.Register function with right softkey */
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    /* 10.Register function with Left softkey */
    SetLeftSoftkeyFunction(mmi_profiles_set_connect_notice_tone_and_vib_hdlr, KEY_EVENT_UP);

    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);

}
#endif /* __MMI_CONNECT_NOTICE__ */ 

#if defined(__MMI_INTELLIGENT_CALL_ALERT__)


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_intelligent_call_alert
 * DESCRIPTION
 *  Highlight handler for intelligent call alert
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_intelligent_call_alert(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    SetLeftSoftkeyFunction(mmi_profiles_entry_intelligent_call_alert, KEY_EVENT_UP);
    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
    SetKeyHandler(mmi_profiles_entry_intelligent_call_alert, KEY_RIGHT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hint_hdlr_intelligent_call_alert
 * DESCRIPTION
 *  Hint handler for intelligent call alert
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hint_hdlr_intelligent_call_alert(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 str_id;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((S8*) hintData[(index)], 0, MAX_SUB_MENU_SIZE);
    if (gprofiles[gprofileId].intelligentCallAlert == MMI_INTELLIGENT_CALL_ALERT_ON)
    {
        str_id = STR_GLOBAL_ON;
    }
    else
    {
        str_id = STR_GLOBAL_OFF;
    }
    mmi_ucs2cpy((S8*) hintData[(index)], GetString(str_id));
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_intelligent_call_alert_on
 * DESCRIPTION
 *  Hightlight handler for intelligent call alert on
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_intelligent_call_alert_on(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    SetLeftSoftkeyFunction(mmi_profiles_set_intelligent_call_alert_on_hdlr, KEY_EVENT_UP);
    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_hilite_hdlr_intelligent_call_alert_off
 * DESCRIPTION
 *  Highlight handler for intelligent call alert off
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_hilite_hdlr_intelligent_call_alert_off(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    ChangeLeftSoftkey(STR_GLOBAL_OK, 0);
    ChangeRightSoftkey(STR_GLOBAL_BACK, 0);
    SetRightSoftkeyFunction(GoBackHistory, KEY_EVENT_UP);
    SetLeftSoftkeyFunction(mmi_profiles_set_intelligent_call_alert_off_hdlr, KEY_EVENT_UP);
    SetKeyHandler(GoBackHistory, KEY_LEFT_ARROW, KEY_EVENT_DOWN);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_intelligent_call_alert_on_hdlr
 * DESCRIPTION
 *  set intelligent call alert on
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_intelligent_call_alert_on_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetIntelligentCallAert(MMI_INTELLIGENT_CALL_ALERT_ON);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_INTELLIGENT_CALL_ALERT);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_profiles_set_intelligent_call_alert_off_hdlr
 * DESCRIPTION
 *  set intelligent call alert off
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_profiles_set_intelligent_call_alert_off_hdlr(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    SetIntelligentCallAert(MMI_INTELLIGENT_CALL_ALERT_OFF);
    DisplayPopup((PU8) GetString(STR_GLOBAL_DONE), IMG_GLOBAL_ACTIVATED, 1, UI_POPUP_NOTIFYDURATION_TIME, SUCCESS_TONE);
    DeleteScreenIfPresent(SCR_PROFILES_INTELLIGENT_CALL_ALERT);
}
#endif /* defined(__MMI_INTELLIGENT_CALL_ALERT__) */ 

/*********************End (Hilite HAndlers)*********************************************/

